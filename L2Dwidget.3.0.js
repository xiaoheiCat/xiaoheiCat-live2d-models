/*! https://github.com/xiazeyu/live2d-widget.js built@6/30/2025 4:14:26 PM */
!function(t,e){for(var r in e)t[r]=e[r]}(exports,function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.e=function(){return Promise.resolve()},r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){process.nextTick((function(){throw t}))},r(r.s=21)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=e.Option=e.Live2DCubismFramework=e.strtod=void 0;var i=r(3),n=r(30),o=r(15),a=r(2),s=i.Live2DCubismFramework.Value,u=n.Live2DCubismFramework.CubismIdManager,l=o.Live2DCubismFramework.CubismRenderer;e.strtod=function(t,e){for(var r=0,i=1;;i++){var n=t.slice(i-1,i);if("e"!=n&&"-"!=n&&"E"!=n){var o=t.substring(0,i),a=Number(o);if(isNaN(a))break;r=i}}var s=parseFloat(t);return isNaN(s)&&(s=NaN),e[0]=t.slice(r),s},function(t){var e,r=!1,i=!1,n=null,o=null;(e=t.Constant||(t.Constant={})).vertexOffset=0,e.vertexStep=2,t.csmDelete=function(t){t&&(t=void 0)};var f=function(){function t(){}return t.startUp=function(t){if(void 0===t&&(t=null),r)return a.CubismLogInfo("CubismFramework.startUp() is already done."),r;if(n=t,console.log(Live2DCubismCore),null!=n&&Live2DCubismCore.Logging.csmSetLogFunction(n.logFunction),r=!0){var e=Live2DCubismCore.Version.csmGetVersion(),i=(4278190080&e)>>24,o=(16711680&e)>>16,s=65535&e,u=e;a.CubismLogInfo("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+i).slice(-2),("00"+o).slice(-2),("0000"+s).slice(-4),u)}return a.CubismLogInfo("CubismFramework.startUp() is complete."),r},t.cleanUp=function(){r=!1,i=!1,n=null,o=null},t.initialize=function(){a.CSM_ASSERT(r),r?i?a.CubismLogWarning("CubismFramework.initialize() skipped, already initialized."):(s.staticInitializeNotForClientCall(),o=new u,i=!0,a.CubismLogInfo("CubismFramework.initialize() is complete.")):a.CubismLogWarning("CubismFramework is not started.")},t.dispose=function(){a.CSM_ASSERT(r),r?i?(s.staticReleaseNotForClientCall(),o.release(),o=null,l.staticRelease(),i=!1,a.CubismLogInfo("CubismFramework.dispose() is complete.")):a.CubismLogWarning("CubismFramework.dispose() skipped, not initialized."):a.CubismLogWarning("CubismFramework is not started.")},t.isStarted=function(){return r},t.isInitialized=function(){return i},t.coreLogFunction=function(t){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(t)},t.getLoggingLevel=function(){return null!=n?n.loggingLevel:c.LogLevel_Off},t.getIdManager=function(){return o},t}();t.CubismFramework=f}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}));var c,f,h=function(){};e.Option=h,(f=c=e.LogLevel||(e.LogLevel={}))[f.LogLevel_Verbose=0]="LogLevel_Verbose",f[f.LogLevel_Debug=1]="LogLevel_Debug",f[f.LogLevel_Info=2]="LogLevel_Info",f[f.LogLevel_Warning=3]="LogLevel_Warning",f[f.LogLevel_Error=4]="LogLevel_Error",f[f.LogLevel_Off=5]="LogLevel_Off"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0,function(t){var e=function(){function t(t){void 0===t&&(t=0),t<1?(this._ptr=[],this._capacity=0,this._size=0):(this._ptr=new Array(t),this._capacity=t,this._size=0)}return t.prototype.at=function(t){return this._ptr[t]},t.prototype.set=function(t,e){this._ptr[t]=e},t.prototype.get=function(t){void 0===t&&(t=0);for(var e=new Array,r=t;r<this._size;r++)e.push(this._ptr[r]);return e},t.prototype.pushBack=function(e){this._size>=this._capacity&&this.prepareCapacity(0==this._capacity?t.s_defaultSize:2*this._capacity),this._ptr[this._size++]=e},t.prototype.clear=function(){this._ptr.length=0,this._size=0},t.prototype.getSize=function(){return this._size},t.prototype.assign=function(t,e){this._size<t&&this.prepareCapacity(t);for(var r=0;r<t;r++)this._ptr[r]=e;this._size=t},t.prototype.resize=function(t,e){void 0===e&&(e=null),this.updateSize(t,e,!0)},t.prototype.updateSize=function(t,e,r){if(void 0===e&&(e=null),void 0===r&&(r=!0),this._size<t)if(this.prepareCapacity(t),r)for(var i=this._size;i<t;i++)this._ptr[i]="function"==typeof e?JSON.parse(JSON.stringify(new e)):e;else for(i=this._size;i<t;i++)this._ptr[i]=e;else{var n=this._size-t;this._ptr.splice(this._size-n,n)}this._size=t},t.prototype.insert=function(t,e,r){var i=t._index,n=e._index,o=r._index,a=o-n;this.prepareCapacity(this._size+a);var s=this._size-i;if(s>0)for(var u=0;u<s;u++)this._ptr.splice(i+u,0,null);for(u=n;u<o;u++,i++)this._ptr[i]=e._vector._ptr[u];this._size=this._size+a},t.prototype.remove=function(t){return!(t<0||this._size<=t||(this._ptr.splice(t,1),--this._size,0))},t.prototype.erase=function(t){var e=t._index;return e<0||this._size<=e?t:(this._ptr.splice(e,1),--this._size,new r(this,e))},t.prototype.prepareCapacity=function(t){t>this._capacity&&(0==this._capacity?(this._ptr=new Array(t),this._capacity=t):(this._ptr.length=t,this._capacity=t))},t.prototype.begin=function(){return 0==this._size?this.end():new r(this,0)},t.prototype.end=function(){return new r(this,this._size)},t.prototype.getOffset=function(e){var r=new t;return r._ptr=this.get(e),r._size=this.get(e).length,r._capacity=this.get(e).length,r},t.s_defaultSize=10,t}();t.csmVector=e;var r=function(){function t(t,e){this._vector=null!=t?t:null,this._index=null!=e?e:0}return t.prototype.set=function(t){return this._index=t._index,this._vector=t._vector,this},t.prototype.preIncrement=function(){return++this._index,this},t.prototype.preDecrement=function(){return--this._index,this},t.prototype.increment=function(){var e=new t(this._vector,this._index++);return this._vector=e._vector,this._index=e._index,this},t.prototype.decrement=function(){var e=new t(this._vector,this._index--);return this._vector=e._vector,this._index=e._index,this},t.prototype.ptr=function(){return this._vector._ptr[this._index]},t.prototype.substitution=function(t){return this._index=t._index,this._vector=t._vector,this},t.prototype.notEqual=function(t){return this._index!=t._index||this._vector!=t._vector},t}();t.iterator=r}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=e.CubismLogError=e.CubismLogWarning=e.CubismLogInfo=e.CubismLogDebug=e.CubismLogVerbose=e.CSM_ASSERT=e.CubismLogPrintIn=e.CubismLogPrint=void 0;var i,n=r(0),o=r(29);e.CubismLogPrint=function(t,e,r){i.CubismDebug.print(t,"[CSM]"+e,r)},e.CubismLogPrintIn=function(t,r,i){e.CubismLogPrint(t,r+"\n",i)},e.CSM_ASSERT=function(t){console.assert(t)},o.CSM_LOG_LEVEL<=o.CSM_LOG_LEVEL_VERBOSE?(e.CubismLogVerbose=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Verbose,"[V]"+t,r)},e.CubismLogDebug=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Debug,"[D]"+t,r)},e.CubismLogInfo=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Info,"[I]"+t,r)},e.CubismLogWarning=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Warning,"[W]"+t,r)},e.CubismLogError=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Error,"[E]"+t,r)}):o.CSM_LOG_LEVEL==o.CSM_LOG_LEVEL_DEBUG?(e.CubismLogDebug=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Debug,"[D]"+t,r)},e.CubismLogInfo=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Info,"[I]"+t,r)},e.CubismLogWarning=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Warning,"[W]"+t,r)},e.CubismLogError=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Error,"[E]"+t,r)}):o.CSM_LOG_LEVEL==o.CSM_LOG_LEVEL_INFO?(e.CubismLogInfo=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Info,"[I]"+t,r)},e.CubismLogWarning=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Warning,"[W]"+t,r)},e.CubismLogError=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Error,"[E]"+t,r)}):o.CSM_LOG_LEVEL==o.CSM_LOG_LEVEL_WARNING?(e.CubismLogWarning=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Warning,"[W]"+t,r)},e.CubismLogError=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Error,"[E]"+t,r)}):o.CSM_LOG_LEVEL==o.CSM_LOG_LEVEL_ERROR&&(e.CubismLogError=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e.CubismLogPrintIn(n.LogLevel.LogLevel_Error,"[E]"+t,r)}),function(t){var e=function(){function t(){}return t.print=function(t,e,r){if(!(t<n.Live2DCubismFramework.CubismFramework.getLoggingLevel())){var i=n.Live2DCubismFramework.CubismFramework.coreLogFunction;i&&i(e.replace(/\{(\d+)\}/g,(function(t,e){return r[e]})))}},t.dumpBytes=function(t,e,r){for(var i=0;i<r;i++)i%16==0&&i>0?this.print(t,"\n"):i%8==0&&i>0&&this.print(t,"  "),this.print(t,"{0} ",[255&e[i]]);this.print(t,"\n")},t}();t.CubismDebug=e}(i=e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var n=r(6),o=r(8),a=r(1),s=r(2),u=r(0),l=a.Live2DCubismFramework.csmVector,c=o.Live2DCubismFramework.csmMap,f=n.Live2DCubismFramework.csmString;!function(t){var e="Error: type mismatch",r=function(){function t(){}return t.prototype.getRawString=function(t,e){return this.getString(t,e)},t.prototype.toInt=function(t){return void 0===t&&(t=0),t},t.prototype.toFloat=function(t){return void 0===t&&(t=0),t},t.prototype.toBoolean=function(t){return void 0===t&&(t=!1),t},t.prototype.getSize=function(){return 0},t.prototype.getArray=function(t){return void 0===t&&(t=null),t},t.prototype.getVector=function(t){return t},t.prototype.getMap=function(t){return t},t.prototype.getValueByIndex=function(r){return t.errorValue.setErrorNotForClientCall(e)},t.prototype.getValueByString=function(r){return t.nullValue.setErrorNotForClientCall(e)},t.prototype.getKeys=function(){return t.s_dummyKeys},t.prototype.isError=function(){return!1},t.prototype.isNull=function(){return!1},t.prototype.isBool=function(){return!1},t.prototype.isFloat=function(){return!1},t.prototype.isString=function(){return!1},t.prototype.isArray=function(){return!1},t.prototype.isMap=function(){return!1},t.prototype.equals=function(t){return!1},t.prototype.isStatic=function(){return!1},t.prototype.setErrorNotForClientCall=function(t){return p.errorValue},t.staticInitializeNotForClientCall=function(){a.trueValue=new a(!0),a.falseValue=new a(!1),p.errorValue=new p("ERROR",!0),this.nullValue=new g,t.s_dummyKeys=new l},t.staticReleaseNotForClientCall=function(){a.trueValue=null,a.falseValue=null,p.errorValue=null,t.nullValue=null,t.s_dummyKeys=null,a.trueValue=null,a.falseValue=null,p.errorValue=null,t.nullValue=null,t.s_dummyKeys=null},t}();t.Value=r;var n=function(){function t(t,e){this._error=null,this._lineCount=0,this._root=null,null!=t&&this.parseBytes(t,e)}return t.create=function(e,r){var i=new t;return i.parseBytes(e,r)?i:(t.delete(i),null)},t.delete=function(t){},t.prototype.getRoot=function(){return this._root},t.prototype.arrayBufferToString=function(t){for(var e=new Uint8Array(t),r="",i=0,n=e.length;i<n;++i)r+="%"+this.pad(e[i].toString(16));return decodeURIComponent(r)},t.prototype.pad=function(t){return t.length<2?"0"+t:t},t.prototype.parseBytes=function(t,e){var r=new Array(1),i=this.arrayBufferToString(t);if(this._root=this.parseValue(i,e,0,r),this._error){var n;return n="Json parse error : @line "+(this._lineCount+1)+"\n",this._root=new h(n),s.CubismLogInfo("{0}",this._root.getRawString()),!1}return null!=this._root||(this._root=new p(new f(this._error),!1),!1)},t.prototype.getParseError=function(){return this._error},t.prototype.checkEndOfFile=function(){return this._root.getArray()[1].equals("EOF")},t.prototype.parseValue=function(t,e,r,i){if(this._error)return null;for(var n,s=null,l=r;l<e;l++)switch(t[l]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":var c=new Array(1);return n=u.strtod(t.slice(l),c),i[0]=t.indexOf(c[0]),new o(n);case'"':return new h(this.parseString(t,e,l+1,i));case"[":return this.parseArray(t,e,l+1,i);case"{":return this.parseObject(t,e,l+1,i);case"n":return l+3<e?(s=new g,i[0]=l+4):this._error="parse null",s;case"t":return l+3<e?(s=a.trueValue,i[0]=l+4):this._error="parse true",s;case"f":return l+4<e?(s=a.falseValue,i[0]=l+5):this._error="illegal ',' position",s;case",":return this._error="illegal ',' position",null;case"]":return i[0]=l,null;case"\n":this._lineCount++}return this._error="illegal end of value",null},t.prototype.parseString=function(t,e,r,i){if(this._error)return null;for(var n=r,o=new f(""),a=r;n<e;n++)switch(t[n]){case'"':return i[0]=n+1,o.append(t.slice(a),n-a),o.s;case"//":if(++n-1>a&&o.append(t.slice(a),n-a),a=n+1,n<e)switch(t[n]){case"\\":o.expansion(1,"\\");break;case'"':o.expansion(1,'"');break;case"/":o.expansion(1,"/");break;case"b":o.expansion(1,"\b");break;case"f":o.expansion(1,"\f");break;case"n":o.expansion(1,"\n");break;case"r":o.expansion(1,"\r");break;case"t":o.expansion(1,"\t");break;case"u":this._error="parse string/unicord escape not supported"}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null},t.prototype.parseObject=function(t,e,r,i){if(this._error)return null;for(var n=new m,o="",a=r,s=Array(1),u=!1;a<e;a++){t:for(;a<e;a++)switch(t[a]){case'"':if(o=this.parseString(t,e,a+1,s),this._error)return null;a=s[0],u=!0;break t;case"}":return i[0]=a+1,n;case":":this._error="illegal ':' position";break;case"\n":this._lineCount++}if(!u)return this._error="key not found",null;u=!1;t:for(;a<e;a++)switch(t[a]){case":":u=!0,a++;break t;case"}":this._error="illegal '}' position";break;case"\n":this._lineCount++}if(!u)return this._error="':' not found",null;var l=this.parseValue(t,e,a,s);if(this._error)return null;a=s[0],n.put(o,l);t:for(;a<e;a++)switch(t[a]){case",":break t;case"}":return i[0]=a+1,n;case"\n":this._lineCount++}}return this._error="illegal end of perseObject",null},t.prototype.parseArray=function(t,e,r,i){if(this._error)return null;for(var n=new d,o=r,a=new Array(1);o<e;o++){var s=this.parseValue(t,e,o,a);if(this._error)return null;o=a[0],s&&n.add(s);t:for(;o<e;o++)switch(t[o]){case",":break t;case"]":return i[0]=o+1,n;case"\n":++this._lineCount}}return n=void 0,this._error="illegal end of parseObject",null},t}();t.CubismJson=n;var o=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return i(e,t),e.prototype.isFloat=function(){return!0},e.prototype.getString=function(t,e){return this._value=parseFloat("\0"),this._stringBuffer="\0",this._stringBuffer},e.prototype.toInt=function(t){return void 0===t&&(t=0),parseInt(this._value.toString())},e.prototype.toFloat=function(t){return void 0===t&&(t=0),this._value},e.prototype.equals=function(t){return"number"==typeof t&&!Math.round(t)&&t==this._value},e}(r);t.JsonFloat=o;var a=function(t){function e(e){var r=t.call(this)||this;return r._boolValue=e,r}return i(e,t),e.prototype.isBool=function(){return!0},e.prototype.toBoolean=function(t){return void 0===t&&(t=!1),this._boolValue},e.prototype.getString=function(t,e){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer},e.prototype.equals=function(t){return"boolean"==typeof t&&t==this._boolValue},e.prototype.isStatic=function(){return!0},e}(r);t.JsonBoolean=a;var h=function(t){function e(e){var r=t.call(this)||this;return"string"==typeof e&&(r._stringBuffer=e),e instanceof f&&(r._stringBuffer=e.s),r}return i(e,t),e.prototype.isString=function(){return!0},e.prototype.getString=function(t,e){return this._stringBuffer},e.prototype.equals=function(t){return"string"==typeof t?this._stringBuffer==t:t instanceof f&&this._stringBuffer==t.s},e}(r);t.JsonString=h;var p=function(t){function e(e,r){var i=this;return(i=t.call(this,e)||this)._isStatic=r,i}return i(e,t),e.prototype.isStatic=function(){return this._isStatic},e.prototype.setErrorNotForClientCall=function(t){return this._stringBuffer=t,this},e.prototype.isError=function(){return!0},e}(h);t.JsonError=p;var g=function(t){function e(){var e=t.call(this)||this;return e._stringBuffer="NullValue",e}return i(e,t),e.prototype.isNull=function(){return!0},e.prototype.getString=function(t,e){return this._stringBuffer},e.prototype.isStatic=function(){return!0},e}(r);t.JsonNullvalue=g;var d=function(t){function n(){var e=t.call(this)||this;return e._array=new l,e}return i(n,t),n.prototype.release=function(){for(var t=this._array.begin();t.notEqual(this._array.end());t.preIncrement()){var e=t.ptr();e&&!e.isStatic()&&(e=void 0,e=null)}},n.prototype.isArray=function(){return!0},n.prototype.getValueByIndex=function(t){if(t<0||this._array.getSize()<=t)return r.errorValue.setErrorNotForClientCall("Error: index out of bounds");var e=this._array.at(t);return null==e?r.nullValue:e},n.prototype.getValueByString=function(t){return r.errorValue.setErrorNotForClientCall(e)},n.prototype.getString=function(t,e){for(var r=e+"[\n",i=this._array.begin();i.notEqual(this._array.end());i.increment()){var n=i.ptr();this._stringBuffer+=e+""+n.getString(e+" ")+"\n"}return this._stringBuffer=r+e+"]\n",this._stringBuffer},n.prototype.add=function(t){this._array.pushBack(t)},n.prototype.getVector=function(t){return void 0===t&&(t=null),this._array},n.prototype.getSize=function(){return this._array.getSize()},n}(r);t.JsonArray=d;var m=function(t){function n(){var e=t.call(this)||this;return e._map=new c,e}return i(n,t),n.prototype.release=function(){for(var t=this._map.begin();t.notEqual(this._map.end());){var e=t.ptr().second;e&&!e.isStatic()&&(e=void 0,e=null),t.preIncrement()}},n.prototype.isMap=function(){return!0},n.prototype.getValueByString=function(t){if(t instanceof f){var e=this._map.getValue(t.s);return null==e?r.nullValue:e}for(var i=this._map.begin();i.notEqual(this._map.end());i.preIncrement())if(i.ptr().first==t)return null==i.ptr().second?r.nullValue:i.ptr().second;return r.nullValue},n.prototype.getValueByIndex=function(t){return r.errorValue.setErrorNotForClientCall(e)},n.prototype.getString=function(t,e){this._stringBuffer=e+"{\n";for(var r=this._map.begin();r.notEqual(this._map.end());){var i=r.ptr().first,n=r.ptr().second;this._stringBuffer+=e+" "+i+" : "+n.getString(e+"   ")+" \n",r.preIncrement()}return this._stringBuffer+=e+"}\n",this._stringBuffer},n.prototype.getMap=function(t){return this._map},n.prototype.put=function(t,e){this._map.setValue(t,e)},n.prototype.getKeys=function(){if(!this._keys){this._keys=new l;for(var t=this._map.begin();t.notEqual(this._map.end());){var e=t.ptr().first;this._keys.pushBack(e),t.preIncrement()}}return this._keys},n.prototype.getSize=function(){return this._keys.getSize()},n}(r);t.JsonMap=m}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0,function(t){var e=function(){function t(){this._tr=new Float32Array(16),this.loadIdentity()}return t.multiply=function(t,e,r){for(var i=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=0;n<4;++n)for(var o=0;o<4;++o)for(var a=0;a<4;++a)i[o+4*n]+=t[a+4*n]*e[o+4*a];for(n=0;n<16;++n)r[n]=i[n]},t.prototype.loadIdentity=function(){var t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)},t.prototype.setMatrix=function(t){for(var e=0;e<16;++e)this._tr[e]=t[e]},t.prototype.getArray=function(){return this._tr},t.prototype.getScaleX=function(){return this._tr[0]},t.prototype.getScaleY=function(){return this._tr[5]},t.prototype.getTranslateX=function(){return this._tr[12]},t.prototype.getTranslateY=function(){return this._tr[13]},t.prototype.transformX=function(t){return this._tr[0]*t+this._tr[12]},t.prototype.transformY=function(t){return this._tr[5]*t+this._tr[13]},t.prototype.invertTransformX=function(t){return(t-this._tr[12])/this._tr[0]},t.prototype.invertTransformY=function(t){return(t-this._tr[13])/this._tr[5]},t.prototype.translateRelative=function(e,r){var i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,r,0,1]);t.multiply(i,this._tr,this._tr)},t.prototype.translate=function(t,e){this._tr[12]=t,this._tr[13]=e},t.prototype.translateX=function(t){this._tr[12]=t},t.prototype.translateY=function(t){this._tr[13]=t},t.prototype.scaleRelative=function(e,r){var i=new Float32Array([e,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]);t.multiply(i,this._tr,this._tr)},t.prototype.scale=function(t,e){this._tr[0]=t,this._tr[5]=e},t.prototype.multiplyByMatrix=function(e){t.multiply(e.getArray(),this._tr,this._tr)},t.prototype.clone=function(){for(var e=new t,r=0;r<this._tr.length;r++)e._tr[r]=this._tr[r];return e},t}();t.CubismMatrix44=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&i(e,t,r);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.LAppDelegate=e.frameBuffer=e.gl=e.s_instance=e.canvas=void 0;var a=r(0),s=a.Live2DCubismFramework.CubismFramework,u=r(32),l=r(12),c=r(59),f=r(17),h=o(r(13)),p=o(r(60)),g=r(7),d=r(14);e.canvas=null,e.s_instance=null,e.gl=null,e.frameBuffer=null;var m=function(){function t(){this._captured=!1,this._mouseX=0,this._mouseY=0,this._isEnd=!1,this._cubismOption=new a.Option,this._view=new u.LAppView,this._textureManager=new c.LAppTextureManager}return t.getInstance=function(){return null==e.s_instance&&(e.s_instance=new t),e.s_instance},t.releaseInstance=function(){null!=e.s_instance&&e.s_instance.release(),e.s_instance=null},t.prototype.initialize=function(){var t=document.getElementById(g.config.name.div);null!==t&&document.body.removeChild(t);var r=document.createElement("div");return r.id=g.config.name.div,r.className="live2d-widget-container",r.style.setProperty("position","fixed"),r.style.setProperty(g.config.display.position,g.config.display.hOffset+"px"),r.style.setProperty("bottom",g.config.display.vOffset+"px"),r.style.setProperty("width",g.config.display.width+"px"),r.style.setProperty("height",g.config.display.height+"px"),r.style.setProperty("z-index","99999"),r.style.setProperty("opacity",g.config.react.opacity),r.style.setProperty("pointer-events","none"),document.body.appendChild(r),d.L2Dwidget.emit("create-container",r),g.config.dialog.enable&&p.createDialogElement(r),e.canvas=document.createElement("canvas"),e.canvas.setAttribute("id",g.config.name.canvas),e.canvas.setAttribute("width",(g.config.display.width*g.config.display.superSample).toString()),e.canvas.setAttribute("height",(g.config.display.height*g.config.display.superSample).toString()),e.canvas.style.setProperty("position","absolute"),e.canvas.style.setProperty("left","0px"),e.canvas.style.setProperty("top","0px"),e.canvas.style.setProperty("width",g.config.display.width+"px"),e.canvas.style.setProperty("height",g.config.display.height+"px"),g.config.dev.border&&e.canvas.style.setProperty("border","dashed 1px #CCC"),e.canvas.width=g.config.display.width,e.canvas.height=g.config.display.height,r.appendChild(e.canvas),d.L2Dwidget.emit("create-canvas",e.canvas),e.gl=e.canvas.getContext("webgl")||e.canvas.getContext("experimental-webgl"),e.gl?(e.frameBuffer||(e.frameBuffer=e.gl.getParameter(e.gl.FRAMEBUFFER_BINDING)),e.gl.enable(e.gl.BLEND),e.gl.blendFunc(e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA),e.canvas,window.addEventListener("mousedown",_),window.addEventListener("mousemove",y),window.addEventListener("mouseup",b),document.addEventListener("mouseleave",S),window.addEventListener("touchstart",v),window.addEventListener("touchend",w),window.addEventListener("touchmove",A),window.addEventListener("touchcancel",C),this._view.initialize(),this.initializeCubism(),!0):(alert("Cannot initialize WebGL. This browser does not support."),e.gl=null,document.body.innerHTML="This browser does not support the <code>&lt;canvas&gt;</code> element.",!1)},t.prototype.release=function(){this._textureManager.release(),this._textureManager=null,this._view.release(),this._view=null,f.LAppLive2DManager.releaseInstance(),s.dispose()},t.prototype.run=function(){var t=this,r=function(){null!=e.s_instance&&(l.LAppPal.updateTime(),e.gl.enable(e.gl.DEPTH_TEST),e.gl.depthFunc(e.gl.LEQUAL),e.gl.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT),e.gl.clearDepth(1),e.gl.enable(e.gl.BLEND),e.gl.blendFunc(e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA),t._view.render(),requestAnimationFrame(r))};r()},t.prototype.createShader=function(){var t=e.gl.createShader(e.gl.VERTEX_SHADER);if(null==t)return l.LAppPal.printMessage("failed to create vertexShader"),null;e.gl.shaderSource(t,"precision mediump float;attribute vec3 position;attribute vec2 uv;varying vec2 vuv;void main(void){   gl_Position = vec4(position, 1.0);   vuv = uv;}"),e.gl.compileShader(t);var r=e.gl.createShader(e.gl.FRAGMENT_SHADER);if(null==r)return l.LAppPal.printMessage("failed to create fragmentShader"),null;e.gl.shaderSource(r,"precision mediump float;varying vec2 vuv;uniform sampler2D texture;void main(void){   gl_FragColor = texture2D(texture, vuv);}"),e.gl.compileShader(r);var i=e.gl.createProgram();return e.gl.attachShader(i,t),e.gl.attachShader(i,r),e.gl.deleteShader(t),e.gl.deleteShader(r),e.gl.linkProgram(i),e.gl.useProgram(i),i},t.prototype.getView=function(){return this._view},t.prototype.getTextureManager=function(){return this._textureManager},t.prototype.initializeCubism=function(){this._cubismOption.logFunction=l.LAppPal.printMessage,this._cubismOption.loggingLevel=h.CubismLoggingLevel,s.startUp(this._cubismOption),s.initialize(),f.LAppLive2DManager.getInstance(),l.LAppPal.updateTime(),this._view.initializeSprite()},t}();function _(t){if(m.getInstance()._view){m.getInstance()._captured=!0;var e=t.pageX,r=t.pageY;m.getInstance()._view.onTouchesBegan(e,r)}else l.LAppPal.printMessage("view notfound")}function y(t){if(m.getInstance()._view){var r=e.canvas.getBoundingClientRect(),i=t.clientX-r.left,n=t.clientY-r.top;m.getInstance()._view.onTouchesMoved(i,n)}else l.LAppPal.printMessage("view notfound")}function b(t){if(m.getInstance()._captured=!1,m.getInstance()._view){var e=t.target.getBoundingClientRect(),r=t.clientX-e.left,i=t.clientY-e.top;m.getInstance()._view.onTouchesEnded(r,i)}else l.LAppPal.printMessage("view notfound")}function v(t){if(m.getInstance()._view){m.getInstance()._captured=!0;var e=t.changedTouches[0].pageX,r=t.changedTouches[0].pageY;m.getInstance()._view.onTouchesBegan(e,r)}else l.LAppPal.printMessage("view notfound")}function A(t){if(m.getInstance()._captured)if(m.getInstance()._view){var e=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-e.left,i=t.changedTouches[0].clientY-e.top;m.getInstance()._view.onTouchesMoved(r,i)}else l.LAppPal.printMessage("view notfound")}function w(t){if(m.getInstance()._captured=!1,m.getInstance()._view){var e=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-e.left,i=t.changedTouches[0].clientY-e.top;m.getInstance()._view.onTouchesEnded(r,i)}else l.LAppPal.printMessage("view notfound")}function C(t){if(m.getInstance()._captured=!1,m.getInstance()._view){var e=t.target.getBoundingClientRect(),r=t.changedTouches[0].clientX-e.left,i=t.changedTouches[0].clientY-e.top;m.getInstance()._view.onTouchesEnded(r,i)}else l.LAppPal.printMessage("view notfound")}function S(t){m.getInstance()._captured=!1,m.getInstance()._view?m.getInstance()._view.onTouchesEnded(0,0):l.LAppPal.printMessage("view notfound")}e.LAppDelegate=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0,function(t){var e=function(){function t(t){this.s=t}return t.prototype.append=function(t,e){return this.s+=void 0!==e?t.substr(0,e):t,this},t.prototype.expansion=function(t,e){for(var r=0;r<t;r++)this.append(e);return this},t.prototype.getBytes=function(){return encodeURIComponent(this.s).replace(/%../g,"x").length},t.prototype.getLength=function(){return this.s.length},t.prototype.isLess=function(t){return this.s<t.s},t.prototype.isGreat=function(t){return this.s>t.s},t.prototype.isEqual=function(t){return this.s==t},t.prototype.isEmpty=function(){return 0==this.s.length},t}();t.csmString=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.config=e.configApplyer=void 0;var i=a(r(23)),n=a(r(24)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(25));function a(t){return t&&t.__esModule?t:{default:t}}var s={};console.log(o.default()),e.configApplyer=function(t){(0,n.default)(s,t,i.default)},e.config=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(2);!function(t){var e=function(t,e){this.first=null==t?null:t,this.second=null==e?null:e};t.csmPair=e;var r=function(){function t(t){null!=t?t<1?(this._keyValues=[],this._dummyValue=null,this._size=0):(this._keyValues=new Array(t),this._size=t):(this._keyValues=[],this._dummyValue=null,this._size=0)}return t.prototype.release=function(){this.clear()},t.prototype.appendKey=function(t){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new e(t),this._size+=1},t.prototype.getValue=function(t){for(var e=-1,r=0;r<this._size;r++)if(this._keyValues[r].first==t){e=r;break}return e>=0?this._keyValues[e].second:(this.appendKey(t),this._keyValues[this._size-1].second)},t.prototype.setValue=function(t,e){for(var r=-1,i=0;i<this._size;i++)if(this._keyValues[i].first==t){r=i;break}r>=0?this._keyValues[r].second=e:(this.appendKey(t),this._keyValues[this._size-1].second=e)},t.prototype.isExist=function(t){for(var e=0;e<this._size;e++)if(this._keyValues[e].first==t)return!0;return!1},t.prototype.clear=function(){this._keyValues=void 0,this._keyValues=null,this._keyValues=[],this._size=0},t.prototype.getSize=function(){return this._size},t.prototype.prepareCapacity=function(e,r){e>this._keyValues.length&&(0==this._keyValues.length?(!r&&e<t.DefaultSize&&(e=t.DefaultSize),this._keyValues.length=e):(!r&&e<2*this._keyValues.length&&(e=2*this._keyValues.length),this._keyValues.length=e))},t.prototype.begin=function(){return new n(this,0)},t.prototype.end=function(){return new n(this,this._size)},t.prototype.erase=function(t){var e=t._index;return e<0||this._size<=e?t:(this._keyValues.splice(e,1),--this._size,new n(this,e))},t.prototype.dumpAsInt=function(){for(var t=0;t<this._size;t++)i.CubismLogDebug("{0} ,",this._keyValues[t]),i.CubismLogDebug("\n")},t.DefaultSize=10,t}();t.csmMap=r;var n=function(){function t(t,e){this._map=null!=t?t:new r,this._index=null!=e?e:0}return t.prototype.set=function(t){return this._index=t._index,this._map=t._map,this},t.prototype.preIncrement=function(){return++this._index,this},t.prototype.preDecrement=function(){return--this._index,this},t.prototype.increment=function(){var e=new t(this._map,this._index++);return this._map=e._map,this._index=e._index,this},t.prototype.decrement=function(){var e=new t(this._map,this._index);return this._map=e._map,this._index=e._index,this},t.prototype.ptr=function(){return this._map._keyValues[this._index]},t.prototype.notEqual=function(t){return this._index!=t._index||this._map!=t._map},t}();t.iterator=n}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(10),n=r(1),o=r(2),a=n.Live2DCubismFramework.csmVector,s=i.Live2DCubismFramework.CubismMath;!function(t){var e=function(){function t(){var t=this;this.setFinishedMotionHandler=function(e){return t._onFinishedMotion=e},this.getFinishedMotionHandler=function(){return t._onFinishedMotion},this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new a}return t.delete=function(t){t.release(),t=void 0,t=null},t.prototype.release=function(){this._weight=0},t.prototype.updateParameters=function(t,e,r){if(e.isAvailable()&&!e.isFinished()){if(!e.isStarted()){e.setIsStarted(!0),e.setStartTime(r-this._offsetSeconds),e.setFadeInStartTime(r);var i=this.getDuration();e.getEndTime()<0&&e.setEndTime(i<=0?-1:e.getStartTime()+i)}var n=this._weight;n=n*(0==this._fadeInSeconds?1:s.getEasingSine((r-e.getFadeInStartTime())/this._fadeInSeconds))*(0==this._fadeOutSeconds||e.getEndTime()<0?1:s.getEasingSine((e.getEndTime()-r)/this._fadeOutSeconds)),e.setState(r,n),o.CSM_ASSERT(0<=n&&n<=1),this.doUpdateParameters(t,r,n,e),e.getEndTime()>0&&e.getEndTime()<r&&e.setIsFinished(!0)}},t.prototype.setFadeInTime=function(t){this._fadeInSeconds=t},t.prototype.setFadeOutTime=function(t){this._fadeOutSeconds=t},t.prototype.getFadeOutTime=function(){return this._fadeOutSeconds},t.prototype.getFadeInTime=function(){return this._fadeInSeconds},t.prototype.setWeight=function(t){this._weight=t},t.prototype.getWeight=function(){return this._weight},t.prototype.getDuration=function(){return-1},t.prototype.getLoopDuration=function(){return-1},t.prototype.setOffsetTime=function(t){this._offsetSeconds=t},t.prototype.getFiredEvent=function(t,e){return this._firedEventValues},t}();t.ACubismMotion=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(11).Live2DCubismFramework.CubismVector2;!function(t){var e=function(){function t(){}return t.range=function(t,e,r){return t<e?t=e:t>r&&(t=r),t},t.sin=function(t){return Math.sin(t)},t.cos=function(t){return Math.cos(t)},t.abs=function(t){return Math.abs(t)},t.sqrt=function(t){return Math.sqrt(t)},t.getEasingSine=function(t){return t<0?0:t>1?1:.5-.5*this.cos(t*Math.PI)},t.max=function(t,e){return t>e?t:e},t.min=function(t,e){return t>e?e:t},t.degreesToRadian=function(t){return t/180*Math.PI},t.radianToDegrees=function(t){return 180*t/Math.PI},t.directionToRadian=function(t,e){for(var r=Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x);r<-Math.PI;)r+=2*Math.PI;for(;r>Math.PI;)r-=2*Math.PI;return r},t.directionToDegrees=function(t,e){var r=this.directionToRadian(t,e),i=this.radianToDegrees(r);return e.x-t.x>0&&(i=-i),i},t.radianToDirection=function(t){var e=new i;return e.x=this.sin(t),e.y=this.cos(t),e},t}();t.CubismMath=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0,function(t){var e=function(){function t(t,e){this.x=t,this.y=e,this.x=null==t?0:t,this.y=null==e?0:e}return t.prototype.add=function(e){var r=new t(0,0);return r.x=this.x+e.x,r.y=this.y+e.y,r},t.prototype.substract=function(e){var r=new t(0,0);return r.x=this.x-e.x,r.y=this.y-e.y,r},t.prototype.multiply=function(e){var r=new t(0,0);return r.x=this.x*e.x,r.y=this.y*e.y,r},t.prototype.multiplyByScaler=function(e){return this.multiply(new t(e,e))},t.prototype.division=function(e){var r=new t(0,0);return r.x=this.x/e.x,r.y=this.y/e.y,r},t.prototype.divisionByScalar=function(e){return this.division(new t(e,e))},t.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.getDistanceWith=function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.normalize=function(){var t=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/t,this.y=this.y/t},t.prototype.isEqual=function(t){return this.x==t.x&&this.y==t.y},t.prototype.isNotEqual=function(t){return!this.isEqual(t)},t}();t.CubismVector2=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LAppPal=void 0;var i=function(){function t(){}return t.loadFileAsBytes=function(t,e){fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return e(t,t.byteLength)}))},t.getDeltaTime=function(){return this.s_deltaTime},t.updateTime=function(){this.s_currentFrame=Date.now(),this.s_deltaTime=(this.s_currentFrame-this.s_lastFrame)/1e3,this.s_lastFrame=this.s_currentFrame},t.printMessage=function(t){console.log(t)},t.lastUpdate=Date.now(),t.s_currentFrame=0,t.s_lastFrame=0,t.s_deltaTime=0,t}();e.LAppPal=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CubismLoggingLevel=e.DebugTouchLogEnable=e.DebugLogEnable=e.PriorityForce=e.PriorityNormal=e.PriorityIdle=e.PriorityNone=e.HitAreaNameBody=e.HitAreaNameHead=e.MotionGroupTapBody=e.MotionGroupIdle=e.ViewLogicalMaxTop=e.ViewLogicalMaxBottom=e.ViewLogicalMaxRight=e.ViewLogicalMaxLeft=e.ViewLogicalRight=e.ViewLogicalLeft=e.ViewMinScale=e.ViewMaxScale=void 0;var i=r(0);e.ViewMaxScale=1,e.ViewMinScale=1,e.ViewLogicalLeft=-1,e.ViewLogicalRight=1,e.ViewLogicalMaxLeft=-2,e.ViewLogicalMaxRight=2,e.ViewLogicalMaxBottom=-2,e.ViewLogicalMaxTop=2,e.MotionGroupIdle="Idle",e.MotionGroupTapBody="TapBody",e.HitAreaNameHead="Head",e.HitAreaNameBody="Body",e.PriorityNone=0,e.PriorityIdle=1,e.PriorityNormal=2,e.PriorityForce=3,e.DebugLogEnable=!1,e.DebugTouchLogEnable=!1,e.CubismLoggingLevel=i.LogLevel.LogLevel_Verbose},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.L2Dwidget=void 0;var i,n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=(i=r(22))&&i.__esModule?i:{default:i},a=r(7),s=r(16),u=new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.config=a.config,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.EventEmitter),n(e,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.configApplyer)(e),this.emit("config",this.config),!a.config.mobile.show&&o.default.mobile()||Promise.resolve().then(r.t.bind(null,5,7)).then((function(e){var r=document.createElement("script");r.type="text/javascript",r.async="async",r.src=a.config.js.core,document.body.appendChild(r),r.onload=function(){t.coreApp=e.LAppDelegate,0!=t.coreApp.getInstance().initialize()&&t.coreApp.getInstance().run()}})).catch((function(t){console.error(t)}))}},{key:"captureFrame",value:function(t){return this.coreApp.captureFrame(t)}},{key:"downloadFrame",value:function(){this.captureFrame((function(t){var e=document.createElement("a");document.body.appendChild(e),e.setAttribute("type","hidden"),e.href=t,e.download="live2d.png",e.click()}))}}]),e}());e.L2Dwidget=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(4).Live2DCubismFramework.CubismMatrix44;!function(t){var e=function(){function t(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._model=null,this._modelColor=new n,this._mvpMatrix4x4=new i,this._mvpMatrix4x4.loadIdentity()}return t.create=function(){return null},t.delete=function(t){},t.prototype.initialize=function(t){this._model=t},t.prototype.drawModel=function(){null!=this.getModel()&&this.doDrawModel()},t.prototype.setMvpMatrix=function(t){this._mvpMatrix4x4.setMatrix(t.getArray())},t.prototype.getMvpMatrix=function(){return this._mvpMatrix4x4},t.prototype.setModelColor=function(t,e,r,i){t<0?t=0:t>1&&(t=1),e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),i<0?i=0:i>1&&(i=1),this._modelColor.R=t,this._modelColor.G=e,this._modelColor.B=r,this._modelColor.A=i},t.prototype.getModelColor=function(){return JSON.parse(JSON.stringify(this._modelColor))},t.prototype.setIsPremultipliedAlpha=function(t){this._isPremultipliedAlpha=t},t.prototype.isPremultipliedAlpha=function(){return this._isPremultipliedAlpha},t.prototype.setIsCulling=function(t){this._isCulling=t},t.prototype.isCulling=function(){return this._isCulling},t.prototype.setAnisotropy=function(t){this._anisortopy=t},t.prototype.getAnisotropy=function(){return this._anisortopy},t.prototype.getModel=function(){return this._model},t}();t.CubismRenderer=e,(r=t.CubismBlendMode||(t.CubismBlendMode={}))[r.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",r[r.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",r[r.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative";var r,n=function(){this.R=1,this.G=1,this.B=1,this.A=1};t.CubismTextureColor=n}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventHandlers={}}return i(t,[{key:"on",value:function(t,e){if("function"!=typeof e)throw new TypeError("Event handler is not a function.");return this.eventHandlers[t]||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e),this}},{key:"emit",value:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return this.eventHandlers[t]&&this.eventHandlers[t].forEach((function(t){"function"==typeof t&&t.apply(void 0,r)})),this.eventHandlers["*"]&&this.eventHandlers["*"].forEach((function(e){"function"==typeof e&&e.apply(void 0,[t].concat(r))})),this}}]),t}();t.exports={EventEmitter:n}},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&i(e,t,r);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.LAppLive2DManager=e.s_instance=void 0;var a=r(4).Live2DCubismFramework.CubismMatrix44,s=r(7),u=r(35),l=r(12),c=r(5),f=o(r(13));e.s_instance=null;var h=function(){function t(){this._finishedMotion=function(t){l.LAppPal.printMessage("Motion Finished:"),console.log(t)};var t=s.config.model.jsonPath,e=t.substring(0,t.lastIndexOf("/")+1),r=t.substring(t.lastIndexOf("/")+1);console.log(t),this._viewMatrix=new a,this._model=new u.LAppModel,this._model.loadAssets(e,r)}return t.getInstance=function(){return null==e.s_instance&&(e.s_instance=new t),e.s_instance},t.releaseInstance=function(){null!=e.s_instance&&(e.s_instance=void 0),e.s_instance=null},t.prototype.releaseAllModel=function(){this._model.release()},t.prototype.onDrag=function(t,e){this._model&&this._model.setDragging(t,e)},t.prototype.onTap=function(t,e){f.DebugLogEnable&&l.LAppPal.printMessage("[APP]tap point: {x: "+t.toFixed(2)+" y: "+e.toFixed(2)+"}"),this._model.hitTest(f.HitAreaNameHead,t,e)?(f.DebugLogEnable&&l.LAppPal.printMessage("[APP]hit area: ["+f.HitAreaNameHead+"]"),this._model.setRandomExpression()):this._model.hitTest(f.HitAreaNameBody,t,e)&&(f.DebugLogEnable&&l.LAppPal.printMessage("[APP]hit area: ["+f.HitAreaNameBody+"]"),this._model.startRandomMotion(f.MotionGroupTapBody,f.PriorityNormal,this._finishedMotion))},t.prototype.onUpdate=function(){var t=new a,e=c.canvas.width,r=c.canvas.height;t.scale(4,4*e/r),null!=this._viewMatrix&&t.multiplyByMatrix(this._viewMatrix);var i=t.clone(),n=this._model;t=i.clone(),n.update(),n.draw(t)},t}();e.LAppLive2DManager=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(38),n=r(1).Live2DCubismFramework.csmVector,o=i.Live2DCubismFramework.CubismMotionQueueEntry;!function(t){var e=function(){function e(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new n}return e.prototype.release=function(){for(var t=0;t<this._motions.getSize();++t)this._motions.at(t)&&(this._motions.at(t).release(),this._motions.set(t,void 0),this._motions.set(t,null));this._motions=null},e.prototype.startMotion=function(e,r,i){if(null==e)return t.InvalidMotionQueueEntryHandleValue;for(var n=null,a=0;a<this._motions.getSize();++a)null!=(n=this._motions.at(a))&&n.startFadeout(n._motion.getFadeOutTime(),i);return(n=new o)._autoDelete=r,n._motion=e,this._motions.pushBack(n),n._motionQueueEntryHandle},e.prototype.isFinished=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var e=t.ptr();if(null!=e)if(null!=e._motion){if(!e.isFinished())return!1;t.preIncrement()}else e.release(),e=void 0,e=null,t=this._motions.erase(t);else t=this._motions.erase(t)}return!0},e.prototype.isFinishedByHandle=function(t){for(var e=this._motions.begin();e.notEqual(this._motions.end());e.increment()){var r=e.ptr();if(null!=r&&r._motionQueueEntryHandle==t&&!r.isFinished())return!1}return!0},e.prototype.stopAllMotions=function(){for(var t=this._motions.begin();t.notEqual(this._motions.end());){var e=t.ptr();null!=e?(e.release(),e=void 0,e=null,t=this._motions.erase(t)):t=this._motions.erase(t)}},e.prototype.getCubismMotionQueueEntry=function(t){for(var e=this._motions.begin();e.notEqual(this._motions.end());e.preIncrement()){var r=e.ptr();if(null!=r&&r._motionQueueEntryHandle==t)return r}return null},e.prototype.setEventCallback=function(t,e){void 0===e&&(e=null),this._eventCallBack=t,this._eventCustomData=e},e.prototype.doUpdateMotion=function(t,e){for(var r=!1,i=this._motions.begin();i.notEqual(this._motions.end());){var n=i.ptr();if(null!=n){var o=n._motion;if(null!=o){o.updateParameters(t,n,e),r=!0;for(var a=o.getFiredEvent(n.getLastCheckEventTime()-n.getStartTime(),e-n.getStartTime()),s=0;s<a.getSize();++s)this._eventCallBack(this,a.at(s),this._eventCustomData);n.setLastCheckEventTime(e),n.isFinished()?(n.release(),n=void 0,n=null,i=this._motions.erase(i)):i.preIncrement()}else n.release(),n=void 0,n=null,i=this._motions.erase(i)}else i=this._motions.erase(i)}return r},e}();t.CubismMotionQueueManager=e,t.InvalidMotionQueueEntryHandleValue=-1}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0,function(t){var e=function(){function t(){this._currentTime=0}return t.create=function(){return new t},t.delete=function(t){null!=t&&(t=null)},t.prototype.setParameters=function(t){this._breathParameters=t},t.prototype.getParameters=function(){return this._breathParameters},t.prototype.updateParameters=function(t,e){this._currentTime+=e;for(var r=2*this._currentTime*3.14159,i=0;i<this._breathParameters.getSize();++i){var n=this._breathParameters.at(i);t.addParameterValueById(n.parameterId,n.offset+n.peak*Math.sin(r/n.cycle),n.weight)}},t}();t.CubismBreath=e;var r=function(t,e,r,i,n){this.parameterId=null==t?null:t,this.offset=null==e?0:e,this.peak=null==r?0:r,this.cycle=null==i?0:i,this.weight=null==n?0:n};t.BreathParameterData=r}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(1).Live2DCubismFramework.csmVector;!function(t){var e,r,n=function(){function t(t){if(this._blinkingState=e.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new i,null!=t)for(var r=0;r<t.getEyeBlinkParameterCount();++r)this._parameterIds.pushBack(t.getEyeBlinkParameterId(r))}return t.create=function(e){return void 0===e&&(e=null),new t(e)},t.delete=function(t){null!=t&&(t=null)},t.prototype.setBlinkingInterval=function(t){this._blinkingIntervalSeconds=t},t.prototype.setBlinkingSetting=function(t,e,r){this._closingSeconds=t,this._closedSeconds=e,this._openingSeconds=r},t.prototype.setParameterIds=function(t){this._parameterIds=t},t.prototype.getParameterIds=function(){return this._parameterIds},t.prototype.updateParameters=function(r,i){this._userTimeSeconds+=i;var n,o=0;switch(this._blinkingState){case e.EyeState_Closing:(o=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds)>=1&&(o=1,this._blinkingState=e.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),n=1-o;break;case e.EyeState_Closed:(o=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds)>=1&&(this._blinkingState=e.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),n=0;break;case e.EyeState_Opening:(o=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds)>=1&&(o=1,this._blinkingState=e.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),n=o;break;case e.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=e.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),n=1;break;case e.EyeState_First:default:this._blinkingState=e.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),n=1}t.CloseIfZero||(n=-n);for(var a=0;a<this._parameterIds.getSize();++a)r.setParameterValueById(this._parameterIds.at(a),n)},t.prototype.determinNextBlinkingTiming=function(){var t=Math.random();return this._userTimeSeconds+t*(2*this._blinkingIntervalSeconds-1)},t.CloseIfZero=!0,t}();t.CubismEyeBlink=n,(r=e=t.EyeState||(t.EyeState={}))[r.EyeState_First=0]="EyeState_First",r[r.EyeState_Interval=1]="EyeState_Interval",r[r.EyeState_Closing=2]="EyeState_Closing",r[r.EyeState_Closed=3]="EyeState_Closed",r[r.EyeState_Opening=4]="EyeState_Opening"}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){t.exports=r(14)},function(t,e,r){"use strict";r.r(e);var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=window.device,o={},a=[];window.device=o;var s=window.document.documentElement,u=window.navigator.userAgent.toLowerCase(),l=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"];function c(t){return-1!==u.indexOf(t)}function f(t){return s.className.match(new RegExp(t,"i"))}function h(t){var e=null;f(t)||(e=s.className.replace(/^\s+|\s+$/g,""),s.className=e+" "+t)}function p(t){f(t)&&(s.className=s.className.replace(" "+t,""))}function g(){o.landscape()?(p("portrait"),h("landscape"),d("landscape")):(p("landscape"),h("portrait"),d("portrait")),y()}function d(t){for(var e in a)a[e](t)}o.macos=function(){return c("mac")},o.ios=function(){return o.iphone()||o.ipod()||o.ipad()},o.iphone=function(){return!o.windows()&&c("iphone")},o.ipod=function(){return c("ipod")},o.ipad=function(){return c("ipad")},o.android=function(){return!o.windows()&&c("android")},o.androidPhone=function(){return o.android()&&c("mobile")},o.androidTablet=function(){return o.android()&&!c("mobile")},o.blackberry=function(){return c("blackberry")||c("bb10")||c("rim")},o.blackberryPhone=function(){return o.blackberry()&&!c("tablet")},o.blackberryTablet=function(){return o.blackberry()&&c("tablet")},o.windows=function(){return c("windows")},o.windowsPhone=function(){return o.windows()&&c("phone")},o.windowsTablet=function(){return o.windows()&&c("touch")&&!o.windowsPhone()},o.fxos=function(){return(c("(mobile")||c("(tablet"))&&c(" rv:")},o.fxosPhone=function(){return o.fxos()&&c("mobile")},o.fxosTablet=function(){return o.fxos()&&c("tablet")},o.meego=function(){return c("meego")},o.cordova=function(){return window.cordova&&"file:"===location.protocol},o.nodeWebkit=function(){return"object"===i(window.process)},o.mobile=function(){return o.androidPhone()||o.iphone()||o.ipod()||o.windowsPhone()||o.blackberryPhone()||o.fxosPhone()||o.meego()},o.tablet=function(){return o.ipad()||o.androidTablet()||o.blackberryTablet()||o.windowsTablet()||o.fxosTablet()},o.desktop=function(){return!o.tablet()&&!o.mobile()},o.television=function(){for(var t=0;t<l.length;){if(c(l[t]))return!0;t++}return!1},o.portrait=function(){return window.innerHeight/window.innerWidth>1},o.landscape=function(){return window.innerHeight/window.innerWidth<1},o.noConflict=function(){return window.device=n,this},o.ios()?o.ipad()?h("ios ipad tablet"):o.iphone()?h("ios iphone mobile"):o.ipod()&&h("ios ipod mobile"):o.macos()?h("macos desktop"):o.android()?o.androidTablet()?h("android tablet"):h("android mobile"):o.blackberry()?o.blackberryTablet()?h("blackberry tablet"):h("blackberry mobile"):o.windows()?o.windowsTablet()?h("windows tablet"):o.windowsPhone()?h("windows mobile"):h("windows desktop"):o.fxos()?o.fxosTablet()?h("fxos tablet"):h("fxos mobile"):o.meego()?h("meego mobile"):o.nodeWebkit()?h("node-webkit"):o.television()?h("television"):o.desktop()&&h("desktop"),o.cordova()&&h("cordova"),o.onChangeOrientation=function(t){"function"==typeof t&&a.push(t)};var m="resize";function _(t){for(var e=0;e<t.length;e++)if(o[t[e]]())return t[e];return"unknown"}function y(){o.orientation=_(["portrait","landscape"])}Object.prototype.hasOwnProperty.call(window,"onorientationchange")&&(m="onorientationchange"),window.addEventListener?window.addEventListener(m,g,!1):window.attachEvent?window.attachEvent(m,g):window[m]=g,g(),o.type=_(["mobile","tablet","desktop"]),o.os=_(["ios","iphone","ipad","ipod","android","blackberry","windows","fxos","meego","television"]),y(),e.default=o},function(t,e,r){"use strict";t.exports={js:{core:"src/Core/live2dcubismcore.js"},model:{jsonPath:"./model/biaoqiang/biaoqiang.model3.json",scale:1},display:{superSample:2,width:200,height:400,position:"right",hOffset:0,vOffset:-20},mobile:{show:!0,scale:.8,motion:!0},name:{canvas:"live2dcanvas",div:"live2d-widget"},react:{opacity:.7},dev:{border:!1},dialog:{enable:!1,script:null}}},function(t,e,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function t(e,r){function n(e,r){for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];if("__proto__"===n)continue;var a=e[n];null==a?e[n]=o:"object"===(void 0===a?"undefined":i(a))&&null!==a&&"object"===(void 0===o?"undefined":i(o))&&null!==o&&t(a,o)}}e=e||{};for(var o=arguments.length,a=0;a<o;){var s=arguments[a++];s&&n(e,s)}return e}},function(t,e,r){"use strict";(function(t,i,n){var o,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a){var u=function(){function t(){}return t.getVersion=function(){return b.ccall("csmGetVersion","number",[],[])},t.getLatestMocVersion=function(){return b.ccall("csmGetLatestMocVersion","number",[],[])},t.getMocVersion=function(t){return b.ccall("csmGetMocVersion","number",["number"],[t])},t.getSizeofModel=function(t){return b.ccall("csmGetSizeofModel","number",["number"],[t])},t.reviveMocInPlace=function(t,e){return b.ccall("csmReviveMocInPlace","number",["number","number"],[t,e])},t.initializeModelInPlace=function(t,e,r){return b.ccall("csmInitializeModelInPlace","number",["number","number","number"],[t,e,r])},t.getParameterCount=function(t){return b.ccall("csmGetParameterCount","number",["number"],[t])},t.getParameterIds=function(t){return b.ccall("csmGetParameterIds","number",["number"],[t])},t.getParameterMinimumValues=function(t){return b.ccall("csmGetParameterMinimumValues","number",["number"],[t])},t.getParameterMaximumValues=function(t){return b.ccall("csmGetParameterMaximumValues","number",["number"],[t])},t.getParameterDefaultValues=function(t){return b.ccall("csmGetParameterDefaultValues","number",["number"],[t])},t.getParameterValues=function(t){return b.ccall("csmGetParameterValues","number",["number"],[t])},t.getPartCount=function(t){return b.ccall("csmGetPartCount","number",["number"],[t])},t.getPartIds=function(t){return b.ccall("csmGetPartIds","number",["number"],[t])},t.getPartOpacities=function(t){return b.ccall("csmGetPartOpacities","number",["number"],[t])},t.getPartParentPartIndices=function(t){return b.ccall("csmGetPartParentPartIndices","number",["number"],[t])},t.getDrawableCount=function(t){return b.ccall("csmGetDrawableCount","number",["number"],[t])},t.getDrawableIds=function(t){return b.ccall("csmGetDrawableIds","number",["number"],[t])},t.getDrawableConstantFlags=function(t){return b.ccall("csmGetDrawableConstantFlags","number",["number"],[t])},t.getDrawableDynamicFlags=function(t){return b.ccall("csmGetDrawableDynamicFlags","number",["number"],[t])},t.getDrawableTextureIndices=function(t){return b.ccall("csmGetDrawableTextureIndices","number",["number"],[t])},t.getDrawableDrawOrders=function(t){return b.ccall("csmGetDrawableDrawOrders","number",["number"],[t])},t.getDrawableRenderOrders=function(t){return b.ccall("csmGetDrawableRenderOrders","number",["number"],[t])},t.getDrawableOpacities=function(t){return b.ccall("csmGetDrawableOpacities","number",["number"],[t])},t.getDrawableMaskCounts=function(t){return b.ccall("csmGetDrawableMaskCounts","number",["number"],[t])},t.getDrawableMasks=function(t){return b.ccall("csmGetDrawableMasks","number",["number"],[t])},t.getDrawableVertexCounts=function(t){return b.ccall("csmGetDrawableVertexCounts","number",["number"],[t])},t.getDrawableVertexPositions=function(t){return b.ccall("csmGetDrawableVertexPositions","number",["number"],[t])},t.getDrawableVertexUvs=function(t){return b.ccall("csmGetDrawableVertexUvs","number",["number"],[t])},t.getDrawableIndexCounts=function(t){return b.ccall("csmGetDrawableIndexCounts","number",["number"],[t])},t.getDrawableIndices=function(t){return b.ccall("csmGetDrawableIndices","number",["number"],[t])},t.mallocMoc=function(t){return b.ccall("csmMallocMoc","number",["number"],[t])},t.mallocModelAndInitialize=function(t){return b.ccall("csmMallocModelAndInitialize","number",["number"],[t])},t.malloc=function(t){return b.ccall("csmMalloc","number",["number"],[t])},t.setLogFunction=function(t){b.ccall("csmSetLogFunction",null,["number"],[t])},t.updateModel=function(t){b.ccall("csmUpdateModel",null,["number"],[t])},t.readCanvasInfo=function(t,e,r,i){b.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[t,e,r,i])},t.resetDrawableDynamicFlags=function(t){b.ccall("csmResetDrawableDynamicFlags",null,["number"],[t])},t.free=function(t){b.ccall("csmFree",null,["number"],[t])},t}(),l=function(){function t(){}return t.csmGetVersion=function(){return u.getVersion()},t.csmGetLatestMocVersion=function(){return u.getLatestMocVersion()},t.csmGetMocVersion=function(t){return u.getMocVersion(t._ptr)},t}();a.Version=l;var c=function(){function t(){}return t.csmSetLogFunction=function(e){t.logFunction=e;var r=b.addFunction(t.wrapLogFunction,"vi");u.setLogFunction(r)},t.csmGetLogFunction=function(){return t.logFunction},t.wrapLogFunction=function(e){var r=b.UTF8ToString(e);t.logFunction(r)},t}();a.Logging=c;var f=function(){function t(t){var e=u.mallocMoc(t.byteLength);e&&(new Uint8Array(b.HEAPU8.buffer,e,t.byteLength).set(new Uint8Array(t)),this._ptr=u.reviveMocInPlace(e,t.byteLength),this._ptr||u.free(e))}return t.fromArrayBuffer=function(e){if(!e)return null;var r=new t(e);return r._ptr?r:null},t.prototype._release=function(){u.free(this._ptr),this._ptr=0},t}();a.Moc=f;var h=function(){function t(t){this._ptr=u.mallocModelAndInitialize(t._ptr),this._ptr&&(this.parameters=new g(this._ptr),this.parts=new d(this._ptr),this.drawables=new m(this._ptr),this.canvasinfo=new p(this._ptr))}return t.fromMoc=function(e){var r=new t(e);return r._ptr?r:null},t.prototype.update=function(){u.updateModel(this._ptr)},t.prototype.release=function(){u.free(this._ptr),this._ptr=0},t}();a.Model=h;var p=function(t){if(t){var e=new Float32Array(2),r=e.length*e.BYTES_PER_ELEMENT,i=u.malloc(r),n=new Uint8Array(b.HEAPU8.buffer,i,r);n.set(new Uint8Array(e.buffer));var o=new Float32Array(2),a=o.length*o.BYTES_PER_ELEMENT,s=u.malloc(a),l=new Uint8Array(b.HEAPU8.buffer,s,a);l.set(new Uint8Array(o.buffer));var c=new Float32Array(1),f=c.length*c.BYTES_PER_ELEMENT,h=u.malloc(f),p=new Uint8Array(b.HEAPU8.buffer,h,f);p.set(new Uint8Array(c.buffer)),u.readCanvasInfo(t,n.byteOffset,l.byteOffset,p.byteOffset),e=new Float32Array(n.buffer,n.byteOffset,n.length),o=new Float32Array(l.buffer,l.byteOffset,l.length),c=new Float32Array(p.buffer,p.byteOffset,p.length),this.CanvasWidth=e[0],this.CanvasHeight=e[1],this.CanvasOriginX=o[0],this.CanvasOriginY=o[1],this.PixelsPerUnit=c[0],u.free(n.byteOffset),u.free(l.byteOffset),u.free(p.byteOffset)}};a.CanvasInfo=p;var g=function(t){var e=0;this.count=u.getParameterCount(t),e=u.getParameterCount(t),this.ids=new Array(e);for(var r=new Uint32Array(b.HEAPU32.buffer,u.getParameterIds(t),e),i=0;i<r.length;i++)this.ids[i]=b.UTF8ToString(r[i]);e=u.getParameterCount(t),this.minimumValues=new Float32Array(b.HEAPF32.buffer,u.getParameterMinimumValues(t),e),e=u.getParameterCount(t),this.maximumValues=new Float32Array(b.HEAPF32.buffer,u.getParameterMaximumValues(t),e),e=u.getParameterCount(t),this.defaultValues=new Float32Array(b.HEAPF32.buffer,u.getParameterDefaultValues(t),e),e=u.getParameterCount(t),this.values=new Float32Array(b.HEAPF32.buffer,u.getParameterValues(t),e)};a.Parameters=g;var d=function(t){var e=0;this.count=u.getPartCount(t),e=u.getPartCount(t),this.ids=new Array(e);for(var r=new Uint32Array(b.HEAPU32.buffer,u.getPartIds(t),e),i=0;i<r.length;i++)this.ids[i]=b.UTF8ToString(r[i]);e=u.getPartCount(t),this.opacities=new Float32Array(b.HEAPF32.buffer,u.getPartOpacities(t),e),e=u.getPartCount(t),this.parentIndices=new Int32Array(b.HEAP32.buffer,u.getPartParentPartIndices(t),e)};a.Parts=d;var m=function(){function t(t){this._modelPtr=t;var e=0,r=null;this.count=u.getDrawableCount(t),e=u.getDrawableCount(t),this.ids=new Array(e);for(var i=new Uint32Array(b.HEAPU32.buffer,u.getDrawableIds(t),e),n=0;n<i.length;n++)this.ids[n]=b.UTF8ToString(i[n]);e=u.getDrawableCount(t),this.constantFlags=new Uint8Array(b.HEAPU8.buffer,u.getDrawableConstantFlags(t),e),e=u.getDrawableCount(t),this.dynamicFlags=new Uint8Array(b.HEAPU8.buffer,u.getDrawableDynamicFlags(t),e),e=u.getDrawableCount(t),this.textureIndices=new Int32Array(b.HEAP32.buffer,u.getDrawableTextureIndices(t),e),e=u.getDrawableCount(t),this.drawOrders=new Int32Array(b.HEAP32.buffer,u.getDrawableDrawOrders(t),e),e=u.getDrawableCount(t),this.renderOrders=new Int32Array(b.HEAP32.buffer,u.getDrawableRenderOrders(t),e),e=u.getDrawableCount(t),this.opacities=new Float32Array(b.HEAPF32.buffer,u.getDrawableOpacities(t),e),e=u.getDrawableCount(t),this.maskCounts=new Int32Array(b.HEAP32.buffer,u.getDrawableMaskCounts(t),e),e=u.getDrawableCount(t),this.vertexCounts=new Int32Array(b.HEAP32.buffer,u.getDrawableVertexCounts(t),e),e=u.getDrawableCount(t),this.indexCounts=new Int32Array(b.HEAP32.buffer,u.getDrawableIndexCounts(t),e),e=u.getDrawableCount(t),r=new Int32Array(b.HEAP32.buffer,u.getDrawableMaskCounts(t),e),this.masks=new Array(e);var o=new Uint32Array(b.HEAPU32.buffer,u.getDrawableMasks(t),e);for(n=0;n<o.length;n++)this.masks[n]=new Int32Array(b.HEAP32.buffer,o[n],r[n]);e=u.getDrawableCount(t),r=new Int32Array(b.HEAP32.buffer,u.getDrawableVertexCounts(t),e),this.vertexPositions=new Array(e);var a=new Uint32Array(b.HEAPU32.buffer,u.getDrawableVertexPositions(t),e);for(n=0;n<a.length;n++)this.vertexPositions[n]=new Float32Array(b.HEAPF32.buffer,a[n],2*r[n]);e=u.getDrawableCount(t),r=new Int32Array(b.HEAP32.buffer,u.getDrawableVertexCounts(t),e),this.vertexUvs=new Array(e);var s=new Uint32Array(b.HEAPU32.buffer,u.getDrawableVertexUvs(t),e);for(n=0;n<s.length;n++)this.vertexUvs[n]=new Float32Array(b.HEAPF32.buffer,s[n],2*r[n]);e=u.getDrawableCount(t),r=new Int32Array(b.HEAP32.buffer,u.getDrawableIndexCounts(t),e),this.indices=new Array(e);var l=new Uint32Array(b.HEAPU32.buffer,u.getDrawableIndices(t),e);for(n=0;n<l.length;n++)this.indices[n]=new Uint16Array(b.HEAPU16.buffer,l[n],r[n])}return t.prototype.resetDynamicFlags=function(){u.resetDrawableDynamicFlags(this._modelPtr)},t}();a.Drawables=m;var _=function(){function t(){}return t.hasBlendAdditiveBit=function(t){return 1==(1&t)},t.hasBlendMultiplicativeBit=function(t){return 2==(2&t)},t.hasIsDoubleSidedBit=function(t){return 4==(4&t)},t.hasIsInvertedMaskBit=function(t){return 8==(8&t)},t.hasIsVisibleBit=function(t){return 1==(1&t)},t.hasVisibilityDidChangeBit=function(t){return 2==(2&t)},t.hasOpacityDidChangeBit=function(t){return 4==(4&t)},t.hasDrawOrderDidChangeBit=function(t){return 8==(8&t)},t.hasRenderOrderDidChangeBit=function(t){return 16==(16&t)},t.hasVertexPositionsDidChangeBit=function(t){return 32==(32&t)},t}();a.Utils=_;var y=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||t,function(t){var n;t=t||{},n=n||(void 0!==t?t:{});var o,a={};for(o in n)n.hasOwnProperty(o)&&(a[o]=n[o]);var u,l,c,f;l="object"==("undefined"==typeof window?"undefined":s(window)),c="function"==typeof importScripts,f="object"==("undefined"==typeof process?"undefined":s(process))&&"object"==s(process.versions)&&"string"==typeof process.versions.node&&!l&&!c,u=!l&&!f&&!c;var h,p,g,d,m="";f?(m=i+"/",h=function(t,e){var i=rt(t);return i?e?i:i.toString():(g=g||r(27),t=(d=d||r(28)).normalize(t),g.readFileSync(t,e?null:"utf8"))},p=function(t){return(t=h(t,!0)).buffer||(t=new Uint8Array(t)),M(t.buffer),t},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(t){throw t})),process.on("unhandledRejection",W),n.inspect=function(){return"[Emscripten Module object]"}):u?("undefined"!=typeof read&&(h=function(t){var e=rt(t);return e?tt(e):read(t)}),p=function(t){var e;return(e=rt(t))?e:"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(M("object"==s(e=read(t,"binary"))),e)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(l||c)&&(c?m=self.location.href:document.currentScript&&(m=document.currentScript.src),e&&(m=e),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",h=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){if(t=rt(t))return tt(t);throw e}},c&&(p=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}catch(e){if(t=rt(t))return t;throw e}}));var _,y=n.print||console.log.bind(console),b=n.printErr||console.warn.bind(console);for(o in a)a.hasOwnProperty(o)&&(n[o]=a[o]);function v(){return{exports:function(t,e,r){var i=new ArrayBuffer(8),n=new Int32Array(i),o=new Float32Array(i),a=new Float64Array(i);function s(t){return n[t]}function u(t,e){n[t]=e}function l(){return a[0]}function c(t){a[0]=t}function f(t){o[0]=t}function h(){return o[0]}var p,g,d,m,_,y,b,v,A,w,C,S,x,M,P,L,k,B,D,I,V,F,E,T,R,O,N,U=(p=e.buffer,g=new Uint8Array(p),function(t,e){var r,i;if("undefined"==typeof Buffer)for(r=atob(e),i=0;i<r.length;i++)g[t+i]=r.charCodeAt(i);else for(r=Buffer.from(e,"base64"),i=0;i<r.length;i++)g[t+i]=r[i]});return U(1024,"CgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAE1PQzMAW0NTTV0gW0VdJXM6ICVzCgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgAlcwoAICAAW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIENvcnJ1cHRlZCAgbW9jMyBmaWxlLgoAImFkZHJlc3MiIGlzIG51bGwuAFtDU01dIFtXXVJvdGF0aW9uRGVmb3JtZXI6IE5vdCBmb3VuZCB0cmFuc2Zvcm1lZCBEaXJlY3Rpb24uCgAlMDJYIABbQ1NNXSBbRV1jc21SZXZpdmVNb2NJblBsYWNlIGlzIGZhaWxlZC4gVGhlIENvcmUgdW5zdXBwb3J0IGxhdGVyIHRoYW4gbW9jMyB2ZXI6WyVkXS4gVGhpcyBtb2MzIHZlciBpcyBbJWRdLgoAImFkZHJlc3MiIGFsaWdubWVudCBpcyBpbnZhbGlkLgBbQ1NNXSBbRV1VcGRhdGVEZWZvcm1lckhpZXJhcmNoeSgpOiBVbmtub3duIERlZm9ybWVyIFR5cGUuCgBbQ1NNXSBbRV1jc21HZXRNb2NWZXJzaW9uIGlzIGZhaWxlZC4gQ29ycnVwdGVkIG1vYzMgZmlsZS4KACJzaXplIiBpcyBpbnZhbGlkLgBMaXZlMkQgQ3ViaXNtIFNESyBDb3JlIFZlcnNpb24gJWQuJWQuJWQAIm1vZGVsIiBpcyBpbnZhbGlkLgBjc21HZXRNb2NWZXJzaW9uAGNzbVJldml2ZU1vY0luUGxhY2UAY3NtUmVhZENhbnZhc0luZm8AIm91dFNpemVJblBpeGVscyIgaXMgbnVsbC4AIm91dE9yaWdpbkluUGl4ZWxzIiBpcyBudWxsLgAib3V0UGl4ZWxzUGVyVW5pdCIgaXMgbnVsbC4AY3NtR2V0U2l6ZW9mTW9kZWwAIm1vYyIgaXMgaW52YWxpZC4AY3NtSW5pdGlhbGl6ZU1vZGVsSW5QbGFjZQAic2l6ZSIgaXMgaW52YWxpZABjc21VcGRhdGVNb2RlbABjc21HZXRQYXJhbWV0ZXJDb3VudABjc21HZXRQYXJhbWV0ZXJJZHMAY3NtR2V0UGFyYW1ldGVyTWluaW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJNYXhpbXVtVmFsdWVzAGNzbUdldFBhcmFtZXRlckRlZmF1bHRWYWx1ZXMAY3NtR2V0UGFyYW1ldGVyVmFsdWVzAGNzbUdldFBhcnRDb3VudABjc21HZXRQYXJ0SWRzAGNzbUdldFBhcnRPcGFjaXRpZXMAY3NtR2V0UGFydFBhcmVudFBhcnRJbmRpY2VzAGNzbUdldERyYXdhYmxlQ291bnQAY3NtR2V0RHJhd2FibGVJZHMAY3NtR2V0RHJhd2FibGVDb25zdGFudEZsYWdzAGNzbUdldERyYXdhYmxlRHluYW1pY0ZsYWdzAGNzbUdldERyYXdhYmxlVGV4dHVyZUluZGljZXMAY3NtR2V0RHJhd2FibGVEcmF3T3JkZXJzAGNzbUdldERyYXdhYmxlUmVuZGVyT3JkZXJzAGNzbUdldERyYXdhYmxlT3BhY2l0aWVzAGNzbUdldERyYXdhYmxlTWFza0NvdW50cwBjc21HZXREcmF3YWJsZU1hc2tzAGNzbUdldERyYXdhYmxlVmVydGV4Q291bnRzAGNzbUdldERyYXdhYmxlVmVydGV4UG9zaXRpb25zAGNzbUdldERyYXdhYmxlVmVydGV4VXZzAGNzbUdldERyYXdhYmxlSW5kZXhDb3VudHMAY3NtR2V0RHJhd2FibGVJbmRpY2VzAGNzbVJlc2V0RHJhd2FibGVEeW5hbWljRmxhZ3M="),U(2572,"Cw=="),U(2611,"//////8="),U(2680,"GBgAAC0rICAgMFgweAAobnVsbCkAAAAAEQAKABEREQAAAAAFAAAAAAAACQAAAAAL"),U(2736,"EQAPChEREQMKBwABEwkLCwAACQYLAAALAAYRAAAAERER"),U(2785,"Cw=="),U(2794,"EQAKChEREQAKAAACAAkLAAAACQALAAAL"),U(2843,"DA=="),U(2855,"DAAAAAAMAAAAAAkMAAAAAAAMAAAM"),U(2901,"Dg=="),U(2913,"DQAAAAQNAAAAAAkOAAAAAAAOAAAO"),U(2959,"EA=="),U(2971,"DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"),U(3026,"EgAAABISEgAAAAAAAAk="),U(3075,"Cw=="),U(3087,"CgAAAAAKAAAAAAkLAAAAAAALAAAL"),U(3133,"DA=="),U(3145,"DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGLTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAu"),U(3232,"AwAAAAQAAAAEAAAABgAAAIP5ogBETm4A/CkVANFXJwDdNPUAYtvAADyZlQBBkEMAY1H+ALveqwC3YcUAOm4kANJNQgBJBuAACeouAByS0QDrHf4AKbEcAOg+pwD1NYIARLsuAJzphAC0JnAAQX5fANaROQBTgzkAnPQ5AItfhAAo+b0A+B87AN7/lwAPmAUAES/vAApaiwBtH20Az342AAnLJwBGT7cAnmY/AC3qXwC6J3UA5evHAD178QD3OQcAklKKAPtr6gAfsV8ACF2NADADVgB7/EYA8KtrACC8zwA29JoA46kdAF5hkQAIG+YAhZllAKAUXwCNQGgAgNj/ACdzTQAGBjEAylYVAMmocwB74mAAa4zAABnERwDNZ8MACejcAFmDKgCLdsQAphyWAESv3QAZV9EApT4FAAUH/wAzfj8AwjLoAJhP3gC7fTIAJj3DAB5r7wCf+F4ANR86AH/yygDxhx0AfJAhAGokfADVbvoAMC13ABU7QwC1FMYAwxmdAK3EwgAsTUEADABdAIZ9RgDjcS0Am8aaADNiAAC00nwAtKeXADdV1QDXPvYAoxAYAE12/ABknSoAcNerAGN8+AB6sFcAFxXnAMBJVgA71tkAp4Q4ACQjywDWincAWlQjAAAfuQDxChsAGc7fAJ8x/wBmHmoAmVdhAKz7RwB+f9gAImW3ADLoiQDmv2AA78TNAGw2CQBdP9QAFt7XAFg73gDem5IA0iIoACiG6ADiWE0AxsoyAAjjFgDgfcsAF8BQAPMdpwAY4FsALhM0AIMSYgCDSAEA9Y5bAK2wfwAe6fIASEpDABBn0wCq3dgArl9CAGphzgAKKKQA05m0AAam8gBcd38Ao8KDAGE8iACKc3gAr4xaAG/XvQAtpmMA9L/LAI2B7wAmwWcAVcpFAMrZNgAoqNIAwmGNABLJdwAEJhQAEkabAMRZxADIxUQATbKRAAAX8wDUQ60AKUnlAP3VEAAAvvwAHpTMAHDO7gATPvUA7PGAALPnwwDH+CgAkwWUAMFxPgAuCbMAC0XzAIgSnACrIHsALrWfAEeSwgB7Mi8ADFVtAHKnkABr5x8AMcuWAHkWSgBBeeIA9N+JAOiUlwDi5oQAmTGXAIjtawBfXzYAu/0OAEiatABnpGwAcXJCAI1dMgCfFbgAvOUJAI0xJQD3dDkAMAUcAA0MAQBLCGgALO5YAEeqkAB05wIAvdYkAPd9pgBuSHIAnxbvAI6UpgC0kfYA0VNRAM8K8gAgmDMA9Ut+ALJjaADdPl8AQF0DAIWJfwBVUikAN2TAAG3YEAAySDIAW0x1AE5x1ABFVG4ACwnBACr1aQAUZtUAJwedAF0EUAC0O9sA6nbFAIf5FwBJa30AHSe6AJZpKQDGzKwArRRUAJDiagCI2YkALHJQAASkvgB3B5QA8zBwAAD8JwDqcagAZsJJAGTgPQCX3YMAoz+XAEOU/QANhowAMUHeAJI5nQDdcIwAF7fnAAjfOwAVNysAXICgAFqAkwAQEZIAD+jYAGyArwDb/0sAOJAPAFkYdgBipRUAYcu7AMeJuQAQQL0A0vIEAEl1JwDrtvYA2yK7AAoUqgCJJi8AZIN2AAk7MwAOlBoAUTqqAB2jwgCv7a4AXCYSAG3CTQAtepwAwFaXAAM/gwAJ8PYAK0CMAG0xmQA5tAcADCAVANjDWwD1ksQAxq1LAE7KpQCnN80A5qk2AKuSlADdQmgAGWPeAHaM7wBoi1IA/Ns3AK6hqwDfFTEAAK6hAAz72gBkTWYA7QW3ACllMABXVr8AR/86AGr5uQB1vvMAKJPfAKuAMABmjPYABMsVAPoiBgDZ5B0APbOkAFcbjwA2zQkATkLpABO+pAAzI7UA8KoaAE9lqADSwaUACz8PAFt4zQAj+XYAe4sEAIkXcgDGplMAb27iAO/rAACbSlgAxNq3AKpmugB2z88A0QIdALHxLQCMmcEAw613AIZI2gD3XaAAxoD0AKzwLwDd7JoAP1y8ANDebQCQxx8AKtu2AKMlOgAAr5oArVOTALZXBAApLbQAS4B+ANoHpwB2qg4Ae1mhABYSKgDcty0A+uX9AInb/gCJvv0A5HZsAAap/AA+gHAAhW4VAP2H/wAoPgcAYWczACoYhgBNveoAs+evAI9tbgCVZzkAMb9bAITXSAAw3xYAxy1DACVhNQDJcM4AMMu4AL9s/QCkAKIABWzkAFrdoAAhb0cAYhLSALlchABwYUkAa1bgAJlSAQBQVTcAHtW3ADPxxAATbl8AXTDkAIUuqQAdssMAoTI2AAi3pADqsdQAFvchAI9p5AAn/3cADAOAAI1ALQBPzaAAIKWZALOi0wAvXQoAtPlCABHaywB9vtAAm9vBAKsXvQDKooEACGpcAC5VFwAnAFUAfxTwAOEHhgAUC2QAlkGNAIe+3gDa/SoAayW2AHuJNAAF8/4Aub+eAGhqTwBKKqgAT8RaAC34vADXWpgA9MeVAA1NjQAgOqYApFdfABQ/sQCAOJUAzCABAHHdhgDJ3rYAv2D1AE1lEQABB2sAjLCsALLA0ABRVUgAHvsOAJVywwCjBjsAwEA1AAbcewDgRcwATin6ANbKyADo80EAfGTeAJtk2ADZvjEApJfDAHdY1ABp48UA8NoTALo6PABGGEYAVXVfANK99QBuksYArC5dAA5E7QAcPkIAYcSHACn96QDn1vMAInzKAG+RNQAI4MUA/9eNAG5q4gCw/cYAkwjBAHxddABrrbIAzW6dAD5yewDGEWoA98+pAClz3wC1yboAtwBRAOKyDQB0uiQA5X1gAHTYigANFSwAgRgMAH5mlAABKRYAn3p2AP39vgBWRe8A2X42AOzZEwCLurkAxJf8ADGoJwDxbsMAlMU2ANioVgC0qLUAz8wOABKJLQBvVzQALFaJAJnO4wDWILkAa16qAD4qnAARX8wA/QtKAOH0+wCOO20A4oYsAOnUhAD8tKkA7+7RAC41yQAvOWEAOCFEABvZyACB/AoA+0pqAC8c2ABTtIQATpmMAFQizAAqVdwAwMbWAAsZlgAacLgAaZVkACZaYAA/Uu4AfxEPAPS1EQD8y/UANLwtADS87gDoXcwA3V5gAGeOmwCSM+8AyRe4AGFYmwDhV7wAUYPGANg+EADdcUgALRzdAK8YoQAhLEYAWfPXANl6mACeVMAAT4b6AFYG/ADlea4AiSI2ADitIgBnk9wAVeiqAIImOADK55sAUQ2kAJkzsQCp1w4AaQVIAGWy8AB/iKcAiEyXAPnRNgAhkrMAe4JKAJjPIQBAn9wA3EdVAOF0OgBn60IA/p3fAF7UXwB7Z6QAuqx6AFX2ogAriCMAQbpVAFluCAAhKoYAOUeDAInj5gDlntQASftAAP9W6QAcD8oAxVmKAJT6KwDTwcUAD8XPANtargBHxYYAhUNiACGGOwAseZQAEGGHACpMewCALBoAQ78SAIgmkAB4PIkAqMTkAOXbewDEOsIAJvTqAPdnigANkr8AZaMrAD2TsQC9fAsApFHcACfdYwBp4d0AmpQZAKgplQBozigACe20AESfIABOmMoAcIJjAH58IwAPuTIAp/WOABRW5wAh8QgAtZ0qAG9+TQClGVEAtfmrAILf1gCW3WEAFjYCAMQ6nwCDoqEAcu1tADmNegCCuKkAazJcAEYnWwAANO0A0gB3APz0VQABWU0A4HGA"),U(6019,"QPsh+T8AAAAALUR0PgAAAICYRvg8AAAAYFHMeDsAAACAgxvwOQAAAEAgJXo4AAAAgCKC4zYAAAAAHfNpNThj7T7aD0k/Xph7P9oPyT9pN6wxaCEiM7QPFDNoIaIz2w9JP9sPSb/kyxZA5MsWwAAAAAAAAACA2w9JQNsPScAAAIA/AADAPwAAAADcz9E1AAAAAADAFT8="),U(6168,"BQ=="),U(6180,"DA=="),U(6204,"DQAAAA4AAADIGQAAAAQ="),U(6228,"AQ=="),U(6243,"Cv////8="),U(6500,"9B0="),d={Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0,Math:Math},m=t,_=e.buffer,y=m.memory,b=r,v=new d.Int8Array(_),A=new d.Int16Array(_),w=new d.Int32Array(_),C=new d.Uint8Array(_),S=new d.Uint16Array(_),x=new d.Uint32Array(_),M=new d.Float32Array(_),P=new d.Float64Array(_),L=d.Math.imul,k=d.Math.fround,B=d.Math.abs,D=d.Math.clz32,I=d.Math.min,d.Math.max,V=d.Math.floor,d.Math.ceil,d.Math.sqrt,m.abort,d.NaN,F=d.Infinity,E=m.emscripten_memcpy_big,T=m.emscripten_resize_heap,R=m.fd_write,O=5251088,N=0,b[1]=function(t,e,r,i){t|=0,e|=0,r|=0,i|=0;var n,o=0,a=k(0),s=k(0),u=0,l=k(0),c=k(0),f=k(0),h=0,p=k(0),g=k(0),d=k(0),m=k(0),_=k(0),y=k(0),b=k(0),v=k(0),A=k(0),C=k(0),S=k(0),x=k(0),D=k(0),I=k(0),V=0,F=0,E=k(0),T=k(0),R=0,N=0,U=k(0),G=k(0),j=0,X=0,Y=0,H=0,W=0,Q=0,q=0,J=0,Z=0,K=k(0),$=k(0),tt=k(0),et=k(0),rt=k(0),it=k(0),nt=k(0),ot=0,at=0;if(O=n=O-32|0,1<=(0|i))for(W=(V=w[t+4>>2])+-1|0,Q=(N=w[t>>2])+-1|0,q=X=(h=w[t+20>>2])+(V<<3)|0,J=Y=((j=L(N,F=V+1|0))<<3)+h|0,Z=H=(V+j<<3)+h|0,U=k(0|N),G=k(0|V),ot=w[t+8>>2],t=0;;){f=M[4+(o=(R=t<<3)+e|0)>>2],s=k(f*U),p=M[o>>2],a=k(p*G),o=f>=k(1);t:if(f<k(0)^1&&!(o|p>=k(1)|p<k(0)))o=k(B(y=s))<k(2147483648)?~~s:-2147483648,c=k(y-k(0|o)),u=k(B(s=a))<k(2147483648)?~~a:-2147483648,l=k(s-k(0|u)),o=u+L(o,F)|0,s=ot?(a=k(k(1)-c),s=k(k(1)-l),u=(o<<3)+h|0,o=(o+F<<3)+h|0,M[r+R>>2]=k(k(k(a*k(s*M[u>>2]))+k(a*k(l*M[u+8>>2])))+k(c*k(s*M[o>>2])))+k(c*k(l*M[o+8>>2])),a=k(k(k(a*k(s*M[u+4>>2]))+k(a*k(l*M[u+12>>2])))+k(c*k(s*M[o+4>>2]))),k(c*k(l*M[o+12>>2]))):k(l+c)<=k(1)?(a=k(k(k(1)-l)-c),u=(o<<3)+h|0,o=(o+F<<3)+h|0,M[r+R>>2]=k(k(a*M[u>>2])+k(l*M[u+8>>2]))+k(c*M[o>>2]),a=k(k(a*M[u+4>>2])+k(l*M[u+12>>2])),k(c*M[o+4>>2])):(a=k(k(l+k(-1))+c),u=(o+F<<3)+h|0,s=k(k(1)-l),f=k(k(1)-c),o=(o<<3)+h|0,M[r+R>>2]=k(k(a*M[u+8>>2])+k(s*M[u>>2]))+k(f*M[o+8>>2]),a=k(k(a*M[u+12>>2])+k(s*M[u+4>>2])),k(f*M[o+12>>2]));else{if(at||(y=M[Z+4>>2],K=M[h+4>>2],g=k(y-K),$=M[q+4>>2],tt=M[J+4>>2],d=k($-tt),b=k(k(g-d)*k(.5)),et=M[H>>2],rt=M[h>>2],m=k(et-rt),it=M[X>>2],nt=M[Y>>2],_=k(it-nt),v=k(k(m-_)*k(.5)),d=k(k(d+g)*k(.5)),_=k(k(_+m)*k(.5)),at=1,g=k(k(k(k(k(K+$)+tt)+y)*k(.25))-k(g*k(.5))),m=k(k(k(k(k(rt+it)+nt)+et)*k(.25))-k(m*k(.5)))),!(f<k(3)^1|p>k(-2)^1|p<k(3)^1|f>k(-2)^1)){e:if(p<=k(0)){if(f<=k(0)){c=k(k(f+k(2))*k(.5)),l=k(k(p+k(2))*k(.5)),a=k(b+b),E=k(g-a),s=k(v+v),T=k(m-s),D=k(g-k(d+d)),A=k(D-a),I=k(m-k(_+_)),C=k(I-s),S=M[h+4>>2],x=M[h>>2];break e}if(o){a=k(b*k(3)),s=k(g-k(d+d)),D=k(a+s),A=k(v*k(3)),C=k(m-k(_+_)),I=k(A+C),c=k(k(f+k(-1))*k(.5)),l=k(k(p+k(2))*k(.5)),S=k(a+g),x=k(A+m),A=k(b+s),C=k(v+C),E=M[J+4>>2],T=M[Y>>2];break e}a=k(g-k(d+d)),o=Q,u=k(B(s))<k(2147483648)?~~s:-2147483648,c=k(0|(o=(0|u)==(0|N)?o:u)),l=k(c/U),A=k(k(l*b)+a),y=k(l*v),l=k(m-k(_+_)),C=k(y+l),f=k(k(0|(u=o+1|0))/U),D=k(k(f*b)+a),I=k(k(f*v)+l),l=k(k(p+k(2))*k(.5)),c=k(s-c),o=(L(o,F)<<3)+h|0,E=M[o+4>>2],T=M[o>>2],o=(L(u,F)<<3)+h|0,S=M[o+4>>2],x=M[o>>2]}else if(p>=k(1)){if(f<=k(0)){c=k(k(f+k(2))*k(.5)),l=k(k(p+k(-1))*k(.5)),a=k(b+b),A=k(k(d+g)-a),s=k(v+v),C=k(k(_+m)-s),S=k(k(d*k(3))+g),E=k(S-a),x=k(k(_*k(3))+m),T=k(x-s),D=M[q+4>>2],I=M[X>>2];break e}if(o){a=k(b*k(3)),D=k(a+k(d+g)),s=k(v*k(3)),I=k(s+k(_+m)),y=a,a=k(k(d*k(3))+g),S=k(y+a),y=s,s=k(k(_*k(3))+m),x=k(y+s),c=k(k(f+k(-1))*k(.5)),l=k(k(p+k(-1))*k(.5)),E=k(b+a),T=k(v+s),A=M[Z+4>>2],C=M[H>>2];break e}a=k(k(d*k(3))+g),o=Q,u=k(B(s))<k(2147483648)?~~s:-2147483648,c=k(0|(o=(0|u)==(0|N)?o:u)),l=k(c/U),E=k(k(l*b)+a),y=k(l*v),l=k(k(_*k(3))+m),T=k(y+l),f=k(k(0|(u=o+1|0))/U),S=k(k(f*b)+a),x=k(k(f*v)+l),l=k(k(p+k(-1))*k(.5)),c=k(s-c),o=(L(o,F)+V<<3)+h|0,A=M[o+4>>2],C=M[o>>2],o=(L(u,F)+V<<3)+h|0,D=M[o+4>>2],I=M[o>>2]}else f<=k(0)?(c=k(k(f+k(2))*k(.5)),o=W,u=k(B(s=a))<k(2147483648)?~~a:-2147483648,a=k(0|(o=(0|u)==(0|V)?o:u)),l=k(s-a),a=k(a/G),s=k(b+b),A=k(k(k(a*d)+g)-s),y=k(k(a*_)+m),a=k(v+v),C=k(y-a),f=k(k(0|(u=o+1|0))/G),E=k(k(k(f*d)+g)-s),T=k(k(k(f*_)+m)-a),D=M[4+(o=(o<<3)+h|0)>>2],I=M[o>>2],S=M[4+(o=(u<<3)+h|0)>>2],x=M[o>>2]):o?(y=s=k(b*k(3)),o=W,u=k(B(a))<k(2147483648)?~~a:-2147483648,l=k(0|(o=(0|u)==(0|V)?o:u)),c=k(l/G),D=k(y+k(k(c*d)+g)),p=k(v*k(3)),I=k(p+k(k(c*_)+m)),y=s,s=k(k(0|(u=o+1|0))/G),S=k(y+k(k(s*d)+g)),x=k(p+k(k(s*_)+m)),c=k(k(f+k(-1))*k(.5)),l=k(a-l),A=M[4+(o=(o+j<<3)+h|0)>>2],C=M[o>>2],E=M[4+(o=(u+j<<3)+h|0)>>2],T=M[o>>2]):(P[16+n>>3]=f,w[n>>2]=t,P[8+n>>3]=p,z(4,1104,n));if(k(l+c)<=k(1)){M[r+R>>2]=k(C+k(k(T-C)*l))+k(k(I-C)*c),a=k(A+k(k(E-A)*l)),s=k(k(D-A)*c);break t}a=k(k(1)-l),s=k(k(1)-c),M[r+R>>2]=k(x+k(k(I-x)*a))+k(k(T-x)*s),a=k(S+k(k(D-S)*a)),s=k(k(E-S)*s);break t}M[r+R>>2]=k(f*v)+k(k(p*_)+m),a=k(f*b),s=k(k(p*d)+g)}if(M[4+(r+R|0)>>2]=a+s,(0|i)==(0|(t=t+1|0)))break}O=32+n|0},b[2]=function(t,e,r){t|=0,e|=0;var i,n,o,a=0;if(n=w[140+(r|=0)>>2],o=w[r+136>>2],i=w[t+24>>2],-1==(0|(a=w[t+4>>2])))return w[(t=e<<2)+o>>2]=w[i+16>>2],void(w[t+n>>2]=1065353216);r=w[r+4>>2]+(a<<5)|0,a=w[i+20>>2],b[w[r+20>>2]](w[r+24>>2],a,a,w[i+12>>2]),e<<=2,t=w[t+4>>2]<<2,M[e+o>>2]=M[i+16>>2]*M[t+o>>2],w[e+n>>2]=w[t+n>>2]},b[3]=function(t,e,r,i){t|=0,e|=0,r|=0,i|=0;var n,o=k(0),a=k(0),u=k(0),l=k(0),c=0,h=k(0),p=0,g=k(0),d=k(0),m=k(0);if(c=w[t+28>>2],a=function(t){var e,r=k(0),i=0,n=0,o=0;O=e=O-16|0,f(t);t:if((i=2147483647&(n=s(0)))>>>0<=1061752794){if(r=k(1),i>>>0<964689920)break t;r=H(+t)}else if(i>>>0<=1081824209){if(o=+t,1075235812<=i>>>0){r=k(-H(((0|n)<0?3.141592653589793:-3.141592653589793)+o));break t}if((0|n)<=-1){r=Y(o+1.5707963267948966);break t}r=Y(1.5707963267948966-o)}else if(i>>>0<=1088565717){if(1085271520<=i>>>0){r=H(+t+((0|n)<0?6.283185307179586:-6.283185307179586));break t}if((0|n)<=-1){r=Y(-4.71238898038469-t);break t}r=Y(t-4.71238898038469)}else if(r=k(t-t),!(2139095040<=i>>>0))if((i=3&it(t,8+e|0))>>>0<=2){switch(i-1|0){default:r=H(P[8+e>>3]);break t;case 0:r=Y(-P[8+e>>3]);break t;case 1:}r=k(-H(P[8+e>>3]))}else r=Y(P[8+e>>3]);return O=16+e|0,r}(o=k(k(k(M[t>>2]+M[t+20>>2])*k(3.1415927410125732))/k(180))),u=M[t+8>>2],n=w[t+24>>2],o=function(t){var e,r=0,i=0,n=0;O=e=O-16|0,f(t);t:if((r=2147483647&(n=s(0)))>>>0<=1061752794){if(r>>>0<964689920)break t;t=Y(+t)}else if(r>>>0<=1081824209){if(i=+t,r>>>0<=1075235811){if((0|n)<=-1){t=k(-H(i+1.5707963267948966));break t}t=H(i+-1.5707963267948966);break t}t=Y(-(((0|n)<0?3.141592653589793:-3.141592653589793)+i))}else if(r>>>0<=1088565717){if(i=+t,r>>>0<=1085271519){if((0|n)<=-1){t=H(i+4.71238898038469);break t}t=k(-H(i+-4.71238898038469));break t}t=Y(((0|n)<0?6.283185307179586:-6.283185307179586)+i)}else if(2139095040<=r>>>0)t=k(t-t);else if((r=3&it(t,8+e|0))>>>0<=2){switch(r-1|0){default:t=Y(P[8+e>>3]);break t;case 0:t=H(P[8+e>>3]);break t;case 1:}t=Y(-P[8+e>>3])}else t=k(-H(P[8+e>>3]));return O=16+e|0,t}(o),0<(0|i))for(a=k(u*a),h=k(c?-1:1),d=k(a*h),l=k(n?-1:1),m=k(l*k(u*o)),a=k(l*a),u=k(k(u*k(-o))*h),o=M[t+16>>2],h=M[t+12>>2];c=(t=p<<3)+r|0,l=M[(t=t+e|0)>>2],g=M[t+4>>2],M[c+4>>2]=o+k(k(m*l)+k(d*g)),M[c>>2]=h+k(k(a*l)+k(u*g)),(0|(p=p+1|0))!=(0|i););},b[4]=function(t,e,r){t|=0,e|=0,r|=0;var i,n,o,a,s,u=0,l=k(0),c=k(0),f=0,h=k(0),p=k(0),g=k(0),d=k(0);if(O=i=O+-64|0,o=w[r+140>>2],a=w[r+136>>2],n=w[t+24>>2],-1!=(0|(s=w[t+4>>2]))){u=w[r+4>>2],f=w[n+12>>2],w[24+i>>2]=f,r=w[n+16>>2],w[28+i>>2]=r,w[16+i>>2]=0,p=1==w[8+(u=u+(s<<5)|0)>>2]?k(-10):k(-.10000000149011612),M[20+i>>2]=p,w[60+i>>2]=r,w[56+i>>2]=f,b[w[u+20>>2]](w[u+24>>2],56+i|0,48+i|0,1),h=k(1),f=9;t:{for(;;){if(r=f,g=k(h*k(0)),M[32+i>>2]=g+M[56+i>>2],d=k(p*h),M[36+i>>2]=d+M[60+i>>2],b[w[u+20>>2]](w[u+24>>2],32+i|0,40+i|0,1),c=k(M[44+i>>2]-M[52+i>>2]),M[44+i>>2]=c,l=k(M[40+i>>2]-M[48+i>>2]),M[40+i>>2]=l,c!=k(0)||l!=k(0)){r=w[44+i>>2],w[8+i>>2]=w[40+i>>2],w[12+i>>2]=r;break t}if(M[32+i>>2]=M[56+i>>2]-g,M[36+i>>2]=M[60+i>>2]-d,b[w[u+20>>2]](w[u+24>>2],32+i|0,40+i|0,1),c=k(M[40+i>>2]-M[48+i>>2]),M[40+i>>2]=c,l=k(M[44+i>>2]-M[52+i>>2]),(M[44+i>>2]=l)!=k(0)||c!=k(0)){M[12+i>>2]=-l,M[8+i>>2]=-c;break t}if(f=r+-1|0,h=k(h*k(.10000000149011612)),!r)break}z(3,1265,0)}l=function(t,e){var r=k(0);if((r=k(_t(M[t+4>>2],M[t>>2])-_t(M[e+4>>2],M[e>>2])))<k(-3.1415927410125732))for(;(r=k(r+k(6.2831854820251465)))<k(-3.1415927410125732););if(r>k(3.1415927410125732))for(;(r=k(r+k(-6.2831854820251465)))>k(3.1415927410125732););return r}(16+i|0,8+i|0),b[w[u+20>>2]](w[u+24>>2],24+i|0,24+i|0,1),w[n+12>>2]=w[24+i>>2],w[n+16>>2]=w[28+i>>2],M[n+20>>2]=M[n+20>>2]+k(k(l*k(-180))/k(3.1415927410125732)),e<<=2,t=w[t+4>>2]<<2,M[e+a>>2]=M[n+4>>2]*M[t+a>>2],l=k(M[n+8>>2]*M[t+o>>2]),M[e+o>>2]=l,M[n+8>>2]=l}else w[(t=e<<2)+a>>2]=w[n+4>>2],w[t+o>>2]=w[n+8>>2];O=64+i|0},b[5]=function(t){t|=0;var e,r,i=0,n=0,o=0,a=0,s=0,u=k(0),l=0,c=0,f=0,h=0,p=0,g=0,d=0,m=0,_=0,y=0,b=0;if(f=w[t+248>>2],r=w[t+204>>2],e=w[t+200>>2],!((0|(s=w[t+220>>2]))<1)){for(l=w[t+236>>2],a=w[t+216>>2],o=w[t+224>>2];M[(n=i<<2)+l>>2]=M[n+o>>2]*M[n+a>>2],(0|s)!=(0|(i=i+1|0)););if(!((0|s)<1))for(l=w[t+240>>2],a=w[t+216>>2],o=w[t+228>>2],i=0;M[(n=i<<2)+l>>2]=M[n+o>>2]*M[n+a>>2],(0|s)!=(0|(i=i+1|0)););}if(1<=(0|e))for(m=w[t+208>>2],s=l=0;;){if(w[f>>2]){h=(o=w[(n=l<<2)+w[t+212>>2]>>2])+s|0;t:{if((0|o)<=0)w[n+w[t+276>>2]>>2]=0;else{for(a=w[t+236>>2],u=k(0),i=s;u=k(u+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|h););if(M[n+w[t+276>>2]>>2]=u,!((0|o)<1)){for(a=w[t+240>>2],u=k(0),i=s;u=k(u+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|h););break t}}u=k(0)}if(i=n+w[t+268>>2]|0,u=k(u+k(.0010000000474974513)),a=k(B(u))<k(2147483648)?~~u:-2147483648,w[i>>2]=a,a=(i=w[12+((l<<4)+r|0)>>2])<<1,p=w[n+w[t+272>>2]>>2],(i=(0|i)<1)||W(p,0,(1<(0|a)?a:1)<<2),!(i|(0|o)<1))for(g=w[t+244>>2],_=w[t+216>>2],y=w[t+232>>2],n=s;;){for(c=(i=n<<2)+_|0,b=w[i+y>>2],o=i=0;M[g+(d=o<<2)>>2]=M[b+d>>2]*M[c>>2],(0|(o=o+1|0))<(0|a););for(;M[(c=(o=i<<2)+p|0)>>2]=M[o+g>>2]+M[c>>2],(0|(i=i+1|0))<(0|a););if(!((0|(n=n+1|0))<(0|h)))break}}if(f=f+4|0,s=w[(l<<2)+m>>2]+s|0,(0|e)==(0|(l=l+1|0)))break}},b[6]=function(t){t|=0;var e,r,i=0,n=0,o=0,a=0,s=0,u=0,l=k(0),c=0,f=0,h=0,p=0,g=0,d=0,m=0,_=0,y=0,b=0;if(f=w[t+172>>2],e=w[t- -64>>2],r=w[t+68>>2],1<=(0|(o=w[t+92>>2])))for(s=w[t+104>>2],u=w[t+88>>2],n=w[t+96>>2];M[(a=i<<2)+s>>2]=M[n+a>>2]*M[u+a>>2],(0|o)!=(0|(i=i+1|0)););if(1<=(0|e))for(d=w[t+80>>2],a=s=0;;){if(w[f>>2]){if(h=(i=w[w[t+84>>2]+(s<<2)>>2])+a|0,o=(0|i)<1)l=k(0);else for(u=w[t+104>>2],l=k(0),i=a;l=k(l+M[u+(i<<2)>>2]),(0|(i=i+1|0))<(0|h););if(i=L(s,24)+r|0,M[i+16>>2]=l,u=(n=w[i+12>>2])<<1,(n=(0|n)<1)||W(w[i+20>>2],0,(1<(0|u)?u:1)<<2),!(n|o))for(m=w[i+20>>2],p=w[t+108>>2],_=w[t+88>>2],y=w[t+100>>2],o=a;;){for(c=(i=o<<2)+_|0,b=w[i+y>>2],n=i=0;M[(g=n<<2)+p>>2]=M[b+g>>2]*M[c>>2],(0|(n=n+1|0))<(0|u););for(;M[(c=(n=i<<2)+m|0)>>2]=M[n+p>>2]+M[c>>2],(0|(i=i+1|0))<(0|u););if(!((0|(o=o+1|0))<(0|h)))break}}if(f=f+4|0,a=w[(s<<2)+d>>2]+a|0,(0|e)==(0|(s=s+1|0)))break}},b[7]=function(t){t|=0;var e,r=0,i=k(0),n=0,o=0,a=0,s=0,u=0,l=0,c=0;if(u=w[t+36>>2],e=w[t+4>>2],1<=(0|(o=w[t+24>>2])))for(l=w[t+32>>2],c=w[t+20>>2],n=w[t+28>>2];M[(a=r<<2)+l>>2]=M[n+a>>2]*M[a+c>>2],(0|o)!=(0|(r=r+1|0)););if(1<=(0|e))for(a=w[t+12>>2],n=0;;){if(w[u>>2]){if((0|(r=w[(o=s<<2)+w[t+16>>2]>>2]))<1)i=k(0);else for(l=r+n|0,c=w[t+32>>2],i=k(0),r=n;i=k(i+M[c+(r<<2)>>2]),(0|(r=r+1|0))<(0|l););r=o+w[t+44>>2]|0,i=k(i+k(.0010000000474974513)),k(B(i))<k(2147483648)?w[r>>2]=~~i:w[r>>2]=-2147483648}if(u=u+4|0,n=w[a+(s<<2)>>2]+n|0,(0|e)==(0|(s=s+1|0)))break}},b[8]=function(t){t|=0;var e,r,i=0,n=0,o=k(0),a=0,s=0,u=0,l=0,c=0,f=0,h=0;if(h=w[t+176>>2],r=w[t+72>>2],e=w[t+76>>2],!((0|(u=w[t+124>>2]))<1)){for(l=w[t+148>>2],a=w[t+120>>2],s=w[t+128>>2];M[(n=i<<2)+l>>2]=M[n+s>>2]*M[n+a>>2],(0|u)!=(0|(i=i+1|0)););if(!((0|u)<1)){for(l=w[t+152>>2],a=w[t+120>>2],s=w[t+132>>2],i=0;M[(n=i<<2)+l>>2]=M[n+s>>2]*M[n+a>>2],(0|u)!=(0|(i=i+1|0)););if(!((0|u)<1)){for(l=w[t+156>>2],a=w[t+120>>2],s=w[t+136>>2],i=0;M[(n=i<<2)+l>>2]=M[n+s>>2]*M[n+a>>2],(0|u)!=(0|(i=i+1|0)););if(!((0|u)<1)){for(l=w[t+160>>2],a=w[t+120>>2],s=w[t+140>>2],i=0;M[(n=i<<2)+l>>2]=M[n+s>>2]*M[n+a>>2],(0|u)!=(0|(i=i+1|0)););if(!((0|u)<1))for(l=w[t+164>>2],a=w[t+120>>2],s=w[t+144>>2],i=0;M[(n=i<<2)+l>>2]=M[n+s>>2]*M[n+a>>2],(0|u)!=(0|(i=i+1|0)););}}}}if(1<=(0|r))for(l=w[t+112>>2],s=0;;){if(w[h>>2]){t:{e:{r:{i:{if((0|(n=w[w[t+116>>2]+(c<<2)>>2]))<=0)w[4+((c<<5)+e|0)>>2]=0;else{for(f=n+s|0,a=w[t+148>>2],o=k(0),i=s;o=k(o+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|f););if(M[4+(u=(c<<5)+e|0)>>2]=o,!(n=(0|n)<1)){for(a=w[t+152>>2],o=k(0),i=s;o=k(o+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|f););if(M[u+20>>2]=o,n)break i;for(a=w[t+156>>2],o=k(0),i=s;o=k(o+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|f););if(M[u+12>>2]=o,n)break r;for(a=w[t+160>>2],o=k(0),i=s;o=k(o+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|f););if(M[u+16>>2]=o,n)break e;for(a=w[t+164>>2],o=k(0),i=s;o=k(o+M[a+(i<<2)>>2]),(0|(i=i+1|0))<(0|f););break t}}w[20+((c<<5)+e|0)>>2]=0}w[12+((c<<5)+e|0)>>2]=0}w[16+((c<<5)+e|0)>>2]=0}o=k(0)}M[8+((c<<5)+e|0)>>2]=o}if(h=h+4|0,s=w[l+(c<<2)>>2]+s|0,(0|r)==(0|(c=c+1|0)))break}},b[9]=function(t){t|=0;var e,r=0,i=0,n=0,o=0,a=0,s=k(0),u=0,l=0,c=0,f=0;if(e=w[t+340>>2],1<=(0|(n=w[t+360>>2])))for(u=w[t+368>>2],l=w[t+356>>2],i=w[t+364>>2];M[(o=r<<2)+u>>2]=M[i+o>>2]*M[o+l>>2],(0|n)!=(0|(r=r+1|0)););if(1<=(0|e))for(c=w[t+348>>2],f=w[t+344>>2],o=w[t+352>>2],i=0;;){if((0|(r=w[(n=a<<2)+o>>2]))<1)s=k(0);else for(u=r+i|0,l=w[t+368>>2],s=k(0),r=i;s=k(s+M[l+(r<<2)>>2]),(0|(r=r+1|0))<(0|u););if(M[20+(L(a,24)+f|0)>>2]=s,i=w[n+c>>2]+i|0,(0|e)==(0|(a=a+1|0)))break}},b[10]=function(t){var e=0,r=0,i=0,n=0,o=0,a=0,s=0;if(!(w[380+(t|=0)>>2]||(0|(e=w[t+200>>2]))<1))for(a=(r=w[t+204>>2])+(e<<4)|0,e=w[t+248>>2],n=w[t+272>>2];;){if(w[e>>2]&&(t=1,!((0|(i=w[r+12>>2]))<1)))for(i<<=1,s=w[n>>2];M[(o=(t<<2)+s|0)>>2]=-M[o>>2],(0|(t=t+2|0))<(0|i););if(n=n+4|0,e=e+4|0,!((r=r+16|0)>>>0<a>>>0))break}},b[11]=function(t,e,r){e|=0,r|=0;var i,n=0;return Z(i=w[20+(t|=0)>>2],e,n=r>>>0<(n=w[t+16>>2]-i|0)>>>0?r:n),w[t+20>>2]=n+w[t+20>>2],0|r},b[12]=function(t){return 0},b[13]=function(t,e,r){e|=0,r|=0;var i,n=0,o=0,a=0,s=0,u=0;for(O=i=O-32|0,n=w[28+(t|=0)>>2],w[16+i>>2]=n,a=w[t+20>>2],w[28+i>>2]=r,w[24+i>>2]=e,e=a-n|0,a=(w[20+i>>2]=e)+r|0,s=2,e=16+i|0;;){t:{if((o=(n=0)|R(w[t+60>>2],0|e,0|s,12+i|0))&&(w[1906]=o,n=-1),(0|(n=n?w[12+i>>2]=-1:w[12+i>>2]))!=(0|a)){if(-1<(0|n))break t;w[t+28>>2]=0,w[t+16>>2]=0,w[t+20>>2]=0,w[t>>2]=32|w[t>>2],2!=((t=0)|s)&&(t=r-w[e+4>>2]|0)}else e=w[t+44>>2],w[t+28>>2]=e,w[t+20>>2]=e,w[t+16>>2]=e+w[t+48>>2],t=r;return O=32+i|0,0|t}o=n-((u=(o=w[e+4>>2])>>>0<n>>>0)?o:0)|0,w[(e=u?e+8|0:e)>>2]=o+w[e>>2],w[e+4>>2]=w[e+4>>2]-o,a=a-n|0,s=s-u|0}},b[14]=function(t,e,r,i){return N=0},b[15]=function(t,e,r,i,n,o){t|=0,e=+e,r|=0,i|=0,n|=0,o|=0;var a,f,h,p=0,g=0,d=0,m=0,_=0,y=0,b=0,A=0,S=0,x=0,M=0,P=0,k=0,D=0,I=0,V=0,F=0;if(w[44+(O=a=O-560|0)>>2]=0,c(+e),p=0|s(1),h=4294967295<s(0)>>>0?0:1,f=(0|p)<-1||(0|p)<=-1&&h?(c(+(e=-e)),p=0|s(1),s(0),I=1,3184):2048&n?(I=1,3187):(I=1&n)?3190:3185,2146435072!=(2146435072&p))if(e=function t(e,r){var i,n,o=0;if(c(+e),o=0|s(1),i=0|s(0),2047!=(0|(o=(n=o)>>>20&2047))){if(!o)return o=r,r=0==e?0:(e=t(0x10000000000000000*e,r),w[r>>2]+-64|0),w[o>>2]=r,e;w[r>>2]=o+-1022,u(0,0|i),u(1,-2146435073&n|1071644672),e=+l()}return e}(e,44+a|0),0!=(e+=e)&&(w[44+a>>2]=w[44+a>>2]+-1),P=16+a|0,97!=(0|(V=32|o))){for(p=(0|i)<0,0!=e?(m=w[44+a>>2]+-28|0,w[44+a>>2]=m,e*=268435456):m=w[44+a>>2],y=p?6:i,d=x=(0|m)<0?48+a|0:336+a|0;p=e<4294967296&0<=e?~~e>>>0:0,d=(i=d)+4|0,0!=(e=1e9*(e-((w[i>>2]=p)>>>0))););if((0|m)<1)p=d,g=x;else for(g=x;;){if(M=(0|m)<29?m:29,!((p=d+-4|0)>>>0<g>>>0)){for(i=M,A=0;b=0,F=A,A=w[(S=p)>>2],_=31&i,_=32<=(63&i)>>>0?(m=A<<_,0):(m=(1<<_)-1&A>>>32-_,A<<_),b=m+b|0,b=(A=F+_|0)>>>0<_>>>0?b+1|0:b,F=S,S=Ct(A=St(_=A,b,1e9),N,1e9),w[F>>2]=_-S,g>>>0<=(p=p+-4|0)>>>0;);(i=A)&&(w[(g=g+-4|0)>>2]=i)}for(;g>>>0<(p=d)>>>0&&!w[(d=p+-4|0)>>2];);if(m=w[44+a>>2]-M|0,d=p,!(0<(0|(w[44+a>>2]=m))))break}if((0|m)<=-1)for(D=1+((y+25|0)/9|0)|0,M=102==(0|V);;){if(A=(0|m)<-9?9:0-m|0,p>>>0<=g>>>0)g=w[g>>2]?g:g+4|0;else{for(S=1e9>>>A,_=-1<<A^-1,m=0,d=g;i=w[d>>2],w[d>>2]=(i>>>A)+m,m=L(S,i&_),(d=d+4|0)>>>0<p>>>0;);g=w[g>>2]?g:g+4|0,m&&(w[p>>2]=m,p=p+4|0)}if(m=A+w[44+a>>2]|0,p=(0|D)<p-(i=M?x:g)>>2?i+(D<<2)|0:p,!((0|(w[44+a>>2]=m))<0))break}if(!(p>>>(d=0)<=g>>>0||(d=L(x-g>>2,9),m=10,(i=w[g>>2])>>>0<10)))for(;d=d+1|0,(m=L(m,10))>>>0<=i>>>0;);if((0|(i=(y-(102==(0|V)?0:d)|0)-(103==(0|V)&0!=(0|y))|0))<(L(p-x>>2,9)+-9|0)){if(b=(x+((_=(0|(S=i+9216|0))/9|0)<<2)|0)-4092|0,i=10,(0|(m=S-L(_,9)|0))<=7)for(;i=L(i,10),_=(0|m)<7,m=m+1|0,_;);if(D=b+4|0,((A=(M=w[b>>2])-L(i,S=(M>>>0)/(i>>>0)|0)|0)||(0|D)!=(0|p))&&(k=A>>>0<(_=i>>>1)>>>0?.5:(0|p)==(0|D)&&(0|_)==(0|A)?1:1.5,e=1&S?9007199254740994:9007199254740992,!I|45!=C[0|f]||(k=-k,e=-e),_=M-A|0,w[b>>2]=_,e+k!=e)){if(i=i+_|0,1e9<=(w[b>>2]=i)>>>0)for(;(b=b+-4|(w[b>>2]=0))>>>0<g>>>0&&(w[(g=g+-4|0)>>2]=0),i=w[b>>2]+1|0,999999999<(w[b>>2]=i)>>>0;);if(d=L(x-g>>2,9),m=10,!((i=w[g>>2])>>>0<10))for(;d=d+1|0,(m=L(m,10))>>>0<=i>>>0;);}p=(i=b+4|0)>>>0<p>>>0?i:p}t:{for(;;){if((M=p)>>>(S=0)<=g>>>0)break t;if(w[(p=M+-4|0)>>2])break}S=1}if(103==(0|V)){if(y=((i=(0|d)<(0|(p=y||1))&-5<(0|d))?-1^d:-1)+p|0,o=(i?-1:-2)+o|0,!(_=8&n)){if(p=9,S&&(_=w[M+-4>>2])&&!((_>>>(p=0))%(i=10)))for(;p=p+1|0,!((_>>>0)%((i=L(i,10))>>>0)););i=L(M-x>>2,9)+-9|0,y=102!=(32|o)?((_=0)|y)<(0|(i=0<(0|(i=(i+d|0)-p|0))?i:0))?y:i:((_=0)|y)<(0|(i=0<(0|(i=i-p|0))?i:0))?y:i}}else _=8&n;if(b=0!=(0|(m=y|_)),i=t,F=r,p=0<(0|d)?d:0,102!=(0|(A=32|o))){if((P-(p=J((p=d>>31)+d^p,0,P))|0)<=1)for(;v[0|(p=p+-1|0)]=48,(P-p|0)<2;);v[0|(D=p+-2|0)]=o,v[p+-1|0]=(0|d)<0?45:43,p=P-D|0}X(i,32,F,b=1+(p+(b+(y+I|0)|0)|0)|0,n),j(t,f,I),X(t,48,r,b,65536^n);t:{e:{r:{if(102==(0|A)){for(i=16+a|8,d=16+a|9,g=o=x>>>0<g>>>0?x:g;;){p=J(w[g>>2],0,d);i:if((0|o)==(0|g))(0|p)==(0|d)&&(v[24+a|0]=48,p=i);else{if(p>>>0<=16+a>>>0)break i;for(;v[0|(p=p+-1|0)]=48,16+a>>>0<p>>>0;);}if(j(t,p,d-p|0),!((g=g+4|0)>>>0<=x>>>0))break}if(m&&j(t,3219,1),(0|y)<1|M>>>0<=g>>>0)break r;for(;;){if(16+a>>>0<(p=J(w[g>>2],0,d))>>>0)for(;v[0|(p=p+-1|0)]=48,16+a>>>0<p>>>0;);if(j(t,p,(0|y)<9?y:9),p=y+-9|0,M>>>0<=(g=g+4|0)>>>0)break e;if(i=9<(0|y),y=p,!i)break}break e}i:if(!((0|y)<0))for(o=S?M:g+4|0,i=16+a|8,x=16+a|9,d=g;;){(0|x)==(0|(p=J(w[d>>2],0,x)))&&(v[24+a|0]=48,p=i);n:if((0|g)==(0|d))j(t,p,1),p=p+1|0,(0|y)<1&&!_||j(t,3219,1);else{if(p>>>0<=16+a>>>0)break n;for(;v[0|(p=p+-1|0)]=48,16+a>>>0<p>>>0;);}if(j(t,A=p,(0|(p=x-p|0))<(0|y)?p:y),y=y-p|0,o>>>0<=(d=d+4|0)>>>0)break i;if(!(-1<(0|y)))break}X(t,48,y+18|0,18,0),j(t,D,P-D|0);break t}p=y}X(t,48,p+9|0,9,0)}}else{if(_=(x=32&o)?f+9|0:f,!(11<i>>>0)&&(p=12-i|0)){for(k=8;k*=16,p=p+-1|0;);e=45!=C[0|_]?e+k-k:-(k+(-e-k))}for((0|P)==(0|(p=J((d=(p=w[44+a>>2])>>31)^p+d,0,P)))&&(v[15+a|0]=48,p=15+a|0),y=2|I,d=w[44+a>>2],v[0|(S=p+-2|0)]=o+15,v[p+-1|0]=(0|d)<0?45:43,p=8&n,g=16+a|0;o=g,A=x,d=B(e)<2147483648?~~e:-2147483648,v[0|g]=A|C[d+3168|0],1!=((g=o+1|0)-(16+a|0)|0)|(0==(e=16*(e-(0|d)))?!(p|0<(0|i)):0)||(v[o+1|0]=46,g=o+2|0),0!=e;);X(t,32,r,b=(o=!i|(0|i)<=((g-a|0)-18|0)?((P-(16+a|0)|0)-S|0)+g|0:2+((i+P|0)-S|0)|0)+y|0,n),j(t,_,y),X(t,48,r,b,65536^n),j(t,16+a|0,i=g-(16+a|0)|0),X(t,48,o-((p=i)+(i=P-S|0)|0)|0,0,0),j(t,S,i)}else X(t,32,r,b=I+3|0,-65537&n),j(t,f,I),i=o>>>5&1,j(t,e!=e?i?3211:3215:i?3203:3207,3);return X(t,32,r,b,8192^n),O=560+a|0,0|((0|b)<(0|r)?r:b)},b[16]=function(t,e){var r,i,n;t|=0,e=w[(r=e|=0)>>2]+15&-16,w[r>>2]=e+16,i=t,n=function(t,e,r,i){var n,o,a,s=0,c=0,f=0;O=n=O-32|0,s=(o=s=2147483647&i)-1006698496|0,(c=f=r)>>>0<0&&(s=s+1|0),a=c,c=s,s=o+-1140785152|0,f>>>0<0&&(s=s+1|0);t:if((0|s)==(0|c)&a>>>0<f>>>0|c>>>0<s>>>0){if(s=i<<4|r>>>28,r=r<<4|e>>>28,134217728==(0|(f=e&=268435455))&1<=t>>>0|134217728<e>>>0){s=s+1073741824|0,(t=r+1|0)>>>0<1&&(s=s+1|0),c=t;break t}if(s=s-(((c=r)>>>0<0)+-1073741824|0)|0,t|134217728^f)break t;(t=c+(1&c)|0)>>>0<c>>>0&&(s=s+1|0),c=t}else(!f&2147418112==(0|o)?!(t|e):2147418112==(0|o)&f>>>0<0|o>>>0<2147418112)?(s=2146435072,1140785151==((c=0)|o)&4294967295<f>>>0|1140785151<o>>>0||(f=o>>>16)>>>(s=0)<15249||(function(t,e,r,i,n,o){var a=0,s=0,u=0,l=0;e:if(64&o)e=31&(r=o+-64|0),e=32<=(63&r)>>>0?(r=0,n>>>e):(r=n>>>e,((1<<e)-1&n)<<32-e|i>>>e),n=i=0;else{if(!o)break e;s=n,u=i,a=31&(l=64-o|0),l=32<=(63&l)>>>0?(s=u<<a,0):(s=(1<<a)-1&u>>>32-a|s<<a,u<<a),u=e,e=31&(a=o),e=32<=(63&a)>>>0?(a=0,r>>>e):(a=r>>>e,((1<<e)-1&r)<<32-e|u>>>e),e|=l,r=a|s,a=i,i=31&o,i=32<=(63&o)>>>0?(s=0,n>>>i):(s=n>>>i,((1<<i)-1&n)<<32-i|a>>>i),n=s}w[t>>2]=e,w[t+4>>2]=r,w[t+8>>2]=i,w[t+12>>2]=n}(n,t,e,r,s=65535&i|65536,15361-f|0),function(t,e,r,i,n,o){var a=0,s=0,u=0,l=0;64&o?(i=e,e=31&(n=o+-64|0),32<=(63&n)>>>0?(n=i<<e,i=0):(n=(1<<e)-1&i>>>32-e|r<<e,i<<=e),r=e=0):o&&(a=i,i=31&(u=o),l=32<=(63&o)>>>0?(s=a<<i,0):(s=(1<<i)-1&a>>>32-i|n<<i,a<<i),i=r,a=e,n=31&(o=64-o|0),32<=(63&o)>>>0?(o=0,i>>>=n):(o=i>>>n,i=((1<<n)-1&i)<<32-n|a>>>n),i|=l,n=o|s,o=e,e=31&u,e=32<=(63&u)>>>0?(s=o<<e,0):(s=(1<<e)-1&o>>>32-e|r<<e,o<<e),r=s),w[t>>2]=e,w[t+4>>2]=r,w[t+8>>2]=i,w[t+12>>2]=n}(16+n|0,t,e,r,s,f+-15233|0),r=w[4+n>>2],t=w[8+n>>2],s=w[12+n>>2]<<4|t>>>28,c=t<<4|r>>>28,134217728==(0|(r=t=268435455&r))&1<=(e=w[n>>2]|0!=(w[16+n>>2]|w[24+n>>2])|0!=(w[20+n>>2]|w[28+n>>2]))>>>0|134217728<t>>>0?((t=c+1|0)>>>0<1&&(s=s+1|0),c=t):e|134217728^r||((t=c+(1&c)|0)>>>0<c>>>0&&(s=s+1|0),c=t))):(c=r<<4|e>>>28,s=524287&(s=i<<4|r>>>28)|2146959360);return O=32+n|0,u(0,0|c),u(1,-2147483648&i|s),+l()}(w[e>>2],w[e+4>>2],w[e+8>>2],w[e+12>>2]),P[i>>3]=n},{__wasm_call_ctors:function(){},csmGetVersion:function(){return 67108864},csmGetLatestMocVersion:function(){return 3},csmGetMocVersion:function(t,e){return e|=0,O=e=O-16|0,t=(t|=0)?nt(t)?(z(4,1533,0),0):C[t+4|0]:(w[e+4>>2]=1246,w[e>>2]=1671,z(4,1087,e),0),O=e+16|0,0|t},csmSetLogFunction:function(t){t|=0,w[1641]=t},csmReviveMocInPlace:function(t,e){var r;return e|=0,O=r=O-48|0,t=(t|=0)?(t+63&-64)==(0|t)?(e+63&-64)==(0|e)&&e?function(t){var e,r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0;if(w[24+(O=e=O-32|0)>>2]=0,w[16+e>>2]=4,function(t){var e;lt(16+(O=e=O-272|0)|0,1611,w[12+e>>2]=t),function(t){var e;w[(O=e=O-16|0)>>2]=t,function(t,e){var r;ut(t,1176,w[12+(O=r=O-16|0)>>2]=e,0,0),O=16+r|0}(w[670],e),O=16+e|0}(16+e|0),O=272+e|0}(16+e|(w[20+e>>2]=0)),nt(t))z(4,1183,0),t=0;else if(4<=(i=C[t+4|0])>>>0)w[4+e>>2]=i,w[e>>2]=3,z(4,1332,e),t=0;else{for(1!=(0|(o=!C[t+5|0]))&&(Q(t+4|0,1),G(t- -64|0,4,160),v[t+5|0]=0),r=t- -64|0,n=102,i=t+704|0;w[i>>2]=w[r>>2]+t,i=i+4|0,r=r+4|0,n=n+-1|0;);if(1!=(0|o)&&(i=C[t+4|0],G(w[t+704>>2],4,32),Q(w[t+708>>2],4),Q(w[t+708>>2]+4|0,4),Q(w[t+708>>2]+8|0,4),Q(w[t+708>>2]+12|0,4),Q(w[t+708>>2]+16|0,4),Q(w[t+708>>2]+20|0,1),G(w[t+720>>2],4,w[w[t+704>>2]>>2]),G(w[t+724>>2],4,w[w[t+704>>2]>>2]),G(w[t+728>>2],4,w[w[t+704>>2]>>2]),G(w[t+732>>2],4,w[w[t+704>>2]>>2]),G(w[t+736>>2],4,w[w[t+704>>2]>>2]),G(w[t+740>>2],4,w[w[t+704>>2]>>2]),G(w[t+752>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+756>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+760>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+764>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+768>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+772>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+776>>2],4,w[w[t+704>>2]+4>>2]),G(w[t+780>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+784>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+788>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+792>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+796>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+800>>2],4,w[w[t+704>>2]+8>>2]),G(w[t+804>>2],4,w[w[t+704>>2]+12>>2]),G(w[t+808>>2],4,w[w[t+704>>2]+12>>2]),G(w[t+812>>2],4,w[w[t+704>>2]+12>>2]),G(w[t+816>>2],4,w[w[t+704>>2]+12>>2]),G(w[t+840>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+844>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+848>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+852>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+856>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+860>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+864>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+868>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+872>>2],1,w[w[t+704>>2]+16>>2]),G(w[t+876>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+880>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+884>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+888>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+892>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+896>>2],4,w[w[t+704>>2]+16>>2]),G(w[t+908>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+912>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+916>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+920>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+924>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+928>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+932>>2],4,w[w[t+704>>2]+20>>2]),G(w[t+936>>2],4,w[w[t+704>>2]+24>>2]),G(w[t+940>>2],4,w[w[t+704>>2]+28>>2]),G(w[t+944>>2],4,w[w[t+704>>2]+28>>2]),G(w[t+948>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+952>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+956>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+960>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+964>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+968>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+972>>2],4,w[w[t+704>>2]+32>>2]),G(w[t+976>>2],4,w[w[t+704>>2]+36>>2]),G(w[t+980>>2],4,w[w[t+704>>2]+36>>2]),G(w[t+984>>2],4,w[w[t+704>>2]+36>>2]),G(w[t+988>>2],4,w[w[t+704>>2]+40>>2]),G(w[t+992>>2],4,w[w[t+704>>2]+44>>2]),G(w[t+996>>2],4,w[w[t+704>>2]+48>>2]),G(w[t+1e3>>2],4,w[w[t+704>>2]+48>>2]),G(w[t+1004>>2],4,w[w[t+704>>2]+52>>2]),G(w[t+1008>>2],4,w[w[t+704>>2]+52>>2]),G(w[t+1012>>2],4,w[w[t+704>>2]+56>>2]),G(w[t+1016>>2],4,w[w[t+704>>2]+60>>2]),G(w[t+1020>>2],2,w[w[t+704>>2]+64>>2]),G(w[t+1024>>2],4,w[w[t+704>>2]+68>>2]),G(w[t+1028>>2],4,w[w[t+704>>2]+72>>2]),G(w[t+1032>>2],4,w[w[t+704>>2]+72>>2]),G(w[t+1036>>2],4,w[w[t+704>>2]+72>>2]),G(w[t+1040>>2],4,w[w[t+704>>2]+72>>2]),G(w[t+1044>>2],4,w[w[t+704>>2]+72>>2]),G(w[t+1048>>2],4,w[w[t+704>>2]+76>>2]),G(w[t+1052>>2],4,w[w[t+704>>2]+76>>2]),G(w[t+1056>>2],4,w[w[t+704>>2]+76>>2]),G(w[t+1068>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1072>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1076>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1080>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1084>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1088>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1092>>2],4,w[w[t+704>>2]+80>>2]),G(w[t+1096>>2],4,w[w[t+704>>2]+84>>2]),G(w[t+1100>>2],2,w[w[t+704>>2]+84>>2]),G(w[t+1104>>2],4,w[w[t+704>>2]+88>>2]),i>>>0<2||G(w[t+1108>>2],4,w[w[t+704>>2]+8>>2])),w[1643]=5,w[1642]=6,w[1644]=7,w[1645]=8,w[1646]=9,w[1647]=10,r=w[t+704>>2],1<=w[r>>2])for(i=0;w[w[t+712>>2]+(i<<2)>>2]=w[t+716>>2]+(i<<6),i=i+1|0,r=w[t+704>>2],(0|i)<w[r>>2];);if(1<=w[r+4>>2])for(i=0;w[w[t+744>>2]+(i<<2)>>2]=w[t+748>>2]+(i<<6),i=i+1|0,r=w[t+704>>2],(0|i)<w[r+4>>2];);if(1<=w[r+16>>2])for(i=0;w[(r=i<<2)+w[t+820>>2]>>2]=w[t+836>>2]+(i<<6),w[r+w[t+824>>2]>>2]=w[t+1016>>2]+(w[r+w[t+880>>2]>>2]<<2),w[r+w[t+828>>2]>>2]=w[t+1020>>2]+(w[r+w[t+884>>2]>>2]<<1),w[r+w[t+832>>2]>>2]=w[t+1024>>2]+(w[r+w[t+892>>2]>>2]<<2),i=i+1|0,r=w[t+704>>2],(0|i)<w[r+16>>2];);if(1<=w[r+20>>2])for(i=0;w[w[t+900>>2]+(i<<2)>>2]=w[t+904>>2]+(i<<6),i=i+1|0,r=w[t+704>>2],(0|i)<w[r+20>>2];);if(1<=w[r+80>>2])for(i=0;w[w[t+1060>>2]+(i<<2)>>2]=w[t+1064>>2]+(i<<6),i=i+1|0,r=w[t+704>>2],(0|i)<w[r+80>>2];);if(!(1&v[w[t+708>>2]+20|0]||(0|(o=w[r+16>>2]))<1)){for(s=w[t+888>>2],u=w[t+884>>2],a=w[t+1020>>2],i=0;;){if(1<(0|(n=w[(r=i<<2)+s>>2])))for(l=n+-1|0,c=a+(w[r+u>>2]<<1)|0,r=0;f=S[(n=(r<<1)+c|0)>>1],A[n>>1]=S[n+4>>1],A[n+4>>1]=f,(0|(r=r+3|0))<(0|l););if((0|o)==(0|(i=i+1|0)))break}for(i=w[t+876>>2],s=w[t+880>>2],u=w[t+1016>>2],n=0;;){if(1<=(0|(a=w[(r=n<<2)+i>>2])))for(a=(r=u+(w[r+s>>2]<<2)|0)+(a<<3)|0,r=r+4|0;M[r>>2]=k(1)-M[r>>2],(r=r+8|0)>>>0<a>>>0;);if((0|o)==(0|(n=n+1|0)))break}}}return O=32+e|0,t}(t):(w[20+r>>2]=1592,w[16+r>>2]=1688,z(4,1087,16+r|0),0):(w[36+r>>2]=1441,w[32+r>>2]=1688,z(4,1087,32+r|0),0):(w[4+r>>2]=1246,w[r>>2]=1688,z(4,1087,r),0),O=48+r|0,0|t},csmReadCanvasInfo:function(t,e,r,i){var n;e|=0,r|=0,i|=0,O=n=O+-64|0,(t|=0)?e?r?i?(t=w[w[t>>2]+708>>2],w[e>>2]=w[t+12>>2],w[e+4>>2]=w[t+16>>2],w[r>>2]=w[t+4>>2],w[r+4>>2]=w[t+8>>2],w[i>>2]=w[t>>2]):(w[52+n>>2]=1782,w[48+n>>2]=1708,z(4,1087,48+n|0)):(w[36+n>>2]=1753,w[32+n>>2]=1708,z(4,1087,32+n|0)):(w[20+n>>2]=1726,w[16+n>>2]=1708,z(4,1087,16+n|0)):(w[4+n>>2]=1651,w[n>>2]=1708,z(4,1087,n)),O=64+n|0},csmGetSizeofModel:pt,csmInitializeModelInPlace:ht,csmUpdateModel:function(t){var e;O=e=O-16|0,(t|=0)?ct(t):(w[4+e>>2]=1651,w[e>>2]=1890,z(4,1087,e)),O=16+e|0},csmGetParameterCount:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[t+292>>2]:(w[4+e>>2]=1651,w[e>>2]=1905,z(4,1087,e),-1),O=16+e|0,0|t},csmGetParameterIds:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+900>>2]:(w[4+e>>2]=1651,w[e>>2]=1926,z(4,1087,e),0),O=16+e|0,0|t},csmGetParameterMinimumValues:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+912>>2]:(w[4+e>>2]=1651,w[e>>2]=1945,z(4,1087,e),0),O=16+e|0,0|t},csmGetParameterMaximumValues:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+908>>2]:(w[4+e>>2]=1651,w[e>>2]=1974,z(4,1087,e),0),O=16+e|0,0|t},csmGetParameterDefaultValues:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+916>>2]:(w[4+e>>2]=1651,w[e>>2]=2003,z(4,1087,e),0),O=16+e|0,0|t},csmGetParameterValues:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[t+300>>2]:(w[4+e>>2]=1651,w[e>>2]=2032,z(4,1087,e),0),O=16+e|0,0|t},csmGetPartCount:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[t+4>>2]:(w[4+e>>2]=1651,w[e>>2]=2054,z(4,1087,e),-1),O=16+e|0,0|t},csmGetPartIds:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+712>>2]:(w[4+e>>2]=1651,w[e>>2]=2070,z(4,1087,e),0),O=16+e|0,0|t},csmGetPartOpacities:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[t+52>>2]:(w[4+e>>2]=1651,w[e>>2]=2084,z(4,1087,e),0),O=16+e|0,0|t},csmGetPartParentPartIndices:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+740>>2]:(w[4+e>>2]=1651,w[e>>2]=2104,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableCount:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[t+200>>2]:(w[4+e>>2]=1651,w[e>>2]=2132,z(4,1087,e),-1),O=16+e|0,0|t},csmGetDrawableIds:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+820>>2]:(w[4+e>>2]=1651,w[e>>2]=2152,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableConstantFlags:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+872>>2]:(w[4+e>>2]=1651,w[e>>2]=2170,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableDynamicFlags:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[t+260>>2]:(w[4+e>>2]=1651,w[e>>2]=2198,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableTextureIndices:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+868>>2]:(w[4+e>>2]=1651,w[e>>2]=2225,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableDrawOrders:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[t+268>>2]:(w[4+e>>2]=1651,w[e>>2]=2254,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableRenderOrders:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[t+264>>2]:(w[4+e>>2]=1651,w[e>>2]=2279,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableOpacities:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[t+276>>2]:(w[4+e>>2]=1651,w[e>>2]=2306,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableMaskCounts:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+896>>2]:(w[4+e>>2]=1651,w[e>>2]=2330,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableMasks:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+832>>2]:(w[4+e>>2]=1651,w[e>>2]=2355,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableVertexCounts:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+876>>2]:(w[4+e>>2]=1651,w[e>>2]=2375,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableVertexPositions:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[t+272>>2]:(w[4+e>>2]=1651,w[e>>2]=2402,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableVertexUvs:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+824>>2]:(w[4+e>>2]=1651,w[e>>2]=2432,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableIndexCounts:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+888>>2]:(w[4+e>>2]=1651,w[e>>2]=2456,z(4,1087,e),0),O=16+e|0,0|t},csmGetDrawableIndices:function(t){var e;return O=e=O-16|0,t=(t|=0)?w[w[t>>2]+828>>2]:(w[4+e>>2]=1651,w[e>>2]=2482,z(4,1087,e),0),O=16+e|0,0|t},csmResetDrawableDynamicFlags:function(t){var e;O=e=O-16|0,(t|=0)?w[t+256>>2]=1:(w[4+e>>2]=1651,w[e>>2]=2504,z(4,1087,e)),O=16+e|0},csmMallocMoc:function(t){var e;return dt(12+(O=e=O-16|0)|0,64,t|=0),O=16+e|0,w[12+e>>2]},csmMallocModelAndInitialize:function(t){var e,r=0,i=0;return O=e=O-16|0,(t|=0)&&(dt(12+e|0,16,i=pt(t))||(r=ht(t,w[12+e>>2],i))||(mt(w[12+e>>2]),r=0)),O=16+e|0,0|r},csmMalloc:function(t){return 0|et(t|=0)},csmFree:function(t){mt(t|=0)},stackSave:function(){return 0|O},stackAlloc:function(t){return 0|(O=O-(t|=0)&-16)},stackRestore:function(t){O=t|=0},__growWasmMemory:function(t){return 0|function(t){t|=0;var e=0|Mt(),r=e+t|0;if(e<r&&r<65536){var i=new ArrayBuffer(L(r,65536)),n=new d.Int8Array(i);n.set(v),v=n,v=new d.Int8Array(i),A=new d.Int16Array(i),w=new d.Int32Array(i),C=new d.Uint8Array(i),S=new d.Uint16Array(i),x=new d.Uint32Array(i),M=new d.Float32Array(i),P=new d.Float64Array(i),_=i,y.buffer=i}return e}(0|(t|=0))},dynCall_vi:function(t,e){e|=0,b[t|=0](e)}};function G(t,e,r){var i=0,n=0,o=0;if(r)for(;;){if(r=r+-1|0,t>>>0<(i=(n=t+e|0)-1|0)>>>0)for(;o=C[0|t],v[0|t]=C[0|i],v[0|i]=o,(t=t+1|0)>>>0<(i=i+-1|0)>>>0;);if(t=n,!r)break}}function z(t,e,r){var i;O=i=O-272|0,x[1640]>t>>>0||(t=w[1641])&&(lt(16+i|0,e,w[12+i>>2]=r),b[t](16+i|0)),O=272+i|0}function j(t,e,r){32&C[0|t]||function(t,e,r){var i=0,n=0,o=0;t:{if(!(i=w[r+16>>2])){if(function(t){var e=0;return e=C[t+74|0],v[t+74|0]=e+-1|e,8&(e=w[t>>2])?(w[t>>2]=32|e,1):(w[t+4>>2]=0,w[t+8>>2]=0,e=w[t+44>>2],w[t+28>>2]=e,w[t+20>>2]=e,w[t+16>>2]=e+w[t+48>>2],0)}(r))break t;i=w[r+16>>2]}if(i-(o=w[r+20>>2])>>>0<e>>>0)return b[w[r+36>>2]](r,t,e);e:if(!(v[r+75|0]<0)){for(i=e;;){if(!(n=i))break e;if(10==C[(i=n+-1|0)+t|0])break}if(b[w[r+36>>2]](r,t,n)>>>0<n>>>0)break t;e=e-n|0,t=t+n|0,o=w[r+20>>2]}Z(o,t,e),w[r+20>>2]=w[r+20>>2]+e}}(e,r,t)}function X(t,e,r,i,n){var o,a=0,s=0;if(O=o=O-256|0,!(73728&n|(0|r)<=(0|i))){if(W(o,e,(a=(n=r-i|0)>>>0<256)?n:256),e=t,s=o,!a){for(r=r-i|0;j(t,o,256),255<(n=n+-256|0)>>>0;);n=255&r}j(e,s,n)}O=256+o|0}function Y(t){var e,r;return k((e=t*t)*e*(r=e*t)*(2718311493989822e-21*e-.00019839334836096632)+(r*(.008333329385889463*e-.16666666641626524)+t))}function H(t){var e;return k(-.499999997251031*(t*=t)+1+.04166662332373906*(e=t*t)+t*e*(2439044879627741e-20*t-.001388676377460993))}function W(t,e,r){var i=0,n=0,o=0,a=0;if(r&&(v[(i=t+r|0)-1|0]=e,v[0|t]=e,!(r>>>0<3||(v[i+-2|0]=e,v[t+1|0]=e,v[i+-3|0]=e,v[t+2|0]=e,r>>>0<7||(v[i+-4|0]=e,v[t+3|0]=e,r>>>0<9||(n=(i=0-t&3)+t|0,e=L(255&e,16843009),w[n>>2]=e,w[(i=(r=r-i&-4)+n|0)-4>>2]=e,r>>>0<9||(w[n+8>>2]=e,w[n+4>>2]=e,w[i+-8>>2]=e,w[i+-12>>2]=e,r>>>0<25||(w[n+24>>2]=e,w[n+20>>2]=e,w[n+16>>2]=e,w[n+12>>2]=e,w[i+-16>>2]=e,w[i+-20>>2]=e,w[i+-24>>2]=e,w[i+-28>>2]=e,(r=r-(a=4&n|24)|0)>>>0<32))))))))for(o=i=e,e=n+a|0;w[e+24>>2]=o,w[e+28>>2]=i,w[e+16>>2]=o,w[e+20>>2]=i,w[e+8>>2]=o,w[e+12>>2]=i,w[e>>2]=o,w[e+4>>2]=i,e=e+32|0,31<(r=r+-32|0)>>>0;);return t}function Q(t,e){var r=0;if(t>>>0<(e=(t+e|0)-1|0)>>>0)for(;r=C[0|t],v[0|t]=C[0|e],v[0|e]=r,(t=t+1|0)>>>0<(e=e+-1|0)>>>0;);}function q(t){var e;return(0|(t=(e=w[2052])+t|0))<=-1?(w[1906]=48,-1):t>>>0<=Mt()<<16>>>0||T(0|t)?(w[2052]=t,e):(w[1906]=48,-1)}function J(t,e,r){var i=0,n=0,o=0;if(1==(0|e)&t>>>0<0|e>>>0<1)i=t;else for(;n=Ct(i=St(t,e,10),o=n=N,10),v[0|(r=r+-1|0)]=t-n|48,n=9==(0|e)&4294967295<t>>>0|9<e>>>0,t=i,e=o,n;);if(i)for(;t=(i>>>0)/10|0,v[0|(r=r+-1|0)]=i-L(t,10)|48,e=9<i>>>0,i=t,e;);return r}function Z(t,e,r){var i,n=0;if(8192<=r>>>0)E(0|t,0|e,0|r);else{i=t+r|0;t:if(3&(t^e))if(i>>>0<4)r=t;else if((n=i-4|0)>>>0<t>>>0)r=t;else for(r=t;v[0|r]=C[0|e],v[r+1|0]=C[e+1|0],v[r+2|0]=C[e+2|0],v[r+3|0]=C[e+3|0],e=e+4|0,(r=r+4|0)>>>0<=n>>>0;);else{e:if((0|r)<1)r=t;else if(3&t)for(r=t;;){if(v[0|r]=C[0|e],e=e+1|0,i>>>0<=(r=r+1|0)>>>0)break e;if(!(3&r))break}else r=t;if(!((t=-4&i)>>>0<64||(n=t+-64|0)>>>0<r>>>0))for(;w[r>>2]=w[e>>2],w[r+4>>2]=w[e+4>>2],w[r+8>>2]=w[e+8>>2],w[r+12>>2]=w[e+12>>2],w[r+16>>2]=w[e+16>>2],w[r+20>>2]=w[e+20>>2],w[r+24>>2]=w[e+24>>2],w[r+28>>2]=w[e+28>>2],w[r+32>>2]=w[e+32>>2],w[r+36>>2]=w[e+36>>2],w[r+40>>2]=w[e+40>>2],w[r+44>>2]=w[e+44>>2],w[r+48>>2]=w[e+48>>2],w[r+52>>2]=w[e+52>>2],w[r+56>>2]=w[e+56>>2],w[r+60>>2]=w[e+60>>2],e=e- -64|0,(r=r- -64|0)>>>0<=n>>>0;);if(t>>>0<=r>>>0)break t;for(;w[r>>2]=w[e>>2],e=e+4|0,(r=r+4|0)>>>0<t>>>0;);}if(r>>>0<i>>>0)for(;v[0|r]=C[0|e],e=e+1|0,(0|i)!=(0|(r=r+1|0)););}}function K(t){return t+-48>>>0<10}function $(t,e){t:if(1024<=(0|e)){if(t*=898846567431158e293,(0|e)<2047){e=e+-1023|0;break t}t*=898846567431158e293,e=((0|e)<3069?e:3069)+-2046|0}else-1023<(0|e)||(t*=22250738585072014e-324,e=-2045<(0|e)?e+1022|0:(t*=22250738585072014e-324,(-3066<(0|e)?e:-3066)+2044|0));return u(0,0),u(1,e+1023<<20),t*l()}function tt(t,e,r,i,n,o,a){var s,u,l,c=0,f=0,h=0,p=0,g=0,d=0,m=0,_=0,y=0,S=0,x=0,M=0;w[76+(O=s=O-80|0)>>2]=e,l=55+s|0,u=56+s|0,e=0;t:{e:for(;;){(0|y)<0||(y=(2147483647-y|0)<(0|e)?(w[1906]=61,-1):e+y|0);r:{i:{n:{o:{a:{s:{u:{l:{c:{f:{h:{p:{g:{d:{if(p=w[76+s>>2],h=C[0|(e=p)]){for(;;){m:{_:{y:if(c=255&h){if(37!=(0|c))break _;for(h=e;;){if(37!=C[e+1|0])break y;if(c=e+2|0,w[76+s>>2]=c,h=h+1|0,f=C[e+2|0],e=c,37!=(0|f))break}}else h=e;if(e=h-p|0,t&&j(t,p,e),e)continue e;S=-1,h=1,g=!K(v[w[76+(c=s)>>2]+1|0]),e=w[76+s>>2],g|36!=C[e+2|0]||(S=v[e+1|0]+-48|0,x=1,h=3),e=h+e|0,w[c+76>>2]=e;y:if(31<(f=(d=v[(h=0)|e])+-32|0)>>>0)c=e;else if(c=e,75913&(f=1<<f))for(;;){if(c=e+1|0,w[76+s>>2]=c,h|=f,31<(f=(d=v[e+1|0])+-32|0)>>>0)break y;if(e=c,!(75913&(f=1<<f)))break}y:if(42!=(0|d)){if((0|(m=st(76+s|0)))<0)break d;e=w[76+s>>2]}else{if(g=s,K(v[c+1|0])&&(e=w[76+s>>2],36==C[e+2|0]))w[((v[e+1|0]<<2)+n|0)-192>>2]=10,m=w[((v[e+1|0]<<3)+i|0)-384>>2],x=1,e=e+3|0;else{if(x)break d;m=x=0,t&&(e=w[r>>2],w[r>>2]=e+4,m=w[e>>2]),e=w[76+s>>2]+1|0}if(w[g+76>>2]=e,-1<(0|m))break y;m=0-m|0,h|=8192}f=-1;y:if(46==C[0|e])if(42!=C[e+1|0])w[76+s>>2]=e+1,f=st(76+s|0),e=w[76+s>>2];else{if(K(v[e+2|0])&&(e=w[76+s>>2],36==C[e+3|0])){w[((v[e+2|0]<<2)+n|0)-192>>2]=10,f=w[((v[e+2|0]<<3)+i|0)-384>>2],e=e+4|0,w[76+s>>2]=e;break y}if(x)break d;f=t?(e=w[r>>2],w[r>>2]=e+4,w[e>>2]):0,e=w[76+s>>2]+2|0,w[76+s>>2]=e}for(c=0;;){if(M=c,_=-1,57<v[0|e]+-65>>>0)break t;if(d=e+1|0,w[76+s>>2]=d,c=v[0|e],e=d,!((c=C[2639+(c+L(M,58)|0)|0])+-1>>>0<8))break}if(!c)break t;y:{b:{v:{if(19==(0|c)){if((0|S)<=-1)break v;break t}if((0|S)<0)break b;w[(S<<2)+n>>2]=c,c=w[4+(e=(S<<3)+i|0)>>2],w[64+s>>2]=w[e>>2],w[68+s>>2]=c}if(e=0,!t)continue e;break y}if(!t)break r;at(s+64|0,c,r,a),d=w[76+s>>2]}if(g=-65537&h,h=8192&h?g:h,S=2684,c=u,e=v[d+-1|(_=0)],(d=(e=M&&3==(15&e)?-33&e:e)+-88|0)>>>0<=32)break m;y:{b:{v:{A:{if(6<(g=e+-65|0)>>>0){if(83!=(0|e))break i;if(!f)break A;c=w[64+s>>2];break b}switch(g-1|0){case 1:break v;case 0:case 2:break i;default:break g}}X(t,32,m,e=0,h);break y}w[12+s>>2]=0,w[8+s>>2]=w[64+s>>2],w[64+s>>2]=8+s,f=-1,c=8+s|0}e=0;b:{for(;;){if(!(p=w[c>>2]))break b;if((g=(0|(p=ot(4+s|0,p)))<0)|f-e>>>0<p>>>0)break;if(c=c+4|0,!((e=e+p|0)>>>0<f>>>0))break b}if(_=-1,g)break t}if(X(t,32,m,e,h),e)for(f=0,c=w[64+s>>2];;){if(!(p=w[c>>2]))break y;if((0|e)<(0|(f=(p=ot(4+s|0,p))+f|0)))break y;if(j(t,4+s|0,p),c=c+4|0,!(f>>>0<e>>>0))break}else e=0}X(t,32,m,e,8192^h),e=(0|e)<(0|m)?m:e;continue e}c=e+1|0,w[76+s>>2]=c,h=C[e+1|0],e=c;continue}break}switch(d-1|0){case 21:break s;case 23:break l;case 22:break c;case 11:case 16:break f;case 10:break h;case 26:break p;case 8:case 12:case 13:case 14:break g;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 9:case 15:case 17:case 18:case 19:case 20:case 24:case 25:case 27:case 29:case 30:break i;case 28:break a;default:break u}}if(_=y,t)break t;if(!x)break r;for(e=1;;){if(t=w[(e<<2)+n>>2]){if(at((e<<3)+i|0,t,r,a),10!=(0|(e=e+(_=1)|0)))continue;break t}break}if(_=1,10<=e>>>0)break t;for(;;){if(w[(e<<2)+n>>2])break d;if(t=8<e>>>0,e=e+1|0,t)break}break t}_=-1;break t}e=0|b[o](t,P[64+s>>3],m,f,h,e);continue}c=(e=yt(p=(e=w[64+s>>2])||2694,f))||f+p|0,h=g,f=e?e-p|0:f;break i}v[55+s|0]=w[64+s>>2],f=1,p=l,h=g;break i}if(e=g=w[68+s>>2],p=w[64+s>>2],(0|e)<-1||(0|e)<=-1&&!(4294967295<p>>>0)){e=0-(e+(0<p>>>0)|0)|0,p=0-p|0,w[64+s>>2]=p,w[68+s>>2]=e,_=1,S=2684;break o}if(2048&h){_=1,S=2685;break o}S=(_=1&h)?2686:2684;break o}if(p=vt(w[64+s>>2],w[68+s>>2],u),!(8&h))break n;f=(0|(e=u-p|0))<(0|f)?f:e+1|0;break n}f=8<f>>>0?f:8,h|=8,e=120}if(p=bt(w[64+s>>2],w[68+s>>2],u,32&e),!(8&h)|!(w[64+s>>2]|w[68+s>>2]))break n;S=2684+(e>>>4)|0,_=2;break n}if(7<(c=255&M)>>>(e=0))continue;switch(c-1|0){default:case 0:w[w[64+s>>2]>>2]=y;continue;case 1:c=w[64+s>>2],w[c>>2]=y,w[c+4>>2]=y>>31;continue;case 2:A[w[64+s>>2]>>1]=y;continue;case 3:v[w[64+s>>2]]=y;continue;case 5:w[w[64+s>>2]>>2]=y;continue;case 4:continue;case 6:}c=w[64+s>>2],w[c>>2]=y,w[c+4>>2]=y>>31;continue}p=w[64+s>>2],e=w[68+s>>2],S=2684}p=J(p,e,u)}h=-1<(0|f)?-65537&h:h,f=!!((g=e=w[68+s>>2])|(d=w[64+s>>2]))|f?(0|(e=!(g|d)+(u-p|0)|0))<(0|f)?f:e:(p=u,0)}X(t,32,e=(0|m)<(0|(c=(f=(0|f)<(0|(g=c-p|0))?g:f)+_|0))?c:m,c,h),j(t,S,_),X(t,48,e,c,65536^h),X(t,48,f,g,0),j(t,p,g),X(t,32,e,c,8192^h);continue}break}_=0}return O=80+s|0,_}function et(t){var e,r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0,h=0,p=0;O=e=O-16|0;t:{e:{r:{i:{n:{o:{a:{s:{u:{l:{c:{if(t>>>0<=244){if(3&(r=(a=w[1923])>>>(t=(s=t>>>0<11?16:t+11&-8)>>>3))){t=(r=w[7740+(o=(i=t+(1&(-1^r))|0)<<3)>>2])+8|0,(0|(n=w[r+8>>2]))!=(0|(o=o+7732|0))?(w[n+12>>2]=o,w[o+8>>2]=n):(h=7692,p=xt(i)&a,w[h>>2]=p),i<<=3,w[r+4>>2]=3|i,w[4+(r=r+i|0)>>2]=1|w[r+4>>2];break t}if(s>>>0<=(l=w[1925])>>>0)break c;if(r){i=r=(t=(0-(t=(0-(i=2<<t)|i)&r<<t)&t)-1|0)>>>12&16,i|=r=(t>>>=r)>>>5&8,i|=r=(t>>>=r)>>>2&4,r=w[7740+(n=(i=((i|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)|0)<<3)>>2],(0|(t=w[r+8>>2]))!=(0|(n=n+7732|0))?(w[t+12>>2]=n,w[n+8>>2]=t):(a=xt(i)&a,w[1923]=a),t=r+8|0,w[r+4>>2]=3|s,o=(i<<=3)-s|0,w[4+(u=r+s|0)>>2]=1|o,w[r+i>>2]=o,l&&(r=7732+((i=l>>>3)<<3)|0,n=w[1928],i=(i=1<<i)&a?w[r+8>>2]:(w[1923]=i|a,r),w[r+8>>2]=n,w[i+12>>2]=n,w[n+12>>2]=r,w[n+8>>2]=i),w[1928]=u,w[1925]=o;break t}if(!(f=w[1924]))break c;for(i=r=(t=(f&0-f)-1|0)>>>12&16,i|=r=(t>>>=r)>>>5&8,i|=r=(t>>>=r)>>>2&4,r=w[7996+(((i|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)<<2)>>2],n=(-8&w[r+4>>2])-s|0,i=r;t=(t=w[i+16>>2])||w[i+20>>2];)n=(i=(o=(-8&w[t+4>>2])-s|0)>>>0<n>>>0)?o:n,r=i?t:r,i=t;if(c=w[r+24>>2],(0|(o=w[r+12>>2]))!=(0|r)){t=w[r+8>>2],w[t+12>>2]=o,w[o+8>>2]=t;break e}if(!(t=w[(i=r+20|0)>>2])){if(!(t=w[r+16>>2]))break l;i=r+16|0}for(;u=i,(t=w[(i=(o=t)+20|0)>>2])||(i=o+16|0,t=w[o+16>>2]););w[u>>2]=0;break e}if(s=-1,!(4294967231<t>>>0)&&(s=-8&(r=t+11|0),l=w[1924])){i=0-s|0,a=0,(r>>>=8)&&(a=31,16777215<s>>>0||(a=28+((t=((a=(r<<=n=r+1048320>>>16&8)<<(t=r+520192>>>16&4))<<(r=a+245760>>>16&2)>>>15)-(r|t|n)|0)<<1|s>>>t+21&1)|0));f:{h:{if(n=w[7996+(a<<2)>>2])for(r=s<<(31==(0|a)?0:25-(a>>>1)|0),t=0;;){if(!(i>>>0<=(u=(-8&w[n+4>>2])-s|0)>>>0||(o=n,i=u))){i=0,t=n;break h}if(u=w[n+20>>2],n=w[16+((r>>>29&4)+n|0)>>2],t=u?(0|u)==(0|n)?t:u:t,r<<=0!=(0|n),!n)break}else t=0;if(!(t|o)){if(!(t=(0-(t=2<<a)|t)&l))break c;n=r=(t=(t&0-t)-1|0)>>>12&16,n|=r=(t>>>=r)>>>5&8,n|=r=(t>>>=r)>>>2&4,t=w[7996+(((n|=r=(t>>>=r)>>>1&2)|(r=(t>>>=r)>>>1&1))+(t>>>r)<<2)>>2]}if(!t)break f}for(;i=(r=(n=(-8&w[t+4>>2])-s|0)>>>0<i>>>0)?n:i,o=r?t:o,t=(r=w[t+16>>2])||w[t+20>>2];);}if(!(!o|i>>>0>=w[1925]-s>>>0)){if(u=w[o+24>>2],(0|o)!=(0|(r=w[o+12>>2]))){t=w[o+8>>2],w[t+12>>2]=r,w[r+8>>2]=t;break r}if(!(t=w[(n=o+20|0)>>2])){if(!(t=w[o+16>>2]))break u;n=o+16|0}for(;a=n,(t=w[(n=(r=t)+20|0)>>2])||(n=r+16|0,t=w[r+16>>2]););w[a>>2]=0;break r}}}if(s>>>0<=(r=w[1925])>>>0){t=w[1928],16<=(i=r-s|0)>>>0?(w[1925]=i,n=t+s|0,w[1928]=n,w[n+4>>2]=1|i,w[t+r>>2]=i,w[t+4>>2]=3|s):(w[1928]=0,w[1925]=0,w[t+4>>2]=3|r,w[4+(r=t+r|0)>>2]=1|w[r+4>>2]),t=t+8|0;break t}if(s>>>0<(n=w[1926])>>>0){r=n-s|0,w[1926]=r,i=(t=w[1929])+s|0,w[1929]=i,w[i+4>>2]=1|r,w[t+4>>2]=3|s,t=t+8|0;break t}if((i=(a=(i=o=s+47|(t=0))+(r=w[2041]?w[2043]:(w[2044]=-1,w[2045]=-1,w[2042]=4096,w[2043]=4096,w[2041]=12+e&-16^1431655768,w[2046]=0,w[2034]=0,4096))|0)&(u=0-r|0))>>>0<=s>>>0)break t;if((r=w[2033])&&(c=(l=w[2031])+i|0)>>>0<=l>>>0|r>>>0<c>>>0)break t;if(4&C[8136])break o;c:{f:{if(r=w[1929])for(t=8140;;){if((l=w[t>>2])+w[t+4>>2]>>>0>r>>>0&&l>>>0<=r>>>0)break f;if(!(t=w[t+8>>2]))break}if(-1==(0|(r=q(0))))break a;if(a=i,(n=(t=w[2042])+-1|0)&r&&(a=(i-r|0)+(r+n&0-t)|0),a>>>0<=s>>>0|2147483646<a>>>0)break a;if((t=w[2033])&&(u=(n=w[2031])+a|0)>>>0<=n>>>0|t>>>0<u>>>0)break a;if((0|r)!=(0|(t=q(a))))break c;break n}if(2147483646<(a=u&a-n)>>>0)break a;if((0|(r=q(a)))==(w[t>>2]+w[t+4>>2]|0))break s;t=r}if(!(s+48>>>0<=a>>>0|2147483646<a>>>0|-1==(0|(r=t)))){if(2147483646<(t=(t=w[2043])+(o-a|0)&0-t)>>>0)break n;if(-1!=(0|q(t))){a=t+a|0;break n}q(0-a|0);break a}if(-1!=(0|r))break n;break a}o=0;break e}r=0;break r}if(-1!=(0|r))break n}w[2034]=4|w[2034]}if(2147483646<i>>>0)break i;if(r=q(i),(t=q(0))>>>0<=r>>>0|-1==(0|r)|-1==(0|t))break i;if((a=t-r|0)>>>0<=s+40>>>0)break i}t=w[2031]+a|0,(w[2031]=t)>>>0>x[2032]&&(w[2032]=t);n:{o:{a:{if(i=w[1929]){for(t=8140;;){if(((n=w[t>>2])+(o=w[t+4>>2])|0)==(0|r))break a;if(!(t=w[t+8>>2]))break}break o}for((t=w[1927])>>>0<=r>>>0&&t||(w[1927]=r),t=0,w[2036]=a,w[2035]=r,w[1931]=-1,w[1932]=w[2041],w[2038]=0;n=7732+(i=t<<3)|0,w[i+7740>>2]=n,w[i+7744>>2]=n,32!=(0|(t=t+1|0)););n=(t=a+-40|0)-(i=r+8&7?-8-r&7:0)|0,w[1926]=n,i=r+i|0,w[1929]=i,w[i+4>>2]=1|n,w[4+(t+r|0)>>2]=40,w[1930]=w[2045];break n}if(!(8&C[t+12|0]|r>>>0<=i>>>0|i>>>0<n>>>0)){w[t+4>>2]=o+a,r=(t=i+8&7?-8-i&7:0)+i|0,w[1929]=r,t=(n=w[1926]+a|0)-t|0,w[1926]=t,w[r+4>>2]=1|t,w[4+(i+n|0)>>2]=40,w[1930]=w[2045];break n}}r>>>0<(o=w[1927])>>>0&&(w[1927]=r,o=0),n=r+a|0,t=8140;o:{a:{s:{u:{l:{c:{for(;(0|n)!=w[t>>2];)if(!(t=w[t+8>>2]))break c;if(!(8&C[t+12|0]))break l}for(t=8140;;){if((n=w[t>>2])>>>0<=i>>>0&&i>>>0<(o=n+w[t+4>>2]|0)>>>0)break u;t=w[t+8>>2]}}if(w[t>>2]=r,w[t+4>>2]=w[t+4>>2]+a,w[4+(c=(r+8&7?-8-r&7:0)+r|0)>>2]=3|s,t=((r=n+(n+8&7?-8-n&7:0)|0)-c|0)-s|0,u=s+c|0,(0|r)==(0|i)){w[1929]=u,t=w[1926]+t|0,w[1926]=t,w[u+4>>2]=1|t;break a}if(w[1928]==(0|r)){w[1928]=u,t=w[1925]+t|0,w[1925]=t,w[u+4>>2]=1|t,w[t+u>>2]=t;break a}if(1==(3&(i=w[r+4>>2]))){f=-8&i;l:if(i>>>0<=255){if(o=i>>>3,i=w[r+8>>2],(0|(n=w[r+12>>2]))==(0|i)){h=7692,p=w[1923]&xt(o),w[h>>2]=p;break l}w[i+12>>2]=n,w[n+8>>2]=i}else{if(l=w[r+24>>2],(0|(a=w[r+12>>2]))==(0|r))if((s=w[(n=r+20|0)>>2])||(s=w[(n=r+16|0)>>2])){for(;i=n,(s=w[(n=(a=s)+20|0)>>2])||(n=a+16|0,s=w[a+16>>2]););w[i>>2]=0}else a=0;else i=w[r+8>>2],w[i+12>>2]=a,w[a+8>>2]=i;if(l){i=w[r+28>>2];c:{if(w[(n=7996+(i<<2)|0)>>2]==(0|r)){if(w[n>>2]=a)break c;h=7696,p=w[1924]&xt(i),w[h>>2]=p;break l}if(!(w[l+(w[l+16>>2]==(0|r)?16:20)>>2]=a))break l}w[a+24>>2]=l,(i=w[r+16>>2])&&(w[a+16>>2]=i,w[i+24>>2]=a),(i=w[r+20>>2])&&(w[a+20>>2]=i,w[i+24>>2]=a)}}r=r+f|0,t=t+f|0}if(w[r+4>>2]=-2&w[r+4>>2],w[u+4>>2]=1|t,(w[t+u>>2]=t)>>>0<=255){t=7732+((r=t>>>3)<<3)|0,r=(i=w[1923])&(r=1<<r)?w[t+8>>2]:(w[1923]=r|i,t),w[t+8>>2]=u,w[r+12>>2]=u,w[u+12>>2]=t,w[u+8>>2]=r;break a}if(r=0,(n=t>>>8)&&(r=31,16777215<t>>>0||(r=28+((r=((s=(n<<=o=n+1048320>>>16&8)<<(r=n+520192>>>16&4))<<(n=s+245760>>>16&2)>>>15)-(n|r|o)|0)<<1|t>>>r+21&1)|0)),w[(i=u)+28>>2]=r,w[u+16>>2]=0,i=7996+(r<<2)|(w[u+20>>2]=0),(n=w[1924])&(o=1<<r)){for(n=t<<(31==(0|r)?0:25-(r>>>1)|0),r=w[i>>2];;){if((-8&w[(i=r)+4>>2])==(0|t))break s;if(r=n>>>29,n<<=1,!(r=w[16+(o=(4&r)+i|0)>>2]))break}w[o+16>>2]=u}else w[1924]=n|o,w[i>>2]=u;w[u+24>>2]=i,w[u+12>>2]=u,w[u+8>>2]=u;break a}for(u=(t=a+-40|0)-(n=r+8&7?-8-r&7:0)|0,w[1926]=u,n=r+n|0,w[1929]=n,w[n+4>>2]=1|u,w[4+(t+r|0)>>2]=40,w[1930]=w[2045],w[(n=(t=(o+(o+-39&7?39-o&7:0)|0)-47|0)>>>0<i+16>>>0?i:t)+4>>2]=27,t=w[2038],w[n+16>>2]=w[2037],w[n+20>>2]=t,t=w[2036],w[n+8>>2]=w[2035],w[n+12>>2]=t,w[2037]=n+8,w[2036]=a,w[2035]=r,t=n+24|(w[2038]=0);w[t+4>>2]=7,r=t+8|0,t=t+4|0,r>>>0<o>>>0;);if((0|i)==(0|n))break n;if(w[n+4>>2]=-2&w[n+4>>2],o=n-i|0,w[i+4>>2]=1|o,(w[n>>2]=o)>>>0<=255){t=7732+((r=o>>>3)<<3)|0,r=(n=w[1923])&(r=1<<r)?w[t+8>>2]:(w[1923]=r|n,t),w[t+8>>2]=i,w[r+12>>2]=i,w[i+12>>2]=t,w[i+8>>2]=r;break n}if(w[i+16>>2]=0,t=w[i+20>>2]=0,(n=o>>>8)&&(t=31,16777215<o>>>0||(t=28+((t=((u=(n<<=a=n+1048320>>>16&8)<<(t=n+520192>>>16&4))<<(n=u+245760>>>16&2)>>>15)-(n|t|a)|0)<<1|o>>>t+21&1)|0)),r=7996+((w[(r=i)+28>>2]=t)<<2)|0,(n=w[1924])&(a=1<<t)){for(t=o<<(31==(0|t)?0:25-(t>>>1)|0),r=w[r>>2];;){if((0|o)==(-8&w[(n=r)+4>>2]))break o;if(r=t>>>29,t<<=1,!(r=w[16+(a=n+(4&r)|0)>>2]))break}w[a+16>>2]=i,w[i+24>>2]=n}else w[1924]=n|a,w[r>>2]=i,w[i+24>>2]=r;w[i+12>>2]=i,w[i+8>>2]=i;break n}t=w[i+8>>2],w[t+12>>2]=u,w[i+8>>2]=u,w[u+24>>2]=0,w[u+12>>2]=i,w[u+8>>2]=t}t=c+8|0;break t}t=w[n+8>>2],w[t+12>>2]=i,w[n+8>>2]=i,w[i+24>>2]=0,w[i+12>>2]=n,w[i+8>>2]=t}if(!((t=w[1926])>>>0<=s>>>0)){r=t-s|0,w[1926]=r,i=(t=w[1929])+s|0,w[1929]=i,w[i+4>>2]=1|r,w[t+4>>2]=3|s,t=t+8|0;break t}}w[1906]=48,t=0;break t}r:if(u){t=w[o+28>>2];i:{if(w[(n=7996+(t<<2)|0)>>2]==(0|o)){if(w[n>>2]=r)break i;l=xt(t)&l,w[1924]=l;break r}if(!(w[u+(w[u+16>>2]==(0|o)?16:20)>>2]=r))break r}w[r+24>>2]=u,(t=w[o+16>>2])&&(w[r+16>>2]=t,w[t+24>>2]=r),(t=w[o+20>>2])&&(w[r+20>>2]=t,w[t+24>>2]=r)}r:if(i>>>0<=15)t=i+s|0,w[o+4>>2]=3|t,w[4+(t=t+o|0)>>2]=1|w[t+4>>2];else if(w[o+4>>2]=3|s,w[4+(n=o+s|0)>>2]=1|i,(w[i+n>>2]=i)>>>0<=255)t=7732+((r=i>>>3)<<3)|0,r=(i=w[1923])&(r=1<<r)?w[t+8>>2]:(w[1923]=r|i,t),w[t+8>>2]=n,w[r+12>>2]=n,w[n+12>>2]=t,w[n+8>>2]=r;else{t=0,(s=i>>>8)&&(t=31,16777215<i>>>0||(t=28+((t=((u=(s<<=a=s+1048320>>>16&8)<<(t=s+520192>>>16&4))<<(s=u+245760>>>16&2)>>>15)-(s|t|a)|0)<<1|i>>>t+21&1)|0)),w[(r=n)+28>>2]=t,w[n+16>>2]=0,r=7996+(t<<2)|(w[n+20>>2]=0);i:{if((s=1<<t)&l){for(t=i<<(31==(0|t)?0:25-(t>>>1)|0),s=w[r>>2];;){if((-8&w[(r=s)+4>>2])==(0|i))break i;if(s=t>>>29,t<<=1,!(s=w[16+(a=(4&s)+r|0)>>2]))break}w[a+16>>2]=n}else w[1924]=s|l,w[r>>2]=n;w[n+24>>2]=r,w[n+12>>2]=n,w[n+8>>2]=n;break r}t=w[r+8>>2],w[t+12>>2]=n,w[r+8>>2]=n,w[n+24>>2]=0,w[n+12>>2]=r,w[n+8>>2]=t}t=o+8|0;break t}e:if(c){t=w[r+28>>2];r:{if(w[(i=7996+(t<<2)|0)>>2]==(0|r)){if(w[i>>2]=o)break r;h=7696,p=xt(t)&f,w[h>>2]=p;break e}if(!(w[c+(w[c+16>>2]==(0|r)?16:20)>>2]=o))break e}w[o+24>>2]=c,(t=w[r+16>>2])&&(w[o+16>>2]=t,w[t+24>>2]=o),(t=w[r+20>>2])&&(w[o+20>>2]=t,w[t+24>>2]=o)}n>>>0<=15?(t=n+s|0,w[r+4>>2]=3|t,w[4+(t=t+r|0)>>2]=1|w[t+4>>2]):(w[r+4>>2]=3|s,w[4+(s=r+s|0)>>2]=1|n,w[n+s>>2]=n,l&&(t=7732+((i=l>>>3)<<3)|0,o=w[1928],i=(i=1<<i)&a?w[t+8>>2]:(w[1923]=i|a,t),w[t+8>>2]=o,w[i+12>>2]=o,w[o+12>>2]=t,w[o+8>>2]=i),w[1928]=s,w[1925]=n),t=r+8|0}return O=16+e|0,t}function rt(t){var e=0,r=k(0),i=0,n=0,o=k(0),a=k(0);f(t);t:{if(1283457024<=(e=2147483647&(n=s(0)))>>>0){if(2139095040<e>>>0)break t;return k((0|n)<0?-1.570796251296997:1.570796251296997)}e:{if(e>>>0<=1054867455){if(i=-1,964689920<=e>>>0)break e;break t}if(t=k(B(t)),e>>>0<=1066926079){if(e>>>0<=1060110335){t=k(k(k(t+t)+k(-1))/k(t+k(2))),i=0;break e}t=k(k(t+k(-1))/k(t+k(1))),i=1}else i=e>>>0<=1075576831?(t=k(k(t+k(-1.5))/k(k(t*k(1.5))+k(1))),2):(t=k(k(-1)/t),3)}if(e=i,o=k(t*t),r=k(o*o),a=k(r*k(k(r*k(-.106480173766613))+k(-.19999158382415771))),r=k(o*k(k(r*k(k(r*k(.06168760731816292))+k(.14253635704517365)))+k(.333333283662796))),(0|e)<=-1)return k(t-k(t*k(a+r)));t=k(M[6080+(e<<=2)>>2]-k(k(k(t*k(a+r))-M[e+6096>>2])-t)),t=(0|n)<0?k(-t):t}return t}function it(t,e){var r,i=0,n=0,o=0,a=0,l=0;O=r=O-16|0,f(t);t:if((i=2147483647&(o=s(0)))>>>0<=1305022426){if(n=.6366197723675814*(a=+t)+6755399441055744-6755399441055744,P[e>>3]=a+-1.5707963109016418*n+-1.5893254773528196e-8*n,B(n)<2147483648){i=~~n;break t}i=-2147483648}else 2139095040<=i>>>0?(P[e>>3]=k(t-t),i=0):(i=((l=i)>>>23)-150|0,P[8+r>>3]=(u(0,l-(i<<23)|0),h()),i=function(t,e,r){var i,n,o,a,s,u=0,l=0,c=0,f=0,h=0,p=0,g=0,d=0,m=0,_=0,y=0,b=0;if(O=i=O-560|0,g=(l=r)+L(o=0<(0|(r=(r+-3|0)/24|0))?r:0,-24)|0,0<=(0|(n=w[808])))for(l=n+1|0,r=o;P[(320+i|0)+(c<<3)>>3]=(0|r)<0?0:+w[3248+(r<<2)>>2],r=r+1|0,(0|l)!=(0|(c=c+1|0)););for(p=g+-24|0,l=0;;){for(u=r=0;u+=P[(r<<3)+t>>3]*P[(320+i|0)+(l-r<<3)>>3],1!=(0|(r=r+1|0)););if(P[(l<<3)+i>>3]=u,r=(0|l)<(0|n),l=l+1|0,!r)break}s=23-p|0,a=24-p|0,l=n;e:{for(;;){if(u=P[(l<<3)+i>>3],!(m=((r=0)|(c=l))<1))for(;h=(480+i|0)+(r<<2)|0,d=u,f=B(u*=5.960464477539063e-8)<2147483648?~~u:-2147483648,f=B(d+=-16777216*(u=+(0|f)))<2147483648?~~d:-2147483648,w[h>>2]=f,u=P[((h=c+-1|0)<<3)+i>>3]+u,r=r+1|0,f=1<(0|c),c=h,f;);u=$(u,p),u+=-8*V(.125*u),u-=0|(h=B(u)<2147483648?~~u:-2147483648);r:{i:{n:{if(y=(0|p)<1){if(p)break n;f=w[476+((l<<2)+i|0)>>2]>>23}else _=c=(l<<2)+i|0,c=(f=w[c+476>>2])-((r=f>>a)<<a)|0,h=r+h|0,f=(w[_+476>>2]=c)>>s;if((0|f)<1)break r;break i}if(f=2,!(.5<=u)){f=0;break r}}if(c=r=0,!m)for(;;){m=w[(b=(480+i|0)+(r<<2)|0)>>2],_=16777215;i:{n:{if(!c){if(!m)break n;_=16777216,c=1}w[b>>2]=_-m;break i}c=0}if((0|l)==(0|(r=r+1|0)))break}y||1<(r=p+-1|0)>>>0||(w[476+(r=(l<<2)+i|0)>>2]=r-1?8388607&w[r+476>>2]:4194303&w[r+476>>2]),h=h+1|0,2==(0|f)&&(u=1-u,f=2,c&&(u-=$(1,p)))}if(0!=u)break;if(!(((c=0)|(r=l))<=(0|n))){for(;c=w[(480+i|0)+((r=r+-1|0)<<2)>>2]|c,(0|n)<(0|r););if(c){for(g=p;g=g+-24|0,!w[(480+i|0)+((l=l+-1|0)<<2)>>2];);break e}}for(r=1;r=(c=r)+1|0,!w[(480+i|0)+(n-c<<2)>>2];);for(c=l+c|0;;){for(l=h=l+1|0,P[(320+i|0)+(h<<3)>>3]=w[3248+(o+l<<2)>>2],u=r=0;u+=P[(r<<3)+t>>3]*P[(320+i|0)+(h-r<<3)>>3],1!=(0|(r=r+1|0)););if(P[(l<<3)+i>>3]=u,!((0|l)<(0|c)))break}l=c}16777216<=(u=$(u,0-p|0))?(t=(480+i|0)+(l<<2)|0,d=u,r=B(u*=5.960464477539063e-8)<2147483648?~~u:-2147483648,c=B(u=d+-16777216*(0|r))<2147483648?~~u:-2147483648,w[t>>2]=c,l=l+1|0):(r=B(u)<2147483648?~~u:-2147483648,g=p),w[(480+i|0)+(l<<2)>>2]=r}if(u=$(1,g),!((0|l)<=-1)){for(r=l;P[(r<<3)+i>>3]=u*w[(480+i|0)+(r<<2)>>2],u*=5.960464477539063e-8,t=0<(0|r),r=r+-1|0,t;);if(!((0|l)<=-1))for(r=l;;){for(c=l-(t=r)|0,r=u=0;u+=P[6016+(r<<3)>>3]*P[(t+r<<3)+i>>3],!((0|n)<=(0|r))&&(p=r>>>0<c>>>0,r=r+1|0,p););if(P[(160+i|0)+(c<<3)>>3]=u,r=t+-1|0,!(0<(0|t)))break}}if((u=0)<=(0|l))for(;u+=P[(160+i|0)+(l<<3)>>3],t=0<(0|l),l=l+-1|0,t;);return P[e>>3]=f?-u:u,O=560+i|0,7&h}(8+r|0,r,i),n=P[r>>3],(0|o)<=-1?(P[e>>3]=-n,i=0-i|0):P[e>>3]=n);return O=16+r|0,i}function nt(t){var e=0,r=0,i=0,n=0,o=0;i=4,r=1082;t:if(e=C[0|t]){for(;!((0|(n=C[0|r]))!=(0|e)||!(i=i+-1|0)|!n);)if(r=r+1|0,e=C[t+1|0],t=t+1|0,!e)break t;o=e}return(255&o)-C[0|r]|0}function ot(t,e){return t?function(t,e){t:{if(t){if(e>>>0<=127)break t;if(w[w[1625]>>2]){if(e>>>0<=2047)return v[t+1|0]=63&e|128,v[0|t]=e>>>6|192,2;if(!(57344!=(-8192&e)&&55296<=e>>>0))return v[t+2|0]=63&e|128,v[0|t]=e>>>12|224,v[t+1|0]=e>>>6&63|128,3;if(e+-65536>>>0<=1048575)return v[t+3|0]=63&e|128,v[0|t]=e>>>18|240,v[t+2|0]=e>>>6&63|128,v[t+1|0]=e>>>12&63|128,4}else if(57216==(-128&e))break t;w[1906]=25,t=-1}else t=1;return t}return v[0|t]=e,1}(t,e):0}function at(t,e,r,i){t:{if(!(20<e>>>0||9<(e=e+-9|0)>>>0)){switch(e-1|0){default:return e=w[r>>2],w[r>>2]=e+4,void(w[t>>2]=w[e>>2]);case 0:return e=w[r>>2],w[r>>2]=e+4,e=w[e>>2],w[t>>2]=e,void(w[t+4>>2]=e>>31);case 1:return e=w[r>>2],w[r>>2]=e+4,w[t>>2]=w[e>>2],void(w[t+4>>2]=0);case 3:return e=w[r>>2],w[r>>2]=e+4,e=A[e>>1],w[t>>2]=e,void(w[t+4>>2]=e>>31);case 4:return e=w[r>>2],w[r>>2]=e+4,w[t>>2]=S[e>>1],void(w[t+4>>2]=0);case 5:return e=w[r>>2],w[r>>2]=e+4,e=v[0|e],w[t>>2]=e,void(w[t+4>>2]=e>>31);case 6:return e=w[r>>2],w[r>>2]=e+4,w[t>>2]=C[0|e],void(w[t+4>>2]=0);case 2:case 7:break t;case 8:}b[i](t,r)}return}e=w[r>>2]+7&-8,w[r>>2]=e+8,r=w[e+4>>2],w[t>>2]=w[e>>2],w[t+4>>2]=r}function st(t){var e=0,r=0,i=0;if(K(v[w[t>>2]]))for(;e=w[t>>2],i=v[0|e],w[t>>2]=e+1,r=(L(r,10)+i|0)-48|0,K(v[e+1|0]););return r}function ut(t,e,r,i,n){var o,a=0,s=0;w[204+(O=o=O-208|0)>>2]=r,W(160+o|(r=0),0,40),w[200+o>>2]=w[204+o>>2],(0|tt(0,e,200+o|0,80+o|0,160+o|0,i,n))<0||(r=0<=w[t+76>>2]?1:r,a=w[t>>2],v[t+74|0]<=0&&(w[t>>2]=-33&a),s=32&a,w[t+48>>2]?tt(t,e,200+o|0,80+o|0,160+o|0,i,n):(w[t+48>>2]=80,w[t+16>>2]=80+o,w[t+28>>2]=o,w[t+20>>2]=o,a=w[t+44>>2],tt(t,e,200+(w[t+44>>2]=o)|0,80+o|0,160+o|0,i,n),a&&(b[w[t+36>>2]](t,0,0),w[t+48>>2]=0,w[t+44>>2]=a,w[t+28>>2]=0,w[t+16>>2]=0,w[t+20>>2]=0)),w[t>>2]=w[t>>2]|s),O=208+o|0}function lt(t,e,r){var i,n=0;Z(8+(O=i=O-160|0)|0,2536,144),w[52+i>>2]=t,n=(n=-2-(w[28+i>>2]=t)|0)>>>0<256?n:256,t=t+(w[56+i>>2]=n)|0,w[36+i>>2]=t,w[24+i>>2]=t,ut(8+i|0,e,r,15,16),n&&(t=w[28+i>>2],v[t-((0|t)==w[24+i>>2])|0]=0),O=160+i|0}function ct(t){var e=0,r=0,i=0,n=0,o=0,a=0,s=0,u=k(0),l=0,c=0,f=0,h=0,p=0,g=0,d=0,m=k(0),_=0,y=k(0),A=0,x=0,P=k(0),D=k(0),F=k(0),E=0,T=0,R=0,O=0,N=0,U=0,G=0;if(w[t+256>>2]&&(e=w[t+200>>2]<<2,Z(w[t+280>>2],w[t+264>>2],e),Z(w[t+284>>2],w[t+268>>2],e),Z(w[t+288>>2],w[t+276>>2],e)),!((0|(o=w[t+292>>2]))<1)){for(l=(s=w[t+296>>2])+L(o,40)|0,i=w[t+300>>2],e=s;F=M[i>>2],(y=M[e+32>>2])==(u=(r=w[e+12>>2])?(P=M[e>>2],u=k(F-P),F=M[e+8>>2],m=k(u/F),u=k(V(m)),n=k(B(u))<k(2147483648)?~~u:-2147483648,k(P+k(F*k(m-k(0|n))))):(m=M[e>>2],u=M[e+4>>2],F<m?m:u<F?u:F))?w[e+36>>2]=0:(M[e+32>>2]=u,w[e+36>>2]=1),r||(M[i>>2]=u),i=i+4|0,(e=e+40|0)>>>0<l>>>0;);if(!((0|o)<1))for(_=w[t+308>>2],d=w[t+376>>2];;){t:if(!((0|(r=w[s+28>>2]))<1))if(c=(e=_+L(w[s+24>>2],28)|0)+L(r,28)|0,F=M[s+20>>2],D=M[s+16>>2],y=M[s+32>>2],d)for(;;){P=k(o=0);e:{r:{i:{if((0|(a=w[e>>2]))<1)i=n=0;else if(r=w[e+4>>2],m=M[r>>2],u=k(m-D),1!=(0|a)){if(y<u){n=1,i=0;break r}if(n=0,y<k(D+m))i=0;else{if(i=1,u=M[r+4>>2],!(y<k(D+u)))for(;;){if((0|a)==(0|(i=i+1|0)))break i;if(m=u,u=M[r+(i<<2)>>2],y<k(D+u))break}k(u-D)<y||(i=i+-1|0,(u=k(u-m))<F||(P=k(k(y-m)/u)))}}else n=y<k(D+m)^1|u<y^1,i=0;if(n)break r;if(g=a=1,!w[e+16>>2])break r;break e}i=a+-1|0,n=1}g=(a=(u=M[e+12>>2])!=P)&(P==k(0)|u==k(0))|w[e+8>>2]!=(0|i),o=n}if(w[e+20>>2]=g,w[e+24>>2]=a,M[e+12>>2]=P,w[e+16>>2]=o,w[e+8>>2]=i,!((e=e+28|0)>>>0<c>>>0))break}else{if(!w[s+36>>2])for(;;)if(w[e+20>>2]=0,!((e=e+28|(w[e+24>>2]=0))>>>0<c>>>0))break t;for(;;){P=k(o=0);e:{r:{i:{n:if(!(((n=0)|(i=w[(r=e)>>2]))<1)){if(h=w[e+4>>2],m=M[h>>2],u=k(m-D),1!=(0|i)){if(!(y<u)){if(n=0,y<k(D+m))break n;a=1;o:if(u=M[h+4>>2],!(y<k(D+u))){for(i=i+-1|0;m=u,(0|i)!=(0|a);)if(u=M[h+((a=a+1|0)<<2)>>2],y<k(D+u))break o;n=1;break r}if(n=0,k(u-D)<y){i=a;break i}if(i=a+-1|0,(u=k(u-m))<F)break i;P=k(k(y-m)/u);break i}n=1,i=0;break r}n=y<k(D+m)^1|u<y^1}i=0}if(!n&&(h=a=1,w[e+16>>2]))break e}o=n,h=(a=(u=M[e+12>>2])!=P)&(P==k(0)|u==k(0))|w[e+8>>2]!=(0|i)}if(w[r+20>>2]=h,w[e+24>>2]=a,M[e+12>>2]=P,w[e+16>>2]=o,w[e+8>>2]=i,!((e=e+28|0)>>>0<c>>>0))break}}if(!((s=s+40|0)>>>0<l>>>0))break}}if(1<=(0|(e=w[t+312>>2])))for(h=(f=w[t+316>>2])+L(e,36)|0,l=w[t+376>>2];;){N=(r=w[f+12>>2])+((s=w[f>>2])<<2)|0,A=w[t+308>>2],e=r;t:{if(!(s=((a=n=o=0)|s)<1))for(;;){if(i=A+L(w[e>>2],28)|0,w[i+16>>2]){g=1,x=O=0;break t}if(o=o||w[i+24>>2],a=a||w[i+20>>2],n=(M[i+12>>2]!=k(0))+n|0,!((e=e+4|0)>>>0<N>>>0))break}if(g=0,(x=l?1:a)|(O=l?1:o)&&(R=1<<n,w[f+8>>2]=R,31!=(0|n))){for(o=w[f+20>>2],i=(e=w[f+16>>2])+(a=R<<2)|0,E=W(p=e,0,4+((c=-1^e)+((e=e+4|0)>>>0<i>>>0?i:e)|0)&-4),a=o+a|0,e=o;w[e>>2]=1065353216,(e=e+4|0)>>>0<a>>>0;);if(!s)if(a=s=1,n)for(;;){if(p=A+L(w[r>>2],28)|0,n=w[p+8>>2],c=L(n,s),e=0,(u=M[p+12>>2])==k(0))for(;w[(n=E+(e<<2)|0)>>2]=c+w[n>>2],(0|R)!=(0|(e=e+1|0)););else{for(w[E>>2]=c+w[E>>2],M[o>>2]=k(k(1)-u)*M[o>>2],_=L(n+(e=1)|0,s);u=M[p+12>>2],i=e&a,w[(n=(d=e<<2)+E|0)>>2]=w[n>>2]+(i?_:c),M[(n=o+d|0)>>2]=(i?u:k(k(1)-u))*M[n>>2],(0|R)!=(0|(e=e+1|0)););a<<=1}if(s=L(w[p>>2],s),!((r=r+4|0)>>>0<N>>>0))break}else for(;;){if(i=A+L(w[r>>2],28)|0,a=L(w[i+8>>2],s),e=0,(u=M[i+12>>2])==k(0))for(;w[(n=E+(e<<2)|0)>>2]=a+w[n>>2],(0|R)!=(0|(e=e+1|0)););else w[E>>2]=a+w[E>>2],M[o>>2]=k(k(1)-u)*M[o>>2];if(s=L(w[i>>2],s),!((r=r+4|0)>>>0<N>>>0))break}}}if(w[f+32>>2]=g,w[f+24>>2]=x,w[f+28>>2]=O,!((f=f+36|0)>>>0<h>>>0))break}if(!((0|(n=w[t+4>>2]))<=0)){for(r=(e=w[t+52>>2])+(n<<2)|0;u=M[e>>2],M[e>>2]=u<k(0)?k(0):k(I(u,k(1))),(e=e+4|0)>>>0<r>>>0;);if(!((0|n)<1)){for(s=(e=w[t+8>>2])+(n<<3)|0,c=w[t+316>>2],o=w[t+40>>2],i=a=w[t+36>>2];n=0,w[e+4>>2]&&(r=w[e>>2],!w[a+(r<<2)>>2]&&-1!=(0|r)||(n=!w[32+(c+L(w[o>>2],36)|0)>>2])),w[i>>2]=n,o=o+4|0,i=i+4|0,(e=e+8|0)>>>0<s>>>0;);if(!((0|(l=w[t+4>>2]))<1))for(h=w[t>>2],_=w[h+724>>2],r=w[t+40>>2],a=s=0;;){if(p=c+L(w[r>>2],36)|0,(w[p+28>>2]||w[p+24>>2])&&(w[(o=s<<2)+w[t+16>>2]>>2]=w[p+8>>2],w[p+24>>2]&&!((0|(n=w[p+8>>2]))<1)))for(d=(e=w[p+16>>2])+(n<<2)|0,o=w[o+_>>2],i=w[t+28>>2]+(a<<2)|0,n=w[h+936>>2];w[i>>2]=w[n+(o+w[e>>2]<<2)>>2],i=i+4|0,(e=e+4|0)>>>0<d>>>0;);if(w[p+28>>2]&&!((0|(n=w[p+8>>2]))<1))for(n=(e=w[p+20>>2])+(n<<2)|0,i=w[t+20>>2]+(a<<2)|0;w[i>>2]=w[e>>2],i=i+4|0,(e=e+4|0)>>>0<n>>>0;);if(r=r+4|0,a=w[p+4>>2]+a|0,(0|l)==(0|(s=s+1|0)))break}}}if(b[w[1644]](t),U=w[t+316>>2],1<=(0|(r=w[t+56>>2]))){for(l=(e=w[t+60>>2])+(r<<5)|0,h=w[t+176>>2],_=w[t+172>>2],d=w[t+36>>2],n=w[t+180>>2],o=i=w[t+168>>2];;){a=o,r=0,w[e+28>>2]&&(-1!=(0|(s=w[e>>2]))&&(r=0,!w[d+(s<<2)>>2])||-1!=(0|(s=w[e+4>>2]))&&(r=0,!w[i+(s<<2)>>2])||(r=!w[32+(L(w[n>>2],36)+U|0)>>2])),w[a>>2]=r;t:if((a=w[e+8>>2])>>>0<=1){if(a-1){w[_+(w[e+12>>2]<<2)>>2]=r;break t}w[h+(w[e+12>>2]<<2)>>2]=r}else z(4,1473,0);if(n=n+4|0,o=o+4|0,!((e=e+32|0)>>>0<l>>>0))break}U=w[t+316>>2]}if(s=w[t>>2],1<=(0|(l=w[t- -64>>2]))){for(h=w[s+988>>2],_=w[s+784>>2],g=w[t+184>>2],f=r=0;;){if(c=L(w[g>>2],36)+U|0,(w[c+28>>2]||w[c+24>>2])&&(w[(o=r<<2)+w[t+84>>2]>>2]=w[c+8>>2],w[c+24>>2]&&!((0|(n=w[c+8>>2]))<1)))for(d=(e=w[c+16>>2])+(n<<2)|0,a=w[o+_>>2],i=(n=f<<2)+w[t+100>>2]|0,o=n+w[t+96>>2]|0;n=a+w[e>>2]<<2,w[i>>2]=h+(w[n+w[s+944>>2]>>2]<<2),w[o>>2]=w[n+w[s+940>>2]>>2],o=o+4|0,i=i+4|0,(e=e+4|0)>>>0<d>>>0;);if(w[c+28>>2]&&!((0|(n=w[c+8>>2]))<1))for(n=(e=w[c+20>>2])+(n<<2)|0,i=w[t+88>>2]+(f<<2)|0;w[i>>2]=w[e>>2],i=i+4|0,(e=e+4|0)>>>0<n>>>0;);if(g=g+4|0,f=w[c+4>>2]+f|0,(0|l)==(0|(r=r+1|0)))break}U=w[t+316>>2],s=w[t>>2]}if(1<=(0|(R=w[t+72>>2])))for(N=w[t+76>>2],A=w[s+808>>2],O=w[t+188>>2],x=f=0;;){if(T=L(w[O>>2],36)+U|0,(w[T+28>>2]||w[T+24>>2])&&(w[(r=f<<2)+w[t+116>>2]>>2]=w[T+8>>2],w[T+24>>2])){if(e=w[T+16>>2],E=w[r+A>>2],1<=(0|(r=w[T+8>>2])))for(p=e+(r<<2)|0,i=(r=x<<2)+w[t+132>>2]|0,o=r+w[t+136>>2]|0,n=r+w[t+140>>2]|0,a=r+w[t+144>>2]|0,g=r+w[t+128>>2]|0,c=w[s+948>>2],l=w[s+964>>2],h=w[s+960>>2],_=w[s+956>>2],d=w[s+952>>2],r=e;G=E+w[r>>2]<<2,w[i>>2]=w[G+d>>2],w[o>>2]=w[_+G>>2],w[n>>2]=w[h+G>>2],w[a>>2]=w[l+G>>2],w[g>>2]=w[c+G>>2],g=g+4|0,a=a+4|0,n=n+4|0,o=o+4|0,i=i+4|0,(r=r+4|0)>>>0<p>>>0;);r=N+(f<<5)|0,e=E+w[e>>2]<<2,w[r+24>>2]=w[e+w[s+968>>2]>>2],w[r+28>>2]=w[e+w[s+972>>2]>>2]}if(w[T+28>>2]&&!((0|(r=w[T+8>>2]))<1))for(r=(e=w[T+20>>2])+(r<<2)|0,i=w[t+120>>2]+(x<<2)|0;w[i>>2]=w[e>>2],i=i+4|0,(e=e+4|0)>>>0<r>>>0;);if(O=O+4|0,x=w[T+4>>2]+x|0,(0|R)==(0|(f=f+1|0)))break}if(b[w[1642]](t),b[w[1645]](t),!((0|(r=w[t+200>>2]))<1)){for(d=(e=w[t+204>>2])+(r<<4)|0,s=w[t+168>>2],a=w[t+36>>2],c=w[t+316>>2],o=w[t+252>>2],i=w[t+248>>2];n=0,w[e+8>>2]&&(r=w[e>>2],!w[a+(r<<2)>>2]&&-1!=(0|r)||(r=w[e+4>>2],!w[s+(r<<2)>>2]&&-1!=(0|r)||(n=!w[32+(c+L(w[o>>2],36)|0)>>2]))),w[i>>2]=n,o=o+4|0,i=i+4|0,(e=e+16|0)>>>0<d>>>0;);if(!((0|(h=w[t+200>>2]))<1))for(p=w[t>>2],_=w[p+988>>2],d=w[p+844>>2],r=w[t+252>>2],g=f=0;;){if(A=c+L(w[r>>2],36)|0,(w[A+28>>2]||w[A+24>>2])&&(w[(o=f<<2)+w[t+212>>2]>>2]=w[A+8>>2],w[A+24>>2]&&!((0|(n=w[A+8>>2]))<1)))for(s=(e=w[A+16>>2])+(n<<2)|0,a=w[o+d>>2],i=(n=g<<2)+w[t+232>>2]|0,o=n+w[t+224>>2]|0,n=n+w[t+228>>2]|0;l=a+w[e>>2]<<2,w[i>>2]=_+(w[l+w[p+984>>2]>>2]<<2),w[o>>2]=w[l+w[p+976>>2]>>2],w[n>>2]=w[l+w[p+980>>2]>>2],n=n+4|0,o=o+4|0,i=i+4|0,(e=e+4|0)>>>0<s>>>0;);if(w[A+28>>2]&&!((0|(n=w[A+8>>2]))<1))for(n=(e=w[A+20>>2])+(n<<2)|0,i=w[t+216>>2]+(g<<2)|0;w[i>>2]=w[e>>2],i=i+4|0,(e=e+4|0)>>>0<n>>>0;);if(r=r+4|0,g=w[A+4>>2]+g|0,(0|h)==(0|(f=f+1|0)))break}}if(b[w[1643]](t),function(t){var e,r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0,h=0,p=0;if(1<=(0|(e=w[t+340>>2])))for(c=w[t+316>>2],l=w[t>>2],f=w[l+1072>>2],a=w[t+372>>2];;){if(n=L(w[a>>2],36)+c|0,(w[n+28>>2]||w[n+24>>2])&&(w[(r=s<<2)+w[t+352>>2]>>2]=w[n+8>>2],w[n+24>>2]&&!((0|(o=w[n+8>>2]))<1)))for(o=(i=w[n+16>>2])+(o<<2)|0,h=w[r+f>>2],r=w[t+364>>2]+(u<<2)|0,p=w[l+1104>>2];w[r>>2]=w[(w[i>>2]+h<<2)+p>>2],r=r+4|0,(i=i+4|0)>>>0<o>>>0;);if(w[n+28>>2]&&!((0|(r=w[n+8>>2]))<1))for(o=(i=w[n+20>>2])+(r<<2)|0,r=w[t+356>>2]+(u<<2)|0;w[r>>2]=w[i>>2],r=r+4|0,(i=i+4|0)>>>0<o>>>0;);if(a=a+4|0,u=w[n+4>>2]+u|0,(0|e)==(0|(s=s+1|0)))break}}(t),b[w[1646]](t),r=w[t+48>>2],1<=(0|(e=w[t+4>>2])))for(s=(o=w[t+8>>2])+(e<<3)|0,n=w[t+52>>2],i=w[t+36>>2],e=r;w[i>>2]&&(u=M[n>>2],M[e>>2]=u,-1!=(0|(a=w[o>>2]))&&(M[e>>2]=u*M[(a<<2)+r>>2])),e=e+4|0,n=n+4|0,i=i+4|0,(o=o+8|0)>>>0<s>>>0;);if(1<=(0|(n=w[t+56>>2]))){for(r=t+56|0,e=w[t+60>>2],i=w[t+168>>2],o=0;w[i>>2]&&b[w[e+16>>2]](e,o,r),i=i+4|0,e=e+32|0,(0|n)!=(0|(o=o+1|0)););r=w[t+48>>2]}if(1<=(0|(n=w[t+200>>2])))for(h=(e=w[t+204>>2])+(n<<4)|0,_=w[t+192>>2],d=w[t+60>>2],o=w[t+248>>2],i=w[t+276>>2],n=w[t+272>>2];w[o>>2]&&(-1!=(0|(a=w[e>>2]))&&(M[i>>2]=M[(a<<2)+r>>2]*M[i>>2]),-1!=(0|(a=w[e+4>>2]))&&(M[i>>2]=M[_+(a<<2)>>2]*M[i>>2],s=d+(a<<5)|0,a=w[n>>2],b[w[s+20>>2]](w[s+24>>2],a,a,w[e+12>>2]))),n=n+4|0,i=i+4|0,o=o+4|0,(e=e+16|0)>>>0<h>>>0;);if(function(t){var e=0,r=0,i=0,n=0,o=k(0),a=k(0),s=k(0),u=k(0),l=k(0),c=0,f=0,h=0,p=0,g=0,d=k(0),m=0,_=0,y=k(0),b=0;if(1<=(0|(i=w[t+340>>2])))for(b=(e=w[t+344>>2])+L(i,24)|0,i=w[t+272>>2];;){if((t=0)<(0|(c=w[e+8>>2])))for(f=w[i+(w[e+4>>2]<<2)>>2],h=w[i+(w[e>>2]<<2)>>2],o=M[e+20>>2],p=w[e+16>>2],g=w[e+12>>2];d=M[((r=1|t)<<2)+g>>2],n=S[(t<<1)+p>>1]<<3&262136,a=M[(m=(4|n)+h|0)>>2],r=S[(r<<1)+p>>1]<<3&262136,s=M[(_=(4|r)+f|0)>>2],u=M[(n=n+h|0)>>2],y=M[(t<<2)+g>>2],l=M[(r=r+f|0)>>2],M[n>>2]=u+k(o*k(y*k(l-u))),M[m>>2]=a+k(o*k(y*k(s-a))),M[r>>2]=l+k(o*k(d*k(u-l))),M[_>>2]=s+k(o*k(d*k(a-s))),(0|(t=t+2|0))<(0|c););if(!((e=e+24|0)>>>0<b>>>0))break}}(t),b[w[1647]](t),g=w[t+248>>2],f=w[t+268>>2],1<=(0|(c=w[t+320>>2]))){for(h=(n=w[t+324>>2])+L(c,28)|0,_=w[t+44>>2],d=w[t+36>>2],r=n;;){if(1<=(0|(i=w[r+4>>2])))for(s=r+20|0,a=w[r+12>>2],e=0;l=w[4+(o=a+(e<<4)|0)>>2]<<2,o=1==w[(p=o)>>2],w[p+12>>2]=w[(w[l+(o?d:g)>>2]?l+(o?_:f)|0:s)>>2],(0|i)!=(0|(e=e+1|0)););if(!((r=r+28|0)>>>0<h>>>0))break}for(_=w[t+264>>2],x=0;;){if(l=n+L(x,28)|0,!(w[(h=l)+24>>2]<1)){for(o=w[t+328>>2],e=0;w[o+(e<<2)>>2]=-1,(0|(e=e+1|0))<(0|(r=w[h+24>>2])););if(!((0|r)<1))for(r=w[t+336>>2],e=0;w[r+(e<<2)>>2]=-1,(0|(e=e+1|0))<w[h+24>>2];);}if(!(w[l+4>>2]<1)){for(d=w[t+332>>2],e=0;w[d+(e<<2)>>2]=-1,(0|(e=e+1|0))<(0|(r=w[l+4>>2])););if(!((0|r)<1))for(i=w[l+12>>2],s=w[t+336>>2],e=0;a=w[12+(i+(e<<4)|0)>>2]-w[l+20>>2]<<2,r=-1!=(0|(r=w[(o=a+s|0)>>2]))?d+(r<<2)|0:a+w[t+328>>2]|0,w[r>>2]=e,(0|(e=(w[o>>2]=e)+1|0))<w[l+4>>2];);}if(1<=(0|(o=w[h+24>>2])))for(i=w[l+8>>2],d=w[t+328>>2],s=0;;){if(-1!=(0|(e=w[d+(s<<2)>>2]))){for(a=w[t+332>>2],o=w[l+12>>2];i=(r=1!=w[(r=o+(e<<4)|0)>>2]?(w[_+(w[r+4>>2]<<2)>>2]=i,1):(r=n+L(w[r+8>>2],28)|0,w[r+8>>2]=i,w[r>>2]))+i|0,(0|e)<(0|(r=w[a+(e<<2)>>2]))&&-1!=(0|(e=r)););o=w[h+24>>2]}if(!((0|(s=s+1|0))<(0|o)))break}if((0|c)==(0|(x=x+1|0)))break}}a=w[t+200>>2];t:{if(w[t+376>>2]){if(e=0,((w[t+256>>2]=0)|a)<1)break t;for(;;){if(i=62,o=w[t+260>>2]+e|0,!w[(r=e<<2)+g>>2]|M[r+w[t+276>>2]>>2]==k(0)||(i=63),v[0|o]=i,(0|a)==(0|(e=e+1|0)))break t;g=w[t+248>>2]}}if(!w[t+256>>2]){if((0|a)<1)break t;for(e=0;;){if(!w[(r=e<<2)+g>>2]|M[r+w[t+276>>2]>>2]==k(0)?(r=w[t+260>>2]+e|0,v[0|r]=254&C[0|r]):(r=w[t+260>>2]+e|0,v[0|r]=1|C[0|r]),(0|a)==(0|(e=e+1|0)))break t;g=w[t+248>>2]}}if(!(((w[t+256>>2]=0)|a)<1))for(i=0;;){if(u=M[(o=i<<2)+w[t+276>>2]>>2],n=w[o+g>>2],e=u!=k(0)&0!=(0|n),r=w[t+260>>2]+i|0,e=(0|e)==(1&v[0|r])?e:2|e,e=u!=M[o+w[t+288>>2]>>2]?4|e:e,e=w[o+f>>2]==w[o+w[t+284>>2]>>2]?e:8|e,e=w[o+w[t+264>>2]>>2]==w[o+w[t+280>>2]>>2]?e:16|e,v[0|r]=n?32|e:e,(0|a)==(0|(i=i+1|0)))break t;f=w[t+268>>2],g=w[t+248>>2]}}w[t+376>>2]=0}function ft(t,e,r){var i=0,n=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0,h=0,p=0;if(w[e>>2]=384,n=w[t>>2],1<=(0|(a=w[n>>2]))){for(u=w[t+16>>2],l=w[t+296>>2];o=(1<<w[l+(w[u+(i<<2)>>2]<<2)>>2])+o|0,(0|a)!=(0|(i=i+1|0)););i=o<<2}if(w[e+4>>2]=a<<3,w[e+8>>2]=w[n>>2]<<2,w[e+12>>2]=w[n>>2]<<2,w[e+16>>2]=w[n>>2]<<2,w[e+20>>2]=w[n>>2]<<2,w[e+24>>2]=w[n>>2]<<2,o=w[n>>2],w[e+40>>2]=i,w[e+36>>2]=i,w[e+32>>2]=i,w[e+28>>2]=o<<2,1<=((o=i=0)|(l=w[n+8>>2]))){for(f=w[t+296>>2],h=w[t+88>>2],c=w[t+76>>2],a=0;i=(0|i)<(0|(u=w[(p=o<<2)+h>>2]))?u:i,s=(15+(u<<3)&-16)+s|0,a=(1<<w[f+(w[c+p>>2]<<2)>>2])+a|0,(0|l)!=(0|(o=o+1|0)););o=i<<3,i=a<<2}if(w[e+44>>2]=w[n+4>>2]<<5,w[e+48>>2]=L(w[n+8>>2],24),w[e+52>>2]=w[n+12>>2]<<5,w[e+56>>2]=w[n+4>>2]<<2,w[e+60>>2]=w[n+8>>2]<<2,w[e+64>>2]=w[n+12>>2]<<2,w[e+68>>2]=w[n+4>>2]<<2,a=w[n+4>>2],w[e+76>>2]=s,w[e+72>>2]=a<<2,w[e+80>>2]=w[n+8>>2]<<2,a=w[n+8>>2],w[e+104>>2]=o,w[e+100>>2]=i,w[e+96>>2]=i,w[e+92>>2]=i,w[e+88>>2]=i,w[e+84>>2]=a<<2,1<=((i=s=0)|(a=w[n+12>>2]))){for(u=w[t+296>>2],l=w[t+100>>2],o=0;o=(1<<w[u+(w[l+(i<<2)>>2]<<2)>>2])+o|0,(0|a)!=(0|(i=i+1|0)););i=o<<2}if(w[e+108>>2]=a<<2,o=w[n+12>>2],w[e+156>>2]=i,w[e+152>>2]=i,w[e+148>>2]=i,w[e+144>>2]=i,w[e+140>>2]=i,w[e+136>>2]=i,w[e+132>>2]=i,w[e+128>>2]=i,w[e+124>>2]=i,w[e+120>>2]=i,w[e+116>>2]=i,w[e+112>>2]=o<<2,1<=((o=i=0)|(u=w[n+16>>2]))){for(f=w[t+136>>2],h=w[t+296>>2],c=w[t+172>>2],a=0;i=(0|i)<(0|(l=w[(p=o<<2)+c>>2]))?l:i,s=(15+(l<<3)&-16)+s|0,a=(1<<w[h+(w[f+p>>2]<<2)>>2])+a|0,(0|u)!=(0|(o=o+1|0)););o=i<<3,i=a<<2}if(w[e+160>>2]=u<<4,w[e+164>>2]=w[n+16>>2]<<2,w[e+168>>2]=w[n+16>>2],w[e+172>>2]=w[n+16>>2]<<2,w[e+176>>2]=w[n+16>>2]<<2,a=w[n+16>>2],w[e+184>>2]=s,w[e+180>>2]=a<<2,w[e+188>>2]=w[n+16>>2]<<2,w[e+192>>2]=w[n+16>>2]<<2,w[e+196>>2]=w[n+16>>2]<<2,w[e+200>>2]=w[n+16>>2]<<2,w[e+204>>2]=w[n+16>>2]<<2,a=w[n+16>>2],w[e+236>>2]=o,w[e+232>>2]=i,w[e+228>>2]=i,w[e+224>>2]=i,w[e+220>>2]=i,w[e+216>>2]=i,w[e+212>>2]=i,w[e+208>>2]=a<<2,w[e+240>>2]=L(w[n+20>>2],40),w[e+244>>2]=w[n+20>>2]<<2,w[e+248>>2]=L(w[n+52>>2],28),1<=((i=a=0)|(s=w[n+48>>2]))){for(u=w[t+296>>2],o=0;o=(1<<w[u+(i<<2)>>2])+o|0,(0|s)!=(0|(i=i+1|0)););i=o<<2}if(w[e+260>>2]=i,w[e+256>>2]=i,w[e+252>>2]=L(s,36),w[e+264>>2]=L(w[n+72>>2],28),1<=((i=0)|(u=w[n+72>>2]))){for(l=w[t+340>>2],f=w[t+336>>2],h=w[t+328>>2],o=0;o=(0|(c=w[(s=a<<2)+f>>2]-w[s+l>>2]|0))<(0|o)?o:c+1|0,i=(0|i)<(0|(s=w[s+h>>2]))?s:i,(0|u)!=(0|(a=a+1|0)););a=o<<2,i<<=2}if(o=w[n+76>>2],w[e+280>>2]=a,w[e+276>>2]=i,w[e+272>>2]=a,w[e+268>>2]=o<<4,1<=((i=0)|(a=w[n+80>>2]))){for(s=w[t+364>>2],t=w[t+296>>2],o=0;o=(1<<w[t+(w[s+(i<<2)>>2]<<2)>>2])+o|0,(0|a)!=(0|(i=i+1|0)););i=o<<2}for(w[e+284>>2]=L(a,24),w[e+288>>2]=w[n+80>>2]<<2,t=w[n+80>>2],w[e+304>>2]=i,w[e+300>>2]=i,w[e+296>>2]=i,w[e>>2]=0,w[e+292>>2]=t<<2,i=384,o=1;i=((n=w[(t=(o<<2)+e|0)>>2])+15&-16)+(w[t>>2]=i)|0,77!=(0|(o=o+1|0)););w[r>>2]=i}function ht(t,e,r){var i;e|=0,O=i=O+-64|0;t:{if(t|=0)if(e)if((e+15&-16)==(0|e)){if(e=function(t,e,r){var i,n=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0,h=0,p=0,g=0,d=0,m=0,_=0,y=0,b=0,A=0,S=0,x=k(0);if(W(16+(O=i=O-336|0)|0,0,308),ft(t+704|0,16+i|0,12+i|0),(o=w[12+i>>2])>>>0<=r>>>0){if(n=(a=W(e,r=0,o))+w[16+i>>2]|0,w[n+8>>2]=a+w[20+i>>2],w[n+36>>2]=a+w[24+i>>2],w[n+44>>2]=a+w[28+i>>2],w[n+48>>2]=a+w[32+i>>2],w[n+52>>2]=a+w[36+i>>2],w[n+12>>2]=a+w[40+i>>2],w[n+16>>2]=a+w[44+i>>2],w[n+20>>2]=a+w[48+i>>2],w[n+28>>2]=a+w[52+i>>2],w[n+32>>2]=a+w[56+i>>2],e=w[t+704>>2],w[n+60>>2]=a+w[60+i>>2],s=a+w[64+i>>2]|0,w[n+68>>2]=s,w[n+76>>2]=a+w[68+i>>2],w[n+168>>2]=a+w[72+i>>2],w[n+172>>2]=a+w[76+i>>2],w[n+176>>2]=a+w[80+i>>2],w[n+192>>2]=a+w[84+i>>2],w[n+196>>2]=a+w[88+i>>2],1<=(0|(e=w[e+8>>2])))for(o=a+w[92+i>>2]|0,u=w[t+792>>2];w[20+(s+L(r,24)|0)>>2]=o,o=(15+(w[u+(r<<2)>>2]<<3)&-16)+o|0,(0|e)!=(0|(r=r+1|0)););if(w[n+80>>2]=a+w[96+i>>2],w[n+84>>2]=a+w[100+i>>2],w[n+88>>2]=a+w[104+i>>2],w[n+96>>2]=a+w[108+i>>2],w[n+100>>2]=a+w[112+i>>2],w[n+104>>2]=a+w[116+i>>2],w[n+108>>2]=a+w[120+i>>2],w[n+112>>2]=a+w[124+i>>2],w[n+116>>2]=a+w[128+i>>2],w[n+120>>2]=a+w[132+i>>2],w[n+128>>2]=a+w[136+i>>2],w[n+132>>2]=a+w[140+i>>2],w[n+136>>2]=a+w[144+i>>2],w[n+140>>2]=a+w[148+i>>2],w[n+144>>2]=a+w[152+i>>2],w[n+148>>2]=a+w[156+i>>2],w[n+152>>2]=a+w[160+i>>2],w[n+156>>2]=a+w[164+i>>2],w[n+160>>2]=a+w[168+i>>2],w[n+164>>2]=a+w[172+i>>2],e=w[t+704>>2],w[n+204>>2]=a+w[176+i>>2],w[n+248>>2]=a+w[180+i>>2],w[n+260>>2]=a+w[184+i>>2],w[n+264>>2]=a+w[188+i>>2],w[n+268>>2]=a+w[192+i>>2],r=a+w[196+i>>2]|0,w[n+272>>2]=r,!((0|(e=w[e+16>>2]))<1)&&(o=a+w[200+i>>2]|0,w[r>>2]=o,(r=1)!=(0|e)))for(s=0;o=(15+(w[w[t+876>>2]+(s<<2)>>2]<<3)&-16)+o|0,w[w[n+272>>2]+(r<<2)>>2]=o,(0|e)!=(0|(r=(s=r)+1|0)););if(w[n+276>>2]=a+w[204+i>>2],w[n+280>>2]=a+w[208+i>>2],w[n+284>>2]=a+w[212+i>>2],w[n+288>>2]=a+w[216+i>>2],w[n+208>>2]=a+w[220+i>>2],w[n+212>>2]=a+w[224+i>>2],w[n+216>>2]=a+w[228+i>>2],w[n+224>>2]=a+w[232+i>>2],w[n+228>>2]=a+w[236+i>>2],w[n+232>>2]=a+w[240+i>>2],w[n+236>>2]=a+w[244+i>>2],w[n+240>>2]=a+w[248+i>>2],w[n+244>>2]=a+w[252+i>>2],e=w[256+i>>2],c=a+w[260+i>>2]|0,w[n+300>>2]=c,h=e+a|0,w[n+296>>2]=h,p=a+w[264+i>>2]|0,w[n+308>>2]=p,e=w[t+704>>2],r=w[276+i>>2],o=w[272+i>>2],f=a+w[268+i>>2]|0,w[n+316>>2]=f,1<=(0|(s=w[e+48>>2])))for(o=a+o|0,e=r+a|0,u=w[t+1e3>>2],r=0;l=f+L(r,36)|0,w[l+20>>2]=e,w[l+16>>2]=o,e=(l=1<<w[u+(r<<2)>>2]<<2)+e|0,o=o+l|0,(0|s)!=(0|(r=r+1|0)););if(e=w[t+704>>2],s=a+w[280+i>>2]|0,w[n+324>>2]=s,1<=(0|(e=w[e+72>>2])))for(o=a+w[284+i>>2]|0,u=w[t+1032>>2],r=0;w[12+(s+L(r,28)|0)>>2]=o,o=(w[u+(r<<2)>>2]<<4)+o|0,(0|e)!=(0|(r=r+1|0)););if(w[n+328>>2]=a+w[288+i>>2],w[n+332>>2]=a+w[292+i>>2],w[n+336>>2]=a+w[296+i>>2],w[n+344>>2]=a+w[300+i>>2],w[n+348>>2]=a+w[304+i>>2],w[n+352>>2]=a+w[308+i>>2],w[n+356>>2]=a+w[312+i>>2],w[n+364>>2]=a+w[316+i>>2],e=w[320+i>>2],w[n+376>>2]=1,w[n+368>>2]=e+a,w[n+380>>2]=1&v[w[t+708>>2]+20|0],a=w[t+704>>2],o=w[a+20>>2],1<=(0|(w[n+292>>2]=o))){for(g=w[t+932>>2],d=w[t+928>>2],m=w[t+924>>2],l=w[t+916>>2],y=w[t+920>>2],b=w[t+908>>2],A=w[t+912>>2],e=o;s=h+L(r=e+-1|0,40)|0,_=(u=r<<2)+A|0,w[s>>2]=w[_>>2],S=u+b|0,w[s+4>>2]=w[S>>2],M[s+8>>2]=M[S>>2]-M[_>>2],w[s+12>>2]=w[u+y>>2],w[s+32>>2]=w[u+l>>2],x=At(k(w[u+m>>2])),M[s+16>>2]=x,M[s+20>>2]=x*k(1.5),w[s+24>>2]=w[u+d>>2],u=w[u+g>>2],w[s+36>>2]=1,w[s+28>>2]=u,s=1<(0|e),e=r,s;);for(;w[(r=(e=o+-1|0)<<2)+c>>2]=w[r+l>>2],r=1<(0|o),o=e,r;);}if(e=w[a+52>>2],1<=(0|(w[n+304>>2]=e)))for(s=w[t+1004>>2],u=w[t+1012>>2],l=w[t+1008>>2];o=p+L(r=e+-1|0,28)|0,c=r<<2,w[o>>2]=w[c+l>>2],c=w[s+c>>2],w[o+20>>2]=1,w[o+24>>2]=1,w[o+12>>2]=0,w[o+4>>2]=u+(c<<2),o=1<(0|e),e=r,o;);if(e=w[a+48>>2],1<=(0|(w[n+312>>2]=e)))for(s=w[t+996>>2],u=w[t+992>>2],l=w[t+1e3>>2];o=f+L(r=e+-1|0,36)|0,h=w[(c=r<<2)+l>>2],w[o>>2]=h,w[o+4>>2]=1<<h,c=w[s+c>>2],w[o+24>>2]=1,w[o+28>>2]=1,w[o+12>>2]=u+(c<<2),o=1<(0|e),e=r,o;);if(e=w[a>>2],w[n+4>>2]=e,u=w[t+720>>2],w[n+40>>2]=u,(0|e)<1)r=0;else{for(l=w[t+732>>2],c=w[t+736>>2],h=w[t+740>>2],p=w[n+52>>2],g=w[n+8>>2],o=e;s=(r=o+-1|0)<<2,w[(d=g+(r<<3)|0)>>2]=w[s+h>>2],w[d+4>>2]=w[s+c>>2],M[s+p>>2]=w[s+l>>2]?k(1):k(0),s=1<(0|o),o=r,s;);for(l=w[n+12>>2],r=0;s=w[4+(f+L(w[(c=(o=e+-1|0)<<2)+u>>2],36)|0)>>2],w[l+c>>2]=s,r=r+s|0,s=1<(0|e),e=o,s;);}if(w[n+24>>2]=r,o=w[a+4>>2],w[n+56>>2]=o,w[n+180>>2]=w[t+752>>2],w[n+184>>2]=w[t+780>>2],w[n+188>>2]=w[t+804>>2],1<=(0|o)){for(;;){o=(e=o)+-1|0,r=w[n+60>>2]+(o<<5)|0,s=o<<2,w[r>>2]=w[s+w[t+764>>2]>>2],w[r+4>>2]=w[s+w[t+768>>2]>>2],a=w[s+w[t+772>>2]>>2],w[r+8>>2]=a,u=w[s+w[t+776>>2]>>2],w[r+12>>2]=u,w[r+28>>2]=w[s+w[t+760>>2]>>2];e:if(a>>>0<=1){if(a-1){w[r+20>>2]=1,w[r+16>>2]=2,w[r+24>>2]=w[n+68>>2]+L(u,24);break e}w[r+20>>2]=3,w[r+16>>2]=4,w[r+24>>2]=w[n+76>>2]+(u<<5)}else z(4,1026,0);if(!(1<(0|e)))break}a=w[t+704>>2]}e=w[a+8>>2];e:if(!((0|(w[n+64>>2]=e))<1)){if(r=e+-1|0,u=w[t+792>>2],f=w[t+800>>2],l=w[t+796>>2],c=w[n+68>>2],C[t+4|0]<2)for(;;)if(o=c+L(r,24)|0,s=r<<2,w[o>>2]=w[s+l>>2],w[o+4>>2]=w[s+f>>2],s=w[s+u>>2],w[o+8>>2]=0,w[o+12>>2]=s,o=0<(0|r),r=r+-1|0,!o)break e;for(h=w[t+1108>>2];o=c+L(r,24)|0,s=r<<2,w[o>>2]=w[s+l>>2],w[o+4>>2]=w[s+f>>2],w[o+12>>2]=w[s+u>>2],w[o+8>>2]=w[s+h>>2],o=0<(0|r),r=r+-1|0,o;);}if(r=w[a+12>>2],1<=(0|(w[n+72>>2]=r)))for(u=w[t+816>>2],f=w[n+76>>2],o=r;w[f+((s=o+-1|0)<<5)>>2]=w[u+(s<<2)>>2],l=1<(0|o),o=s,l;);if(1<=((s=o=0)|e)){for(f=w[n+80>>2],l=w[n+184>>2],c=w[n+316>>2];u=w[4+(c+L(w[(h=(r=e+-1|0)<<2)+l>>2],36)|0)>>2],w[f+h>>2]=u,s=s+u|0,u=1<(0|e),e=r,u;);r=w[n+72>>2]}if(w[n+92>>2]=s,1<=(0|r))for(u=w[n+112>>2],f=w[n+188>>2],l=w[n+316>>2];s=w[4+(l+L(w[(c=(e=r+-1|0)<<2)+f>>2],36)|0)>>2],w[u+c>>2]=s,o=o+s|0,s=1<(0|r),r=e,s;);if(w[n+124>>2]=o,o=w[a+16>>2],w[n+200>>2]=o,f=w[t+840>>2],w[n+252>>2]=f,(0|o)<1)r=0;else{for(l=w[t+856>>2],c=w[t+876>>2],h=w[t+864>>2],p=w[t+860>>2],g=w[n+204>>2],s=o;u=(e=s+-1|0)<<2,w[(r=g+(e<<4)|0)>>2]=w[u+p>>2],w[r+4>>2]=w[u+h>>2],w[r+12>>2]=w[u+c>>2],w[r+8>>2]=w[u+l>>2],r=1<(0|s),s=e,r;);for(u=w[n+208>>2],l=w[n+316>>2],r=0;s=w[4+(l+L(w[(c=(e=o+-1|0)<<2)+f>>2],36)|0)>>2],w[u+c>>2]=s,r=r+s|0,s=1<(0|o),o=e,s;);}if(w[n+220>>2]=r,s=w[a+72>>2],1<=(0|(w[n+320>>2]=s)))for(l=w[t+1028>>2],c=w[t+1044>>2],h=w[t+1040>>2],p=w[t+1036>>2],g=w[t+1032>>2],d=w[n+324>>2],o=0;;){if(e=d+L(o,28)|0,u=w[(r=o<<2)+g>>2],w[e+4>>2]=u,w[e>>2]=w[r+p>>2],f=w[r+h>>2],w[e+16>>2]=f,m=w[r+c>>2],w[e+20>>2]=m,w[e+8>>2]=0,w[e+24>>2]=1+(f-m|0),1<=(0|u))for(m=w[r+l>>2],y=w[e+12>>2],b=w[t+1056>>2],A=w[t+1048>>2],_=w[t+1052>>2],r=0;f=r+m<<2,w[4+(e=y+(r<<4)|0)>>2]=w[f+_>>2],w[e>>2]=w[f+A>>2],f=w[f+b>>2],w[e+12>>2]=0,w[e+8>>2]=f,(0|u)!=(0|(r=r+1|0)););if((0|s)==(0|(o=o+1|0)))break}if(o=w[a+80>>2],w[n+340>>2]=o,u=w[t+1068>>2],w[n+372>>2]=u,!(((e=0)|o)<1)){for(f=w[t+1100>>2],l=w[t+1088>>2],c=w[t+1096>>2],h=w[t+1092>>2],p=w[t+1084>>2],g=w[t+1080>>2],d=w[n+344>>2];s=d+L(r=o+-1|0,24)|0,a=r<<2,w[s>>2]=w[a+g>>2],w[s+4>>2]=w[a+p>>2],w[s+8>>2]=w[a+h>>2],a=w[a+l>>2],w[s+16>>2]=f+(a<<1),w[s+12>>2]=c+(a<<2),s=1<(0|o),o=r,s;);if(!((0|(r=w[n+340>>2]))<1))for(a=w[n+348>>2],f=w[n+316>>2];s=w[4+(f+L(w[(l=(o=r+-1|0)<<2)+u>>2],36)|0)>>2],w[a+l>>2]=s,e=e+s|0,s=1<(0|r),r=o,s;);}w[n>>2]=t,w[n+360>>2]=e,ct(n)}return O=336+i|0,n}(t,e,r|=0))break t;w[36+i>>2]=1872,w[32+i>>2]=1846,z(4,1087,32+i|0)}else w[52+i>>2]=1441,w[48+i>>2]=1846,z(4,1087,48+i|0);else w[20+i>>2]=1246,w[16+i>>2]=1846,z(4,1087,16+i|0);else w[4+i>>2]=1828,w[i>>2]=1846,z(4,1087,i);e=0}return O=i+64|0,0|e}function pt(t){var e;return O=e=O-16|0,t=(t|=0)?function(t){var e;return W(16+(O=e=O-336|0)|0,0,308),ft(t+704|0,16+e|0,12+e|0),O=336+e|0,w[12+e>>2]}(t):(w[4+e>>2]=1828,w[e>>2]=1810,z(4,1087,e),0),O=16+e|0,0|t}function gt(t,e){var r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0;o=t+e|0;t:{e:if(!(1&(r=w[t+4>>2]))){if(!(3&r))break t;if(e=(r=w[t>>2])+e|0,(0|(t=t-r|0))==w[1928]){if(3==(3&(r=w[o+4>>2])))return w[1925]=e,w[o+4>>2]=-2&r,w[t+4>>2]=1|e,void(w[o>>2]=e)}else{if(r>>>0<=255){if(n=r>>>3,r=w[t+8>>2],(0|(i=w[t+12>>2]))==(0|r)){u=7692,l=w[1923]&xt(n),w[u>>2]=l;break e}w[r+12>>2]=i,w[i+8>>2]=r;break e}if(s=w[t+24>>2],(0|(r=w[t+12>>2]))==(0|t))if((n=w[(i=t+20|0)>>2])||(n=w[(i=t+16|0)>>2])){for(;a=i,(n=w[(i=(r=n)+20|0)>>2])||(i=r+16|0,n=w[r+16>>2]););w[a>>2]=0}else r=0;else i=w[t+8>>2],w[i+12>>2]=r,w[r+8>>2]=i;if(!s)break e;i=w[t+28>>2];r:{if(w[(n=7996+(i<<2)|0)>>2]==(0|t)){if(w[n>>2]=r)break r;u=7696,l=w[1924]&xt(i),w[u>>2]=l;break e}if(!(w[s+(w[s+16>>2]==(0|t)?16:20)>>2]=r))break e}if(w[r+24>>2]=s,(i=w[t+16>>2])&&(w[r+16>>2]=i,w[i+24>>2]=r),!(i=w[t+20>>2]))break e;w[r+20>>2]=i,w[i+24>>2]=r}}e:{if(!(2&(r=w[o+4>>2]))){if(w[1929]==(0|o)){if(w[1929]=t,e=w[1926]+e|0,w[1926]=e,w[t+4>>2]=1|e,w[1928]!=(0|t))break t;return w[1925]=0,void(w[1928]=0)}if(w[1928]==(0|o))return w[1928]=t,e=w[1925]+e|0,w[1925]=e,w[t+4>>2]=1|e,void(w[t+e>>2]=e);e=(-8&r)+e|0;r:if(r>>>0<=255){if(n=r>>>3,r=w[o+8>>2],(0|(i=w[o+12>>2]))==(0|r)){u=7692,l=w[1923]&xt(n),w[u>>2]=l;break r}w[r+12>>2]=i,w[i+8>>2]=r}else{if(s=w[o+24>>2],(0|o)==(0|(r=w[o+12>>2])))if((n=w[(i=o+20|0)>>2])||(n=w[(i=o+16|0)>>2])){for(;a=i,(n=w[(i=(r=n)+20|0)>>2])||(i=r+16|0,n=w[r+16>>2]););w[a>>2]=0}else r=0;else i=w[o+8>>2],w[i+12>>2]=r,w[r+8>>2]=i;if(s){i=w[o+28>>2];i:{if(w[(n=7996+(i<<2)|0)>>2]==(0|o)){if(w[n>>2]=r)break i;u=7696,l=w[1924]&xt(i),w[u>>2]=l;break r}if(!(w[s+(w[s+16>>2]==(0|o)?16:20)>>2]=r))break r}w[r+24>>2]=s,(i=w[o+16>>2])&&(w[r+16>>2]=i,w[i+24>>2]=r),(i=w[o+20>>2])&&(w[r+20>>2]=i,w[i+24>>2]=r)}}if(w[t+4>>2]=1|e,w[t+e>>2]=e,w[1928]!=(0|t))break e;return void(w[1925]=e)}w[o+4>>2]=-2&r,w[t+4>>2]=1|e,w[t+e>>2]=e}if(e>>>0<=255)return e=7732+((r=e>>>3)<<3)|0,r=(i=w[1923])&(r=1<<r)?w[e+8>>2]:(w[1923]=r|i,e),w[e+8>>2]=t,w[r+12>>2]=t,w[t+12>>2]=e,void(w[t+8>>2]=r);w[t+16>>2]=0,r=w[t+20>>2]=0,(n=e>>>8)&&(r=31,16777215<e>>>0||(r=28+((r=((o=(n<<=a=n+1048320>>>16&8)<<(r=n+520192>>>16&4))<<(n=o+245760>>>16&2)>>>15)-(n|r|a)|0)<<1|e>>>r+21&1)|0)),n=7996+((w[(i=t)+28>>2]=r)<<2)|0;e:{if((i=w[1924])&(a=1<<r)){for(i=e<<(31==(0|r)?0:25-(r>>>1)|0),r=w[n>>2];;){if((-8&w[(n=r)+4>>2])==(0|e))break e;if(r=i>>>29,i<<=1,!(r=w[16+(a=n+(4&r)|0)>>2]))break}w[a+16>>2]=t}else w[1924]=i|a,w[n>>2]=t;return w[t+24>>2]=n,w[t+12>>2]=t,void(w[t+8>>2]=t)}e=w[n+8>>2],w[e+12>>2]=t,w[n+8>>2]=t,w[t+24>>2]=0,w[t+12>>2]=n,w[t+8>>2]=e}}function dt(t,e,r){var i=0;t:{if(8!=(0|e)){if(i=28,3&e|1!=(0|function(t){for(var e=0,r=0;r=e,t;)t&=t-1,e=e+1|0;return r}(e>>>2)))break t;if(i=48,-64-e>>>0<r>>>0)break t;e=function(t,e){var r=0,i=0,n=0,o=0,a=0;if((i=t>>>0>(r=16)?t:16)+-1&i)for(;r=(t=r)<<1,t>>>0<i>>>0;);else t=i;return-64-t>>>0<=e>>>0?(w[1906]=48,0):(r=et(12+((i=e>>>0<11?16:e+11&-8)+t|0)|0))?(e=r+-8|0,r&t+-1?(n=(-8&(a=w[(o=r+-4|0)>>2]))-(r=(t=15<(r=((t+r|0)-1&0-t)-8|0)-e>>>0?r:t+r|0)-e|0)|0,3&a?(w[t+4>>2]=n|1&w[t+4>>2]|2,w[4+(n=t+n|0)>>2]=1|w[n+4>>2],w[o>>2]=r|1&w[o>>2]|2,w[t+4>>2]=1|w[t+4>>2],gt(e,r)):(e=w[e>>2],w[t+4>>2]=n,w[t>>2]=e+r)):t=e,3&(e=w[t+4>>2])&&((r=-8&e)>>>0<=i+16>>>0||(w[t+4>>2]=i|1&e|2,e=t+i|0,i=r-i|0,w[e+4>>2]=3|i,w[4+(r=t+r|0)>>2]=1|w[r+4>>2],gt(e,i))),t+8|0):0}(16<e>>>0?e:16,r)}else e=et(r);if(!e)return 1;w[t>>2]=e,i=0}return i}function mt(t){var e=0,r=0,i=0,n=0,o=0,a=0,s=0,u=0,l=0;t:if(t){o=(i=t+-8|0)+(t=-8&(r=w[t+-4>>2]))|0;e:if(!(1&r)){if(!(3&r))break t;if((i=i-(r=w[i>>2])|0)>>>0<x[1927])break t;if(t=t+r|0,w[1928]==(0|i)){if(3==(3&(r=w[o+4>>2])))return w[1925]=t,w[o+4>>2]=-2&r,w[i+4>>2]=1|t,void(w[t+i>>2]=t)}else{if(r>>>0<=255){if(n=w[i+8>>2],r>>>=3,(0|(e=w[i+12>>2]))==(0|n)){u=7692,l=w[1923]&xt(r),w[u>>2]=l;break e}w[n+12>>2]=e,w[e+8>>2]=n;break e}if(s=w[i+24>>2],(0|i)==(0|(r=w[i+12>>2])))if((e=w[(n=i+20|0)>>2])||(e=w[(n=i+16|0)>>2])){for(;a=n,(e=w[(n=(r=e)+20|0)>>2])||(n=r+16|0,e=w[r+16>>2]););w[a>>2]=0}else r=0;else e=w[i+8>>2],w[e+12>>2]=r,w[r+8>>2]=e;if(!s)break e;n=w[i+28>>2];r:{if(w[(e=7996+(n<<2)|0)>>2]==(0|i)){if(w[e>>2]=r)break r;u=7696,l=w[1924]&xt(n),w[u>>2]=l;break e}if(!(w[s+(w[s+16>>2]==(0|i)?16:20)>>2]=r))break e}if(w[r+24>>2]=s,(e=w[i+16>>2])&&(w[r+16>>2]=e,w[e+24>>2]=r),!(e=w[i+20>>2]))break e;w[r+20>>2]=e,w[e+24>>2]=r}}if(!(o>>>0<=i>>>0)&&1&(r=w[o+4>>2])){e:{if(!(2&r)){if(w[1929]==(0|o)){if(w[1929]=i,t=w[1926]+t|0,w[1926]=t,w[i+4>>2]=1|t,w[1928]!=(0|i))break t;return w[1925]=0,void(w[1928]=0)}if(w[1928]==(0|o))return w[1928]=i,t=w[1925]+t|0,w[1925]=t,w[i+4>>2]=1|t,void(w[t+i>>2]=t);t=(-8&r)+t|0;r:if(r>>>0<=255){if(r>>>=3,(0|(e=w[o+8>>2]))==(0|(n=w[o+12>>2]))){u=7692,l=w[1923]&xt(r),w[u>>2]=l;break r}w[e+12>>2]=n,w[n+8>>2]=e}else{if(s=w[o+24>>2],(0|o)==(0|(r=w[o+12>>2])))if((e=w[(n=o+20|0)>>2])||(e=w[(n=o+16|0)>>2])){for(;a=n,(e=w[(n=(r=e)+20|0)>>2])||(n=r+16|0,e=w[r+16>>2]););w[a>>2]=0}else r=0;else e=w[o+8>>2],w[e+12>>2]=r,w[r+8>>2]=e;if(s){n=w[o+28>>2];i:{if(w[(e=7996+(n<<2)|0)>>2]==(0|o)){if(w[e>>2]=r)break i;u=7696,l=w[1924]&xt(n),w[u>>2]=l;break r}if(!(w[s+(w[s+16>>2]==(0|o)?16:20)>>2]=r))break r}w[r+24>>2]=s,(e=w[o+16>>2])&&(w[r+16>>2]=e,w[e+24>>2]=r),(e=w[o+20>>2])&&(w[r+20>>2]=e,w[e+24>>2]=r)}}if(w[i+4>>2]=1|t,w[t+i>>2]=t,w[1928]!=(0|i))break e;return void(w[1925]=t)}w[o+4>>2]=-2&r,w[i+4>>2]=1|t,w[t+i>>2]=t}if(t>>>0<=255)return r=7732+((t>>>=3)<<3)|0,t=(e=w[1923])&(t=1<<t)?w[r+8>>2]:(w[1923]=t|e,r),w[r+8>>2]=i,w[t+12>>2]=i,w[i+12>>2]=r,void(w[i+8>>2]=t);w[i+16>>2]=0,e=w[i+20>>2]=0,(n=t>>>8)&&(e=31,16777215<t>>>0||(e=n,e<<=n=n+1048320>>>16&8,e=28+((e=((e<<=s=e+520192>>>16&4)<<(a=e+245760>>>16&2)>>>15)-(a|n|s)|0)<<1|t>>>e+21&1)|0)),a=7996+((w[(r=i)+28>>2]=e)<<2)|0;e:if((n=w[1924])&(r=1<<e)){n=t<<(31==(0|e)?0:25-(e>>>1)|0),r=w[a>>2];r:{for(;;){if((-8&w[(e=r)+4>>2])==(0|t))break r;if(r=n>>>29,n<<=1,!(r=w[16+(a=e+(4&r)|0)>>2]))break}w[a+16>>2]=i,w[i+12>>2]=i,w[i+24>>2]=e,w[i+8>>2]=i;break e}t=w[e+8>>2],w[t+12>>2]=i,w[e+8>>2]=i,w[i+24>>2]=0,w[i+12>>2]=e,w[i+8>>2]=t}else w[1924]=r|n,w[a>>2]=i,w[i+12>>2]=i,w[i+24>>2]=a,w[i+8>>2]=i;if(t=w[1931]+-1|0,!(w[1931]=t)){for(i=8148;i=(t=w[i>>2])+8|0,t;);w[1931]=-1}}}}function _t(t,e){var r,i,n=0,o=0,a=0,u=k(0);if(f(e),!((i=2147483647&(n=s(0)))>>>0<=2139095040&&(f(t),(o=2147483647&(a=s(0)))>>>0<2139095041)))return k(t+e);if(1065353216==(0|n))return rt(t);n=(r=n>>>30&2)|a>>>31;t:{e:{r:{i:{if(!o){n:switch(n-2|0){case 0:break i;case 1:break n;default:break r}return k(-3.1415927410125732)}if(2139095040!=(0|i)){if(!i|!(o>>>0<=i+218103808>>>0&&2139095040!=(0|o)))break t;if(o+218103808>>>0<i>>>0&&(u=k(0),r)||(u=rt(k(B(k(t/e))))),t=u,n>>>0<=2){n:switch(n-1|0){case 0:return k(-t);case 1:break n;default:break r}return k(k(3.1415927410125732)-k(t+k(8.742277657347586e-8)))}return k(k(t+k(8.742277657347586e-8))+k(-3.1415927410125732))}if(2139095040==(0|o))break e;return M[6128+(n<<2)>>2]}t=k(3.1415927410125732)}return t}return M[6112+(n<<2)>>2]}return k((0|a)<0?-1.5707963705062866:1.5707963705062866)}function yt(t,e){var r=0,i=0,n=0;r=0!=(0|e);t:{e:{r:{i:if(!(!e|!(3&t)))for(;;){if(!C[0|t])break r;if(t=t+1|0,r=0!=(0|(e=e+-1|0)),!e)break i;if(!(3&t))break}if(!r)break e}if(!C[0|t])break t;r:{if(4<=e>>>0){for(r=(r=e+-4|0)-(i=-4&r)|0,i=4+(t+i|0)|0;;){if((-1^(n=w[t>>2]))&n+-16843009&-2139062144)break r;if(t=t+4|0,!(3<(e=e+-4|0)>>>0))break}e=r,t=i}if(!e)break e}for(;;){if(!C[0|t])break t;if(t=t+1|0,!(e=e+-1|0))break}}return 0}return t}function bt(t,e,r,i){if(t|e)for(;v[0|(r=r+-1|0)]=C[3168+(15&t)|0]|i,(t=(15&e)<<28|t>>>4)|(e>>>=4););return r}function vt(t,e,r){if(t|e)for(;v[0|(r=r+-1|0)]=7&t|48,(t=(7&e)<<29|t>>>3)|(e>>>=3););return r}function At(t){var e=k(0),r=k(0),i=0,n=0,o=k(0),a=k(0),l=k(0),c=k(0),p=0,g=k(0),d=k(0),m=0;t:{e:{if(f(t),n=2147483647&(i=s(0))){if(!(n>>>0<2139095041))return k(k(.10000000149011612)+t);if(1065353216==(0|n))return k(-1<(0|i)?.10000000149011612:10);if(2139095040==(0|n))return k(-1<(0|i)?0:-t);if(1073741824==(0|i))return k(.010000000707805157);if(1056964608==(0|i))return k(.3162277638912201);if(1291845633<=n>>>0)return k((0|i)<0?F:0);if(o=M[1537],a=k(k(1.600000023841858)-o),l=k(k(1)/k(o+k(1.600000023841858))),u(0,-4096&(f(r=k(a*l)),s(0))),e=h(),c=k(e*e),d=M[1541],o=k(l*k(k(a-k((g=e)*k(3.099609375)))-k(e*k(k(1.600000023841858)-k(k(3.099609375)-o))))),l=k(k(r+e)*o),e=k(r*r),a=k(l+k(k(e*e)*k(k(e*k(k(e*k(k(e*k(k(e*k(k(e*k(.20697501301765442))+k(.23066075146198273)))+k(.2727281153202057)))+k(.3333333432674408)))+k(.4285714328289032)))+k(.6000000238418579)))),u(0,-4096&(f(k(k(c+k(3))+a)),s(0))),e=h(),l=k(g*e),r=k(k(o*e)+k(r*k(a-k(k(e+k(-3))-c)))),u(0,-4096&(f(k(l+r)),s(0))),e=h(),o=k(e*k(.9619140625)),c=k(M[1539]+k(k(k(r-k(e-l))*k(.9617967009544373))+k(e*k(-.00011736857413779944)))),u(0,-4096&(f(k(k(d+k(o+c))+k(-4))),s(0))),r=h(),u(0,-4096&i),a=h(),e=k(r*a),t=k(k(k(c-k(k(k(r-k(-4))-d)-o))*t)+k(k(t-a)*r)),f(r=k(e+t)),1124073473<=(0|(i=s(0))))break e;r:{i:{if((n=1124073472)==(0|i)){if(!(k(t+k(4.299566569443414e-8))>k(r-e)))break i;break e}if(n=2147483647&i,!(t<=k(r-e)^1|-1021968384!=(0|i))|1125515265<=n>>>0)break t;if(n>>>0<1056964609)break r}p=(8388607&(n=(8388608>>>(n>>>23)-126)+i|0)|8388608)>>>150-(m=n>>>23&255),p=(0|i)<0?0-p|0:p,e=k(e-(u(0,n&-8388608>>m+-127),h())),f(k(t+e)),i=s(0)}u(0,-32768&i),r=h(),o=k(r*k(.693145751953125)),r=k(k(r*k(14286065379565116e-22))+k(k(t-k(r-e))*k(.6931471824645996))),t=k(o+r),e=k(t*t),e=k(t-k(e*k(k(e*k(k(e*k(k(e*k(k(e*k(4.138136944220605e-8))+k(-16533901998627698e-22)))+k(661375597701408e-19)))+k(-.0027777778450399637)))+k(.1666666716337204)))),g=k(k(t*e)/k(e+k(-2))),e=k(r-k(t-o)),t=(0|(i=0|(f(t=k(k(t-k(g-k(e+k(t*e))))+k(1))),s(0)+(p<<23))))<=8388607?function(t,e){r:if(128<=(0|e)){if(t=k(t*k(17014118346046923e22)),(0|e)<255){e=e+-127|0;break r}t=k(t*k(17014118346046923e22)),e=((0|e)<381?e:381)+-254|0}else-127<(0|e)||(t=k(t*k(11754943508222875e-54)),e=-253<(0|e)?e+126|0:(t=k(t*k(11754943508222875e-54)),(-378<(0|e)?e:-378)+252|0));return k(t*(u(0,1065353216+(e<<23)|0),h()))}(t,p):(u(0,i),h()),t=k(k(1)*t)}else t=k(1);return t}return k(F)}return k(0)}function wt(t,e){var r,i;r=0|t,i=0|e,n[0]=r,n[1]=i}function Ct(t,e,r){return function(t,e,r){var i,n,o,a,s=0;return a=L(i=r>>>16,s=t>>>16),t=(65535&(s=((o=L(n=65535&r,t&=65535))>>>16)+L(s,n)|0))+L(t,i)|0,N=((a+L(e,r)|0)+(s>>>16)|0)+(t>>>16)|0,65535&o|t<<16}(t,e,r)}function St(t,e,r){return function(t,e,r){var i=0,n=0,o=0,a=0,s=0,u=0,l=0,c=0,f=0;t:{e:{r:{i:{n:{o:{a:{s:{u:{if(n=e){if(!(i=r))break u;break s}return wt((e=t)-L(t=(t>>>0)/(r>>>0)|0,r)|0,0),N=0,t}if(!t)break a;break o}if(!((a=i+-1|0)&i))break n;s=0-(a=(D(i)+33|0)-D(n)|0)|0;break r}return wt(0,n-L(t=(n>>>0)/0|0,0)|0),N=0,t}if((i=32-D(n)|0)>>>0<31)break i;break e}if(wt(t&a,0),1==(0|i))break t;return r=31&(i=i?31-D(i+-1^i)|0:32),t=32<=(63&i)>>>0?(n=0,e>>>r):(n=e>>>r,((1<<r)-1&e)<<32-r|t>>>r),N=n,t}a=i+1|0,s=63-i|0}if(i=e,o=31&(n=63&a),o=32<=n>>>0?(n=0,i>>>o):(n=i>>>o,((1<<o)-1&i)<<32-o|t>>>o),i=31&(s&=63),32<=s>>>0?(e=t<<i,t=0):(e=(1<<i)-1&t>>>32-i|e<<i,t<<=i),a)for((s=r+(i=-1)|0)>>>0<4294967295&&(i=0);o=(l=u=o<<1|e>>>31)-(c=r&(u=i-((n=n<<1|o>>>31)+(s>>>0<u>>>0)|0)>>31))|0,n=n-(l>>>0<c>>>0)|0,e=e<<1|t>>>31,t=f|t<<1,f=u&=1,a=a+-1|0;);return wt(o,n),N=e<<1|t>>>31,u|t<<1}wt(t,e),e=t=0}return N=e,t}(t,e,r)}function xt(t){var e;return(-1>>>(e=31&t)&-2)<<e|(-1<<(t=0-t&31)&-2)>>>t}function Mt(){return _.byteLength/65536|0}}(it,C,S)}}a=null,n.wasmBinary&&(_=n.wasmBinary);var A=Error,w={};_=[],"object"!=(void 0===w?"undefined":s(w))&&b("no native wasm support detected");var C,S=new function(t){var e=Array(17);return e.grow=function(){18<=e.length&&W("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),e.push(null)},e.set=function(t,r){e[t]=r},e.get=function(t){return e[t]},e}({initial:17,maximum:18,element:"anyfunc"}),x=!1;function M(t,e){t||W("Assertion failed: "+e)}var P,L,k,B,D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function I(t,e,r){var i=e+r;for(r=e;t[r]&&!(i<=r);)++r;if(16<r-e&&t.subarray&&D)return D.decode(t.subarray(e,r));for(i="";e<r;){var n=t[e++];if(128&n){var o=63&t[e++];if(192==(224&n))i+=String.fromCharCode((31&n)<<6|o);else{var a=63&t[e++];(n=224==(240&n)?(15&n)<<12|o<<6|a:(7&n)<<18|o<<12|a<<6|63&t[e++])<65536?i+=String.fromCharCode(n):(n-=65536,i+=String.fromCharCode(55296|n>>10,56320|1023&n))}}else i+=String.fromCharCode(n)}return i}function V(t,e){return t?I(k,t,e):""}function F(t){return 0<t%65536&&(t+=65536-t%65536),t}function E(t){P=t,n.HEAP8=L=new Int8Array(t),n.HEAP16=new Int16Array(t),n.HEAP32=B=new Int32Array(t),n.HEAPU8=k=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=new Uint32Array(t),n.HEAPF32=new Float32Array(t),n.HEAPF64=new Float64Array(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var T=n.TOTAL_MEMORY||16777216;function R(t){for(;0<t.length;){var e=t.shift();if("function"==typeof e)e();else{var r=e.b;"number"==typeof r?void 0===e.a?n.dynCall_v(r):n.dynCall_vi(r,e.a):r(void 0===e.a?null:e.a)}}}(C=n.wasmMemory?n.wasmMemory:new function(){return{buffer:new ArrayBuffer(T/65536*65536),grow:function(t){return ct(t)}}})&&(P=C.buffer),T=P.byteLength,E(P),B[2052]=5251248;var O=[],N=[],U=[],G=[];function z(){var t=n.preRun.shift();O.unshift(t)}if(Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(t,e){var r=65535&t,i=65535&e;return r*i+((t>>>16)*i+r*(e>>>16)<<16)|0}),!Math.fround){var j=new Float32Array(1);Math.fround=function(t){return j[0]=t,j[0]}}Math.clz32||(Math.clz32=function(t){var e=32,r=t>>16;return r&&(e-=16,t=r),(r=t>>8)&&(e-=8,t=r),(r=t>>4)&&(e-=4,t=r),(r=t>>2)&&(e-=2,t=r),t>>1?e-2:e-t}),Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)});var X=0,Y=null,H=null;function W(t){throw n.onAbort&&n.onAbort(t),y(t),b(t),x=!0,new A("abort("+t+"). Build with -s ASSERTIONS=1 for more info.")}n.preloadedImages={},n.preloadedAudios={};var Q="data:application/octet-stream;base64,";function q(t){return String.prototype.startsWith?t.startsWith(Q):0===t.indexOf(Q)}var J="_em_module.wasm";if(!q(J)){var Z=J;J=n.locateFile?n.locateFile(Z,m):m+Z}function K(){try{if(_)return new Uint8Array(_);var t=rt(J);if(t)return t;if(p)return p(J);throw"both async and sync fetching of the wasm failed"}catch(t){W(t)}}N.push({b:function(){ot()}});var $=[null,[],[]];function tt(t){for(var e=[],r=0;r<t.length;r++){var i=t[r];255<i&&(i&=255),e.push(String.fromCharCode(i))}return e.join("")}var et="function"==typeof atob?atob:function(t){var e="",r=0;t=t.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++));i=i<<2|n>>4,n=(15&n)<<4|o>>2;var s=(3&o)<<6|a;e+=String.fromCharCode(i),64!==o&&(e+=String.fromCharCode(n)),64!==a&&(e+=String.fromCharCode(s))}while(r<t.length);return e};function rt(t){if(q(t)){if(t=t.slice(Q.length),"boolean"==typeof f&&f){try{var e=Buffer.from(t,"base64")}catch(r){e=new Buffer(t,"base64")}var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}else try{var i=et(t),n=new Uint8Array(i.length);for(e=0;e<i.length;++e)n[e]=i.charCodeAt(e);r=n}catch(t){throw Error("Converting base64 string to bytes failed.")}return r}}var it={emscripten_memcpy_big:function(t,e,r){k.set(k.subarray(e,e+r),t)},emscripten_resize_heap:function(t){if(2147418112<t)return!1;for(var e=Math.max(L.length,16777216);e<t;)e=e<=536870912?F(2*e):Math.min(F((3*e+2147483648)/4),2147418112);t:{try{C.grow(e-P.byteLength+65535>>16),E(C.buffer);var r=1;break t}catch(t){}r=void 0}return!!r},fd_write:function(t,e,r,i){try{for(var n=0,o=0;o<r;o++){for(var a=B[e+8*o>>2],s=B[e+(8*o+4)>>2],u=0;u<s;u++){var l=k[a+u],c=$[t];0===l||10===l?((1===t?y:b)(I(c,0)),c.length=0):c.push(l)}n+=s}return B[i>>2]=n,0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.c||W(t),t.f}},memory:C,table:S},nt=function(){function t(t){n.asm=t.exports,X--,n.monitorRunDependencies&&n.monitorRunDependencies(X),0==X&&(null!==Y&&(clearInterval(Y),Y=null),H&&(t=H,H=null,t()))}function e(e){t(e.instance)}function r(t){return(_||!l&&!c||"function"!=typeof fetch?new Promise((function(t){t(K())})):fetch(J,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+J+"'";return t.arrayBuffer()})).catch((function(){return K()}))).then((function(){return{then:function(t){t({instance:new v})}}})).then(t,(function(t){b("failed to asynchronously prepare wasm: "+t),W(t)}))}var i={env:it,wasi_snapshot_preview1:it};if(X++,n.monitorRunDependencies&&n.monitorRunDependencies(X),n.instantiateWasm)try{return n.instantiateWasm(i,t)}catch(t){return b("Module.instantiateWasm callback failed with error: "+t),!1}return function(){if(_||"function"!=typeof w.instantiateStreaming||q(J)||"function"!=typeof fetch)return r(e);fetch(J,{credentials:"same-origin"}).then((function(t){return w.instantiateStreaming(t,i).then(e,(function(t){b("wasm streaming compile failed: "+t),b("falling back to ArrayBuffer instantiation"),r(e)}))}))}(),{}}();n.asm=nt;var ot=n.___wasm_call_ctors=function(){return n.asm.__wasm_call_ctors.apply(null,arguments)};n._csmGetVersion=function(){return n.asm.csmGetVersion.apply(null,arguments)},n._csmGetLatestMocVersion=function(){return n.asm.csmGetLatestMocVersion.apply(null,arguments)},n._csmGetMocVersion=function(){return n.asm.csmGetMocVersion.apply(null,arguments)},n._csmSetLogFunction=function(){return n.asm.csmSetLogFunction.apply(null,arguments)},n._csmReviveMocInPlace=function(){return n.asm.csmReviveMocInPlace.apply(null,arguments)},n._csmReadCanvasInfo=function(){return n.asm.csmReadCanvasInfo.apply(null,arguments)},n._csmGetSizeofModel=function(){return n.asm.csmGetSizeofModel.apply(null,arguments)},n._csmInitializeModelInPlace=function(){return n.asm.csmInitializeModelInPlace.apply(null,arguments)},n._csmUpdateModel=function(){return n.asm.csmUpdateModel.apply(null,arguments)},n._csmGetParameterCount=function(){return n.asm.csmGetParameterCount.apply(null,arguments)},n._csmGetParameterIds=function(){return n.asm.csmGetParameterIds.apply(null,arguments)},n._csmGetParameterMinimumValues=function(){return n.asm.csmGetParameterMinimumValues.apply(null,arguments)},n._csmGetParameterMaximumValues=function(){return n.asm.csmGetParameterMaximumValues.apply(null,arguments)},n._csmGetParameterDefaultValues=function(){return n.asm.csmGetParameterDefaultValues.apply(null,arguments)},n._csmGetParameterValues=function(){return n.asm.csmGetParameterValues.apply(null,arguments)},n._csmGetPartCount=function(){return n.asm.csmGetPartCount.apply(null,arguments)},n._csmGetPartIds=function(){return n.asm.csmGetPartIds.apply(null,arguments)},n._csmGetPartOpacities=function(){return n.asm.csmGetPartOpacities.apply(null,arguments)},n._csmGetPartParentPartIndices=function(){return n.asm.csmGetPartParentPartIndices.apply(null,arguments)},n._csmGetDrawableCount=function(){return n.asm.csmGetDrawableCount.apply(null,arguments)},n._csmGetDrawableIds=function(){return n.asm.csmGetDrawableIds.apply(null,arguments)},n._csmGetDrawableConstantFlags=function(){return n.asm.csmGetDrawableConstantFlags.apply(null,arguments)},n._csmGetDrawableDynamicFlags=function(){return n.asm.csmGetDrawableDynamicFlags.apply(null,arguments)},n._csmGetDrawableTextureIndices=function(){return n.asm.csmGetDrawableTextureIndices.apply(null,arguments)},n._csmGetDrawableDrawOrders=function(){return n.asm.csmGetDrawableDrawOrders.apply(null,arguments)},n._csmGetDrawableRenderOrders=function(){return n.asm.csmGetDrawableRenderOrders.apply(null,arguments)},n._csmGetDrawableOpacities=function(){return n.asm.csmGetDrawableOpacities.apply(null,arguments)},n._csmGetDrawableMaskCounts=function(){return n.asm.csmGetDrawableMaskCounts.apply(null,arguments)},n._csmGetDrawableMasks=function(){return n.asm.csmGetDrawableMasks.apply(null,arguments)},n._csmGetDrawableVertexCounts=function(){return n.asm.csmGetDrawableVertexCounts.apply(null,arguments)},n._csmGetDrawableVertexPositions=function(){return n.asm.csmGetDrawableVertexPositions.apply(null,arguments)},n._csmGetDrawableVertexUvs=function(){return n.asm.csmGetDrawableVertexUvs.apply(null,arguments)},n._csmGetDrawableIndexCounts=function(){return n.asm.csmGetDrawableIndexCounts.apply(null,arguments)},n._csmGetDrawableIndices=function(){return n.asm.csmGetDrawableIndices.apply(null,arguments)},n._csmResetDrawableDynamicFlags=function(){return n.asm.csmResetDrawableDynamicFlags.apply(null,arguments)},n._csmMallocMoc=function(){return n.asm.csmMallocMoc.apply(null,arguments)},n._csmMallocModelAndInitialize=function(){return n.asm.csmMallocModelAndInitialize.apply(null,arguments)},n._csmMalloc=function(){return n.asm.csmMalloc.apply(null,arguments)},n._csmFree=function(){return n.asm.csmFree.apply(null,arguments)};var at,st=n.stackSave=function(){return n.asm.stackSave.apply(null,arguments)},ut=n.stackAlloc=function(){return n.asm.stackAlloc.apply(null,arguments)},lt=n.stackRestore=function(){return n.asm.stackRestore.apply(null,arguments)},ct=n.__growWasmMemory=function(){return n.asm.__growWasmMemory.apply(null,arguments)};function ft(){function t(){if(!at&&(at=!0,!x)){if(R(N),R(U),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;){var t=n.postRun.shift();G.unshift(t)}R(G)}}if(!(0<X)){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)z();R(O),0<X||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),t()}),1)):t())}}if(n.dynCall_vi=function(){return n.asm.dynCall_vi.apply(null,arguments)},n.asm=nt,n.ccall=function(t,e,r,i){var o,a={string:function(t){var e=0;if(null!=t&&0!==t){var r=1+(t.length<<2),i=e=ut(r),n=k;if(0<r){r=i+r-1;for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);if(55296<=a&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o)),a<=127){if(r<=i)break;n[i++]=a}else{if(a<=2047){if(r<=i+1)break;n[i++]=192|a>>6}else{if(a<=65535){if(r<=i+2)break;n[i++]=224|a>>12}else{if(r<=i+3)break;n[i++]=240|a>>18,n[i++]=128|a>>12&63}n[i++]=128|a>>6&63}n[i++]=128|63&a}}n[i]=0}}return e},array:function(t){var e=ut(t.length);return L.set(t,e),e}},s=function(t){var e=n["_"+t];return M(e,"Cannot call unknown function "+t+", make sure it is exported"),e}(t),u=[];if(t=0,i)for(var l=0;l<i.length;l++){var c=a[r[l]];c?(0===t&&(t=st()),u[l]=c(i[l])):u[l]=i[l]}return o=r=s.apply(null,u),r="string"===e?V(o):"boolean"===e?!!o:o,0!==t&&lt(t),r},n.UTF8ToString=V,n.addFunction=function(t,e){var r=S.length;try{S.grow(1)}catch(t){if(!t instanceof RangeError)throw t;throw"Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."}try{S.set(r,t)}catch(i){if(!i instanceof TypeError)throw i;M(void 0!==e,"Missing signature argument to addFunction"),S.set(r,t)}return r},n.then=function(t){if(at)t(n);else{var e=n.onRuntimeInitialized;n.onRuntimeInitialized=function(){e&&e(),t(n)}}return n},H=function t(){at||ft(),at||(H=t)},n.run=ft,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return ft(),t}}();"object"==s(e)&&"object"==s(n)?n.exports=y:void 0===(o=function(){return y}.apply(e,[]))||(n.exports=o);var b=y()}(a||(a={}))}).call(this,"/index.js","/",r(26)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=require("fs")},function(t,e){t.exports=require("path")},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSM_LOG_LEVEL=e.CSM_LOG_LEVEL_OFF=e.CSM_LOG_LEVEL_ERROR=e.CSM_LOG_LEVEL_WARNING=e.CSM_LOG_LEVEL_INFO=e.CSM_LOG_LEVEL_DEBUG=e.CSM_LOG_LEVEL_VERBOSE=void 0,e.CSM_LOG_LEVEL_VERBOSE=0,e.CSM_LOG_LEVEL_DEBUG=1,e.CSM_LOG_LEVEL_INFO=2,e.CSM_LOG_LEVEL_WARNING=3,e.CSM_LOG_LEVEL_ERROR=4,e.CSM_LOG_LEVEL_OFF=5,e.CSM_LOG_LEVEL=e.CSM_LOG_LEVEL_VERBOSE},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(1),n=r(31).Live2DCubismFramework.CubismId,o=i.Live2DCubismFramework.csmVector;!function(t){var e=function(){function t(){this._ids=new o}return t.prototype.release=function(){for(var t=0;t<this._ids.getSize();++t)this._ids.set(t,void 0);this._ids=null},t.prototype.registerIds=function(t){for(var e=0;e<t.length;e++)this.registerId(t[e])},t.prototype.registerId=function(t){var e=null;return"string"!=typeof t?this.registerId(t.s):(null!=(e=this.findId(t))||(e=new n(t),this._ids.pushBack(e)),e)},t.prototype.getId=function(t){return this.registerId(t)},t.prototype.isExist=function(t){return"string"==typeof t?null!=this.findId(t):this.isExist(t.s)},t.prototype.findId=function(t){for(var e=0;e<this._ids.getSize();++e)if(this._ids.at(e).getString().isEqual(t))return this._ids.at(e);return null},t}();t.CubismIdManager=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(6).Live2DCubismFramework.csmString;!function(t){var e=function(){function t(t){this._id="string"!=typeof t?t:new i(t)}return t.prototype.getString=function(){return this._id},t.prototype.isEqual=function(e){return"string"==typeof e?this._id.isEqual(e):e instanceof i?this._id.isEqual(e.s):e instanceof t&&this._id.isEqual(e._id.s)},t.prototype.isNotEqual=function(e){return"string"==typeof e?!this._id.isEqual(e):e instanceof i?!this._id.isEqual(e.s):e instanceof t&&!this._id.isEqual(e._id.s)},t}();t.CubismId=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&i(e,t,r);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.LAppView=void 0;var a=r(4),s=r(33).Live2DCubismFramework.CubismViewMatrix,u=a.Live2DCubismFramework.CubismMatrix44,l=r(34),c=r(17),f=r(5),h=r(12),p=o(r(13)),g=function(){function t(){this._programId=null,this._back=null,this._gear=null,this._touchManager=new l.TouchManager,this._deviceToScreen=new u,this._viewMatrix=new s}return t.prototype.initialize=function(){var t=f.canvas.width,e=f.canvas.height,r=e/t,i=p.ViewLogicalLeft,n=p.ViewLogicalRight,o=-r,a=r;this._viewMatrix.setScreenRect(i,n,o,a);var s=Math.abs(i-n);this._deviceToScreen.scaleRelative(s/t,-s/t),this._deviceToScreen.translateRelative(.5*-t,.5*-e),this._viewMatrix.setMaxScale(p.ViewMaxScale),this._viewMatrix.setMinScale(p.ViewMinScale),this._viewMatrix.setMaxScreenRect(p.ViewLogicalMaxLeft,p.ViewLogicalMaxRight,p.ViewLogicalMaxBottom,p.ViewLogicalMaxTop),console.log(this._viewMatrix)},t.prototype.release=function(){this._viewMatrix=null,this._touchManager=null,this._deviceToScreen=null,this._gear&&(this._gear.release(),this._gear=null),this._back&&(this._back.release(),this._back=null),f.gl.deleteProgram(this._programId),this._programId=null},t.prototype.render=function(){f.gl.useProgram(this._programId),this._back&&this._back.render(this._programId),this._gear&&this._gear.render(this._programId),f.gl.flush(),c.LAppLive2DManager.getInstance().onUpdate()},t.prototype.initializeSprite=function(){null==this._programId&&(this._programId=f.LAppDelegate.getInstance().createShader())},t.prototype.onTouchesBegan=function(t,e){this._touchManager.touchesBegan(t,e)},t.prototype.onTouchesMoved=function(t,e){var r=this.transformViewX(this._touchManager.getX()),i=this.transformViewY(this._touchManager.getY());this._touchManager.touchesMoved(t,e),c.LAppLive2DManager.getInstance().onDrag(r,i)},t.prototype.onTouchesEnded=function(t,e){var r=c.LAppLive2DManager.getInstance();r.onDrag(0,0);var i=this._deviceToScreen.transformX(this._touchManager.getX()),n=this._deviceToScreen.transformY(this._touchManager.getY());p.DebugTouchLogEnable&&h.LAppPal.printMessage("[APP]touchesEnded x: "+i+" y: "+n),r.onTap(i,n)},t.prototype.transformViewX=function(t){var e=this._deviceToScreen.transformX(t);return this._viewMatrix.invertTransformX(e)},t.prototype.transformViewY=function(t){var e=this._deviceToScreen.transformY(t);return this._viewMatrix.invertTransformY(e)},t.prototype.transformScreenX=function(t){return this._deviceToScreen.transformX(t)},t.prototype.transformScreenY=function(t){return this._deviceToScreen.transformY(t)},t}();e.LAppView=g},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var n=r(4).Live2DCubismFramework.CubismMatrix44;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._screenLeft=0,e._screenRight=0,e._screenTop=0,e._screenBottom=0,e._maxLeft=0,e._maxRight=0,e._maxTop=0,e._maxBottom=0,e._maxScale=0,e._minScale=0,e}return i(e,t),e.prototype.adjustTranslate=function(t,e){this._tr[0]*this._maxLeft+(this._tr[12]+t)>this._screenLeft&&(t=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]),this._tr[0]*this._maxRight+(this._tr[12]+t)<this._screenRight&&(t=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]),this._tr[5]*this._maxTop+(this._tr[13]+e)<this._screenTop&&(e=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]),this._tr[5]*this._maxBottom+(this._tr[13]+e)>this._screenBottom&&(e=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]);var r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]);n.multiply(r,this._tr,this._tr)},e.prototype.adjustScale=function(t,e,r){var i=this.getMaxScale(),o=this.getMinScale(),a=r*this._tr[0];a<o?this._tr[0]>0&&(r=o/this._tr[0]):a>i&&this._tr[0]>0&&(r=i/this._tr[0]);var s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]),u=new Float32Array([r,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-t,-e,0,1]);n.multiply(l,this._tr,this._tr),n.multiply(u,this._tr,this._tr),n.multiply(s,this._tr,this._tr)},e.prototype.setScreenRect=function(t,e,r,i){this._screenLeft=t,this._screenRight=e,this._screenBottom=r,this._screenTop=i},e.prototype.setMaxScreenRect=function(t,e,r,i){this._maxLeft=t,this._maxRight=e,this._maxTop=i,this._maxBottom=r},e.prototype.setMaxScale=function(t){this._maxScale=t},e.prototype.setMinScale=function(t){this._minScale=t},e.prototype.getMaxScale=function(){return this._maxScale},e.prototype.getMinScale=function(){return this._minScale},e.prototype.isMaxScale=function(){return this.getScaleX()>=this._maxScale},e.prototype.isMinScale=function(){return this.getScaleX()<=this._minScale},e.prototype.getScreenLeft=function(){return this._screenLeft},e.prototype.getScreenRight=function(){return this._screenRight},e.prototype.getScreenBottom=function(){return this._screenBottom},e.prototype.getScreenTop=function(){return this._screenTop},e.prototype.getMaxLeft=function(){return this._maxLeft},e.prototype.getMaxRight=function(){return this._maxRight},e.prototype.getMaxBottom=function(){return this._maxBottom},e.prototype.getMaxTop=function(){return this._maxTop},e}(n);t.CubismViewMatrix=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TouchManager=void 0;var i=function(){function t(){this._startX=0,this._startY=0,this._lastX=0,this._lastY=0,this._lastX1=0,this._lastY1=0,this._lastX2=0,this._lastY2=0,this._lastTouchDistance=0,this._deltaX=0,this._deltaY=0,this._scale=1,this._touchSingle=!1,this._flipAvailable=!1}return t.prototype.getCenterX=function(){return this._lastX},t.prototype.getCenterY=function(){return this._lastY},t.prototype.getDeltaX=function(){return this._deltaX},t.prototype.getDeltaY=function(){return this._deltaY},t.prototype.getStartX=function(){return this._startX},t.prototype.getStartY=function(){return this._startY},t.prototype.getScale=function(){return this._scale},t.prototype.getX=function(){return this._lastX},t.prototype.getY=function(){return this._lastY},t.prototype.getX1=function(){return this._lastX1},t.prototype.getY1=function(){return this._lastY1},t.prototype.getX2=function(){return this._lastX2},t.prototype.getY2=function(){return this._lastY2},t.prototype.isSingleTouch=function(){return this._touchSingle},t.prototype.isFlickAvailable=function(){return this._flipAvailable},t.prototype.disableFlick=function(){this._flipAvailable=!1},t.prototype.touchesBegan=function(t,e){this._lastX=t,this._lastY=e,this._startX=t,this._startY=e,this._lastTouchDistance=-1,this._flipAvailable=!0,this._touchSingle=!0},t.prototype.touchesMoved=function(t,e){this._lastX=t,this._lastY=e,this._lastTouchDistance=-1,this._touchSingle=!0},t.prototype.getFlickDistance=function(){return this.calculateDistance(this._startX,this._startY,this._lastX,this._lastY)},t.prototype.calculateDistance=function(t,e,r,i){return Math.sqrt((t-r)*(t-r)+(e-i)*(e-i))},t.prototype.calculateMovingAmount=function(t,e){if(t>0!=e>0)return 0;var r=t>0?1:-1,i=Math.abs(t),n=Math.abs(e);return r*(i<n?i:n)},t}();e.TouchManager=i},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.LAppModel=void 0;var s,u=r(0),l=r(36),c=r(55),f=r(57),h=r(9),p=r(20),g=r(19),d=r(1),m=r(8),_=r(18),y=r(2),b=_.Live2DCubismFramework.InvalidMotionQueueEntryHandleValue,v=m.Live2DCubismFramework.csmMap,A=d.Live2DCubismFramework.csmVector,w=g.Live2DCubismFramework.CubismBreath,C=g.Live2DCubismFramework.BreathParameterData,S=p.Live2DCubismFramework.CubismEyeBlink,x=h.Live2DCubismFramework.ACubismMotion,M=u.Live2DCubismFramework.CubismFramework,P=l.Live2DCubismFramework.CubismUserModel,L=c.Live2DCubismFramework.CubismModelSettingJson,k=f.Live2DCubismFramework,B=r(12),D=r(5),I=a(r(13));r(58),(V=s||(s={}))[V.LoadAssets=0]="LoadAssets",V[V.LoadModel=1]="LoadModel",V[V.WaitLoadModel=2]="WaitLoadModel",V[V.LoadExpression=3]="LoadExpression",V[V.WaitLoadExpression=4]="WaitLoadExpression",V[V.LoadPhysics=5]="LoadPhysics",V[V.WaitLoadPhysics=6]="WaitLoadPhysics",V[V.LoadPose=7]="LoadPose",V[V.WaitLoadPose=8]="WaitLoadPose",V[V.SetupEyeBlink=9]="SetupEyeBlink",V[V.SetupBreath=10]="SetupBreath",V[V.LoadUserData=11]="LoadUserData",V[V.WaitLoadUserData=12]="WaitLoadUserData",V[V.SetupEyeBlinkIds=13]="SetupEyeBlinkIds",V[V.SetupLipSyncIds=14]="SetupLipSyncIds",V[V.SetupLayout=15]="SetupLayout",V[V.LoadMotion=16]="LoadMotion",V[V.WaitLoadMotion=17]="WaitLoadMotion",V[V.CompleteInitialize=18]="CompleteInitialize",V[V.CompleteSetupModel=19]="CompleteSetupModel",V[V.LoadTexture=20]="LoadTexture",V[V.WaitLoadTexture=21]="WaitLoadTexture",V[V.CompleteSetup=22]="CompleteSetup";var V,F=function(t){function e(){var e=t.call(this)||this;return e._modelSetting=null,e._modelHomeDir=null,e._userTimeSeconds=0,e._eyeBlinkIds=new A,e._lipSyncIds=new A,e._motions=new v,e._expressions=new v,e._hitArea=new A,e._userArea=new A,e._idParamAngleX=M.getIdManager().getId(k.ParamAngleX),e._idParamAngleY=M.getIdManager().getId(k.ParamAngleY),e._idParamAngleZ=M.getIdManager().getId(k.ParamAngleZ),e._idParamEyeBallX=M.getIdManager().getId(k.ParamEyeBallX),e._idParamEyeBallY=M.getIdManager().getId(k.ParamEyeBallY),e._idParamBodyAngleX=M.getIdManager().getId(k.ParamBodyAngleX),e._state=s.LoadAssets,e._expressionCount=0,e._textureCount=0,e._motionCount=0,e._allMotionCount=0,e}return i(e,t),e.prototype.loadAssets=function(t,e){var r=this;this._modelHomeDir=t,fetch(this._modelHomeDir+"/"+e).then((function(t){return t.arrayBuffer()})).then((function(t){var e=new L(t,t.byteLength);r._state=s.LoadModel,r.setupModel(e)}))},e.prototype.setupModel=function(t){var e=this;if(this._updating=!0,this._initialized=!1,this._modelSetting=t,""!=this._modelSetting.getModelFileName()){var r=this._modelSetting.getModelFileName();fetch(this._modelHomeDir+"/"+r).then((function(t){return t.arrayBuffer()})).then((function(t){e.loadModel(t),e._state=s.LoadExpression,i()})),this._state=s.WaitLoadModel}else B.LAppPal.printMessage("Model data does not exist.");var i=function(){if(e._modelSetting.getExpressionCount()>0){for(var t=e._modelSetting.getExpressionCount(),r=function(r){var i=e._modelSetting.getExpressionName(r),o=e._modelSetting.getExpressionFileName(r);fetch(e._modelHomeDir+"/"+o).then((function(t){return t.arrayBuffer()})).then((function(r){var o=e.loadExpression(r,r.byteLength,i);null!=e._expressions.getValue(i)&&(x.delete(e._expressions.getValue(i)),e._expressions.setValue(i,null)),e._expressions.setValue(i,o),e._expressionCount++,e._expressionCount>=t&&(e._state=s.LoadPhysics,n())}))},i=0;i<t;i++)r(i);e._state=s.WaitLoadExpression}else e._state=s.LoadPhysics,n()},n=function(){if(""!=e._modelSetting.getPhysicsFileName()){var t=e._modelSetting.getPhysicsFileName();fetch(e._modelHomeDir+"/"+t).then((function(t){return t.arrayBuffer()})).then((function(t){e.loadPhysics(t,t.byteLength),e._state=s.LoadPose,o()})),e._state=s.WaitLoadPhysics}else e._state=s.LoadPose,o()},o=function(){if(""!=e._modelSetting.getPoseFileName()){var t=e._modelSetting.getPoseFileName();fetch(e._modelHomeDir+"/"+t).then((function(t){return t.arrayBuffer()})).then((function(t){e.loadPose(t,t.byteLength),e._state=s.SetupEyeBlink,a()})),e._state=s.WaitLoadPose}else e._state=s.SetupEyeBlink,a()},a=function(){e._modelSetting.getEyeBlinkParameterCount()>0&&(e._eyeBlink=S.create(e._modelSetting),e._state=s.SetupBreath),u()},u=function(){e._breath=w.create();var t=new A;t.pushBack(new C(e._idParamAngleX,0,15,6.5345,.5)),t.pushBack(new C(e._idParamAngleY,0,8,3.5345,.5)),t.pushBack(new C(e._idParamAngleZ,0,10,5.5345,.5)),t.pushBack(new C(e._idParamBodyAngleX,0,4,15.5345,.5)),t.pushBack(new C(M.getIdManager().getId(k.ParamBreath),0,.5,3.2345,.5)),e._breath.setParameters(t),e._state=s.LoadUserData,l()},l=function(){if(""!=e._modelSetting.getUserDataFile()){var t=e._modelSetting.getUserDataFile();fetch(e._modelHomeDir+"/"+t).then((function(t){return t.arrayBuffer()})).then((function(t){e.loadUserData(t,t.byteLength),e._state=s.SetupEyeBlinkIds,c()})),e._state=s.WaitLoadUserData}else e._state=s.SetupEyeBlinkIds,c()},c=function(){for(var t=e._modelSetting.getEyeBlinkParameterCount(),r=0;r<t;++r)e._eyeBlinkIds.pushBack(e._modelSetting.getEyeBlinkParameterId(r));e._state=s.SetupLipSyncIds,f()},f=function(){for(var t=e._modelSetting.getLipSyncParameterCount(),r=0;r<t;++r)e._lipSyncIds.pushBack(e._modelSetting.getLipSyncParameterId(r));e._state=s.SetupLayout,h()},h=function(){var t=new v;e._modelSetting.getLayoutMap(t),e._modelMatrix.setupFromLayout(t),e._state=s.LoadMotion,p()},p=function(){e._state=s.WaitLoadMotion,e._model.saveParameters(),e._allMotionCount=0,e._motionCount=0;for(var t=[],r=e._modelSetting.getMotionGroupCount(),i=0;i<r;i++)t[i]=e._modelSetting.getMotionGroupName(i),e._allMotionCount+=e._modelSetting.getMotionCount(t[i]);for(i=0;i<r;i++)e.preLoadMotionGroup(t[i]);0==r&&(e._state=s.LoadTexture,e._motionManager.stopAllMotions(),e._updating=!1,e._initialized=!0,e.createRenderer(),e.setupTextures(),e.getRenderer().startUp(D.gl))}},e.prototype.setupTextures=function(){var t=this;if(this._state==s.LoadTexture){for(var e=this._modelSetting.getTextureCount(),r=function(r){if(""==i._modelSetting.getTextureFileName(r))return console.log("getTextureFileName null"),"continue";var n=i._modelSetting.getTextureFileName(r);n=i._modelHomeDir+n,D.LAppDelegate.getInstance().getTextureManager().createTextureFromPngFile(n,!0,(function(i){t.getRenderer().bindTexture(r,i.id),t._textureCount++,t._textureCount>=e&&(t._state=s.CompleteSetup)})),i.getRenderer().setIsPremultipliedAlpha(!0)},i=this,n=0;n<e;n++)r(n);this._state=s.WaitLoadTexture}},e.prototype.reloadRenderer=function(){this.deleteRenderer(),this.createRenderer(),this.setupTextures()},e.prototype.update=function(){if(this._state==s.CompleteSetup){var t=B.LAppPal.getDeltaTime();this._userTimeSeconds+=t,this._dragManager.update(t),this._dragX=this._dragManager.getX(),this._dragY=this._dragManager.getY();var e=!1;if(this._model.loadParameters(),this._motionManager.isFinished()?this.startRandomMotion(I.MotionGroupIdle,I.PriorityIdle):e=this._motionManager.updateMotion(this._model,t),this._model.saveParameters(),e||null!=this._eyeBlink&&this._eyeBlink.updateParameters(this._model,t),null!=this._expressionManager&&this._expressionManager.updateMotion(this._model,t),this._model.addParameterValueById(this._idParamAngleX,30*this._dragX),this._model.addParameterValueById(this._idParamAngleY,30*this._dragY),this._model.addParameterValueById(this._idParamAngleZ,this._dragX*this._dragY*-30),this._model.addParameterValueById(this._idParamBodyAngleX,10*this._dragX),this._model.addParameterValueById(this._idParamEyeBallX,this._dragX),this._model.addParameterValueById(this._idParamEyeBallY,this._dragY),null!=this._breath&&this._breath.updateParameters(this._model,t),null!=this._physics&&this._physics.evaluate(this._model,t),this._lipsync)for(var r=0;r<this._lipSyncIds.getSize();++r)this._model.addParameterValueById(this._lipSyncIds.at(r),0,.8);null!=this._pose&&this._pose.updateParameters(this._model,t),this._model.update()}},e.prototype.startMotion=function(t,e,r,i){var n=this;if(r==I.PriorityForce)this._motionManager.setReservePriority(r);else if(!this._motionManager.reserveMotion(r))return this._debugMode&&B.LAppPal.printMessage("[APP]can't start motion."),b;var o=this._modelSetting.getMotionFileName(t,e),a=t+"_"+e,s=this._motions.getValue(a),u=!1;return null==s?fetch(this._modelHomeDir+"/"+o).then((function(t){return t.arrayBuffer()})).then((function(r){s=n.loadMotion(r,r.byteLength,null,i);var o=n._modelSetting.getMotionFadeInTimeValue(t,e);o>=0&&s.setFadeInTime(o),(o=n._modelSetting.getMotionFadeOutTimeValue(t,e))>=0&&s.setFadeOutTime(o),s.setEffectIds(n._eyeBlinkIds,n._lipSyncIds),u=!0})):s.setFinishedMotionHandler(i),this._debugMode&&B.LAppPal.printMessage("[APP]start motion: ["+t+"_"+e),this._motionManager.startMotionPriority(s,u,r)},e.prototype.startRandomMotion=function(t,e,r){if(0==this._modelSetting.getMotionCount(t))return b;var i=Math.floor(Math.random()*this._modelSetting.getMotionCount(t));return this.startMotion(t,i,e,r)},e.prototype.setExpression=function(t){var e=this._expressions.getValue(t);this._debugMode&&B.LAppPal.printMessage("[APP]expression: ["+t+"]"),null!=e?this._expressionManager.startMotionPriority(e,!1,I.PriorityForce):this._debugMode&&B.LAppPal.printMessage("[APP]expression["+t+"] is null")},e.prototype.setRandomExpression=function(){if(0!=this._expressions.getSize())for(var t=Math.floor(Math.random()*this._expressions.getSize()),e=0;e<this._expressions.getSize();e++)if(e==t){var r=this._expressions._keyValues[e].first;return void this.setExpression(r)}},e.prototype.motionEventFired=function(t){y.CubismLogInfo("{0} is fired on LAppModel!!",t.s)},e.prototype.hitTest=function(t,e,r){if(this._opacity<1)return!1;for(var i=this._modelSetting.getHitAreasCount(),n=0;n<i;n++)if(this._modelSetting.getHitAreaName(n)==t){var o=this._modelSetting.getHitAreaId(n);return this.isHit(o,e,r)}return!1},e.prototype.preLoadMotionGroup=function(t){for(var e=this,r=function(r){var n=i._modelSetting.getMotionFileName(t,r),o=t+"_"+r;i._debugMode&&B.LAppPal.printMessage("[APP]load motion: "+n+" => ["+o+"]"),fetch(i._modelHomeDir+"/"+n).then((function(t){return t.arrayBuffer()})).then((function(i){var n=e.loadMotion(i,i.byteLength,o),a=e._modelSetting.getMotionFadeInTimeValue(t,r);a>=0&&n.setFadeInTime(a),(a=e._modelSetting.getMotionFadeOutTimeValue(t,r))>=0&&n.setFadeOutTime(a),n.setEffectIds(e._eyeBlinkIds,e._lipSyncIds),null!=e._motions.getValue(o)&&x.delete(e._motions.getValue(o)),e._motions.setValue(o,n),e._motionCount++,e._motionCount>=e._allMotionCount&&(e._state=s.LoadTexture,e._motionManager.stopAllMotions(),e._updating=!1,e._initialized=!0,e.createRenderer(),e.setupTextures(),e.getRenderer().startUp(D.gl))}))},i=this,n=0;n<this._modelSetting.getMotionCount(t);n++)r(n)},e.prototype.releaseMotions=function(){this._motions.clear()},e.prototype.releaseExpressions=function(){this._expressions.clear()},e.prototype.doDraw=function(){if(null!=this._model){var t=[0,0,D.canvas.width,D.canvas.height];this.getRenderer().setRenderState(D.frameBuffer,t),this.getRenderer().drawModel()}},e.prototype.draw=function(t){null!=this._model&&this._state==s.CompleteSetup&&(t.multiplyByMatrix(this._modelMatrix),this.getRenderer().setMvpMatrix(t),this.doDraw())},e}(P);e.LAppModel=F},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(0),n=r(37),o=r(39),a=r(40),s=r(41),u=r(43),l=r(46),c=r(47),f=r(48),h=r(50),p=r(19),g=r(20),d=r(53),m=r(2),_=d.Live2DCubismFramework.CubismRenderer_WebGL,y=g.Live2DCubismFramework.CubismEyeBlink,b=p.Live2DCubismFramework.CubismBreath,v=i.Live2DCubismFramework.Constant,A=h.Live2DCubismFramework.CubismPhysics,w=f.Live2DCubismFramework.CubismModelUserData,C=c.Live2DCubismFramework.CubismPose,S=l.Live2DCubismFramework.CubismExpressionMotion,x=u.Live2DCubismFramework.CubismMotion,M=s.Live2DCubismFramework.CubismMoc,P=a.Live2DCubismFramework.CubismModelMatrix,L=o.Live2DCubismFramework.CubismTargetPoint,k=n.Live2DCubismFramework.CubismMotionManager;!function(t){var e=function(){function t(){this.loadMotion=function(t,e,r,i){return x.create(t,e,i)},this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._debugMode=!1,this._renderer=null,this._motionManager=new k,this._motionManager.setEventCallback(t.cubismDefaultMotionEventCallback,this),this._expressionManager=new k,this._dragManager=new L}return t.prototype.isInitialized=function(){return this._initialized},t.prototype.setInitialized=function(t){this._initialized=t},t.prototype.isUpdating=function(){return this._updating},t.prototype.setUpdating=function(t){this._updating=t},t.prototype.setDragging=function(t,e){this._dragManager.set(t,e)},t.prototype.setAcceleration=function(t,e,r){this._accelerationX=t,this._accelerationY=e,this._accelerationZ=r},t.prototype.getModelMatrix=function(){return this._modelMatrix},t.prototype.setOpacity=function(t){this._opacity=t},t.prototype.getOpacity=function(){return this._opacity},t.prototype.loadModel=function(t){this._moc=M.create(t),this._model=this._moc.createModel(),this._model.saveParameters(),null!=this._moc&&null!=this._model?this._modelMatrix=new P(this._model.getCanvasWidth(),this._model.getCanvasHeight()):m.CubismLogError("Failed to CreateModel().")},t.prototype.loadExpression=function(t,e,r){return S.create(t,e)},t.prototype.loadPose=function(t,e){this._pose=C.create(t,e)},t.prototype.loadUserData=function(t,e){this._modelUserData=w.create(t,e)},t.prototype.loadPhysics=function(t,e){this._physics=A.create(t,e)},t.prototype.isHit=function(t,e,r){var i=this._model.getDrawableIndex(t);if(i<0)return!1;for(var n=this._model.getDrawableVertexCount(i),o=this._model.getDrawableVertices(i),a=o[0],s=o[0],u=o[1],l=o[1],c=1;c<n;++c){var f=o[v.vertexOffset+c*v.vertexStep],h=o[v.vertexOffset+c*v.vertexStep+1];f<a&&(a=f),f>s&&(s=f),h<u&&(u=h),h>l&&(l=h)}var p=this._modelMatrix.invertTransformX(e),g=this._modelMatrix.invertTransformY(r);return a<=p&&p<=s&&u<=g&&g<=l},t.prototype.getModel=function(){return this._model},t.prototype.getRenderer=function(){return this._renderer},t.prototype.createRenderer=function(){this._renderer&&this.deleteRenderer(),this._renderer=new _,this._renderer.initialize(this._model)},t.prototype.deleteRenderer=function(){null!=this._renderer&&(this._renderer.release(),this._renderer=null)},t.prototype.motionEventFired=function(t){m.CubismLogInfo("{0}",t.s)},t.cubismDefaultMotionEventCallback=function(t,e,r){null!=r&&r.motionEventFired(e)},t.prototype.release=function(){null!=this._motionManager&&(this._motionManager.release(),this._motionManager=null),null!=this._expressionManager&&(this._expressionManager.release(),this._expressionManager=null),null!=this._moc&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,C.delete(this._pose),y.delete(this._eyeBlink),b.delete(this._breath),this._dragManager=null,A.delete(this._physics),w.delete(this._modelUserData),this.deleteRenderer()},t}();t.CubismUserModel=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var n=r(18).Live2DCubismFramework.CubismMotionQueueManager;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._currentPriority=0,e._reservePriority=0,e}return i(e,t),e.prototype.getCurrentPriority=function(){return this._currentPriority},e.prototype.getReservePriority=function(){return this._reservePriority},e.prototype.setReservePriority=function(t){this._reservePriority=t},e.prototype.startMotionPriority=function(e,r,i){return i==this._reservePriority&&(this._reservePriority=0),this._currentPriority=i,t.prototype.startMotion.call(this,e,r,this._userTimeSeconds)},e.prototype.updateMotion=function(e,r){this._userTimeSeconds+=r;var i=t.prototype.doUpdateMotion.call(this,e,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),i},e.prototype.reserveMotion=function(t){return!(t<=this._reservePriority||t<=this._currentPriority||(this._reservePriority=t,0))},e}(n);t.CubismMotionManager=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(9).Live2DCubismFramework.ACubismMotion;!function(t){var e=function(){function t(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this}return t.prototype.release=function(){this._autoDelete&&this._motion&&i.delete(this._motion)},t.prototype.startFadeout=function(t,e){var r=e+t;(this._endTimeSeconds<0||r<this._endTimeSeconds)&&(this._endTimeSeconds=r)},t.prototype.isFinished=function(){return this._finished},t.prototype.isStarted=function(){return this._started},t.prototype.getStartTime=function(){return this._startTimeSeconds},t.prototype.getFadeInStartTime=function(){return this._fadeInStartTimeSeconds},t.prototype.getEndTime=function(){return this._endTimeSeconds},t.prototype.setStartTime=function(t){this._startTimeSeconds=t},t.prototype.setFadeInStartTime=function(t){this._fadeInStartTimeSeconds=t},t.prototype.setEndTime=function(t){this._endTimeSeconds=t},t.prototype.setIsFinished=function(t){this._finished=t},t.prototype.setIsStarted=function(t){this._started=t},t.prototype.isAvailable=function(){return this._available},t.prototype.setIsAvailable=function(t){this._available=t},t.prototype.setState=function(t,e){this._stateTimeSeconds=t,this._stateWeight=e},t.prototype.getStateTime=function(){return this._stateTimeSeconds},t.prototype.getStateWeight=function(){return this._stateWeight},t.prototype.getLastCheckEventTime=function(){return this._lastEventCheckSeconds},t.prototype.setLastCheckEventTime=function(t){this._lastEventCheckSeconds=t},t}();t.CubismMotionQueueEntry=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(10).Live2DCubismFramework.CubismMath;!function(t){var e=function(){function t(){this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}return t.prototype.update=function(t){if(this._userTimeSeconds+=t,0!=this._lastTimeSeconds){var e=30*(this._userTimeSeconds-this._lastTimeSeconds);this._lastTimeSeconds=this._userTimeSeconds;var r=e*(4/30)/4.5,n=this._faceTargetX-this._faceX,o=this._faceTargetY-this._faceY;if(!(i.abs(n)<=.01&&i.abs(o)<=.01)){var a=i.sqrt(n*n+o*o),s=4/30*o/a,u=4/30*n/a-this._faceVX,l=s-this._faceVY,c=i.sqrt(u*u+l*l);(c<-r||c>r)&&(u*=r/c,l*=r/c),this._faceVX+=u,this._faceVY+=l;var f=.5*(i.sqrt(r*r+16*r*a-8*r*a)-r),h=i.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);h>f&&(this._faceVX*=f/h,this._faceVY*=f/h),this._faceX+=this._faceVX,this._faceY+=this._faceVY}}else this._lastTimeSeconds=this._userTimeSeconds},t.prototype.getX=function(){return this._faceX},t.prototype.getY=function(){return this._faceY},t.prototype.set=function(t,e){this._faceTargetX=t,this._faceTargetY=e},t}();t.CubismTargetPoint=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var n=r(4).Live2DCubismFramework.CubismMatrix44;!function(t){var e=function(t){function e(e,r){var i=t.call(this)||this;return i._width=void 0!==e?e:0,i._height=void 0!==r?r:0,i.setHeight(1),i}return i(e,t),e.prototype.setWidth=function(t){var e=t/this._width,r=e;this.scale(e,r)},e.prototype.setHeight=function(t){var e=t/this._height,r=e;this.scale(e,r)},e.prototype.setPosition=function(t,e){this.translate(t,e)},e.prototype.setCenterPosition=function(t,e){this.centerX(t),this.centerY(e)},e.prototype.top=function(t){this.setY(t)},e.prototype.bottom=function(t){var e=this._height*this.getScaleY();this.translateY(t-e)},e.prototype.left=function(t){this.setX(t)},e.prototype.right=function(t){var e=this._width*this.getScaleX();this.translateX(t-e)},e.prototype.centerX=function(t){var e=this._width*this.getScaleX();this.translateX(t-e/2)},e.prototype.setX=function(t){this.translateX(t)},e.prototype.centerY=function(t){var e=this._height*this.getScaleY();this.translateY(t-e/2)},e.prototype.setY=function(t){this.translateY(t)},e.prototype.setupFromLayout=function(t){for(var e=t.begin();e.notEqual(t.end());e.preIncrement()){var r=e.ptr().first,i=e.ptr().second;"width"==r?this.setWidth(i):"height"==r&&this.setHeight(i)}for(e=t.begin();e.notEqual(t.end());e.preIncrement())r=e.ptr().first,i=e.ptr().second,"x"==r?this.setX(i):"y"==r?this.setY(i):"center_x"==r?this.centerX(i):"center_y"==r?this.centerY(i):"top"==r?this.top(i):"bottom"==r?this.bottom(i):"left"==r?this.left(i):"right"==r&&this.right(i)},e}(n);t.CubismModelMatrix=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(42).Live2DCubismFramework.CubismModel,n=r(2);!function(t){var e=function(){function t(t){this._moc=t,this._modelCount=0}return t.create=function(e){var r=null,i=Live2DCubismCore.Moc.fromArrayBuffer(e);return i&&(r=new t(i)),r},t.delete=function(t){t._moc._release(),t._moc=null,t=null},t.prototype.createModel=function(){var t=null,e=Live2DCubismCore.Model.fromMoc(this._moc);return e&&((t=new i(e)).initialize(),++this._modelCount),t},t.prototype.deleteModel=function(t){null!=t&&(t.release(),t=null,--this._modelCount)},t.prototype.release=function(){n.CSM_ASSERT(0==this._modelCount),this._moc._release(),this._moc=null},t}();t.CubismMoc=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(15),n=r(0),o=r(8),a=r(1),s=r(2),u=n.Live2DCubismFramework.CubismFramework,l=i.Live2DCubismFramework.CubismBlendMode,c=a.Live2DCubismFramework.csmVector,f=o.Live2DCubismFramework.csmMap;!function(t){var e=function(){function t(t){this._model=t,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new c,this._parameterIds=new c,this._drawableIds=new c,this._partIds=new c,this._notExistPartId=new f,this._notExistParameterId=new f,this._notExistParameterValues=new f,this._notExistPartOpacities=new f}return t.prototype.update=function(){this._model.update(),this._model.drawables.resetDynamicFlags()},t.prototype.getCanvasWidth=function(){return null==this._model?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit},t.prototype.getCanvasHeight=function(){return null==this._model?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit},t.prototype.saveParameters=function(){for(var t=this._model.parameters.count,e=this._savedParameters.getSize(),r=0;r<t;++r)r<e?this._savedParameters.set(r,this._parameterValues[r]):this._savedParameters.pushBack(this._parameterValues[r])},t.prototype.getModel=function(){return this._model},t.prototype.getPartIndex=function(t){var e,r=this._model.parts.count;for(e=0;e<r;++e)if(t==this._partIds.at(e))return e;return this._notExistPartId.isExist(t)?this._notExistPartId.getValue(t):(e=r+this._notExistPartId.getSize(),this._notExistPartId.setValue(t,e),this._notExistPartOpacities.appendKey(e),e)},t.prototype.getPartCount=function(){return this._model.parts.count},t.prototype.setPartOpacityByIndex=function(t,e){this._notExistPartOpacities.isExist(t)?this._notExistPartOpacities.setValue(t,e):(s.CSM_ASSERT(0<=t&&t<this.getPartCount()),this._partOpacities[t]=e)},t.prototype.setPartOpacityById=function(t,e){var r=this.getPartIndex(t);r<0||this.setPartOpacityByIndex(r,e)},t.prototype.getPartOpacityByIndex=function(t){return this._notExistPartOpacities.isExist(t)?this._notExistPartOpacities.getValue(t):(s.CSM_ASSERT(0<=t&&t<this.getPartCount()),this._partOpacities[t])},t.prototype.getPartOpacityById=function(t){var e=this.getPartIndex(t);return e<0?0:this.getPartOpacityByIndex(e)},t.prototype.getParameterIndex=function(t){var e,r=this._model.parameters.count;for(e=0;e<r;++e)if(t==this._parameterIds.at(e))return e;return this._notExistParameterId.isExist(t)?this._notExistParameterId.getValue(t):(e=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(t,e),this._notExistParameterValues.appendKey(e),e)},t.prototype.getParameterCount=function(){return this._model.parameters.count},t.prototype.getParameterMaximumValue=function(t){return this._model.parameters.maximumValues[t]},t.prototype.getParameterMinimumValue=function(t){return this._model.parameters.minimumValues[t]},t.prototype.getParameterDefaultValue=function(t){return this._model.parameters.defaultValues[t]},t.prototype.getParameterValueByIndex=function(t){return this._notExistParameterValues.isExist(t)?this._notExistParameterValues.getValue(t):(s.CSM_ASSERT(0<=t&&t<this.getParameterCount()),this._parameterValues[t])},t.prototype.getParameterValueById=function(t){var e=this.getParameterIndex(t);return this.getParameterValueByIndex(e)},t.prototype.setParameterValueByIndex=function(t,e,r){void 0===r&&(r=1),this._notExistParameterValues.isExist(t)?this._notExistParameterValues.setValue(t,1==r?e:this._notExistParameterValues.getValue(t)*(1-r)+e*r):(s.CSM_ASSERT(0<=t&&t<this.getParameterCount()),this._model.parameters.maximumValues[t]<e&&(e=this._model.parameters.maximumValues[t]),this._model.parameters.minimumValues[t]>e&&(e=this._model.parameters.minimumValues[t]),this._parameterValues[t]=1==r?e:this._parameterValues[t]=this._parameterValues[t]*(1-r)+e*r)},t.prototype.setParameterValueById=function(t,e,r){void 0===r&&(r=1);var i=this.getParameterIndex(t);this.setParameterValueByIndex(i,e,r)},t.prototype.addParameterValueByIndex=function(t,e,r){void 0===r&&(r=1),this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)+e*r)},t.prototype.addParameterValueById=function(t,e,r){void 0===r&&(r=1);var i=this.getParameterIndex(t);this.addParameterValueByIndex(i,e,r)},t.prototype.multiplyParameterValueById=function(t,e,r){void 0===r&&(r=1);var i=this.getParameterIndex(t);this.multiplyParameterValueByIndex(i,e,r)},t.prototype.multiplyParameterValueByIndex=function(t,e,r){void 0===r&&(r=1),this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)*(1+(e-1)*r))},t.prototype.getDrawableIndex=function(t){for(var e=this._model.drawables.count,r=0;r<e;++r)if(this._drawableIds.at(r)==t)return r;return-1},t.prototype.getDrawableCount=function(){return this._model.drawables.count},t.prototype.getDrawableId=function(t){var e=this._model.drawables.ids;return u.getIdManager().getId(e[t])},t.prototype.getDrawableRenderOrders=function(){return this._model.drawables.renderOrders},t.prototype.getDrawableTextureIndices=function(t){return this._model.drawables.textureIndices[t]},t.prototype.getDrawableDynamicFlagVertexPositionsDidChange=function(t){var e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(e[t])},t.prototype.getDrawableVertexIndexCount=function(t){return this._model.drawables.indexCounts[t]},t.prototype.getDrawableVertexCount=function(t){return this._model.drawables.vertexCounts[t]},t.prototype.getDrawableVertices=function(t){return this.getDrawableVertexPositions(t)},t.prototype.getDrawableVertexIndices=function(t){return this._model.drawables.indices[t]},t.prototype.getDrawableVertexPositions=function(t){return this._model.drawables.vertexPositions[t]},t.prototype.getDrawableVertexUvs=function(t){return this._model.drawables.vertexUvs[t]},t.prototype.getDrawableOpacity=function(t){return this._model.drawables.opacities[t]},t.prototype.getDrawableCulling=function(t){var e=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(e[t])},t.prototype.getDrawableBlendMode=function(t){var e=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(e[t])?l.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(e[t])?l.CubismBlendMode_Multiplicative:l.CubismBlendMode_Normal},t.prototype.getDrawableInvertedMaskBit=function(t){var e=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(e[t])},t.prototype.getDrawableMasks=function(){return this._model.drawables.masks},t.prototype.getDrawableMaskCounts=function(){return this._model.drawables.maskCounts},t.prototype.isUsingMasking=function(){for(var t=0;t<this._model.drawables.count;++t)if(!(this._model.drawables.maskCounts[t]<=0))return!0;return!1},t.prototype.getDrawableDynamicFlagIsVisible=function(t){var e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(e[t])},t.prototype.getDrawableDynamicFlagVisibilityDidChange=function(t){var e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(e[t])},t.prototype.getDrawableDynamicFlagOpacityDidChange=function(t){var e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(e[t])},t.prototype.getDrawableDynamicFlagRenderOrderDidChange=function(t){var e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(e[t])},t.prototype.loadParameters=function(){var t=this._model.parameters.count,e=this._savedParameters.getSize();t>e&&(t=e);for(var r=0;r<t;++r)this._parameterValues[r]=this._savedParameters.at(r)},t.prototype.initialize=function(){s.CSM_ASSERT(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;var t=this._model.parameters.ids,e=this._model.parameters.count;this._parameterIds.prepareCapacity(e);for(var r=0;r<e;++r)this._parameterIds.pushBack(u.getIdManager().getId(t[r]));var i=this._model.parts.ids,n=this._model.parts.count;for(this._partIds.prepareCapacity(n),r=0;r<n;++r)this._partIds.pushBack(u.getIdManager().getId(i[r]));var o=this._model.drawables.ids,a=this._model.drawables.count;for(this._drawableIds.prepareCapacity(a),r=0;r<a;++r)this._drawableIds.pushBack(u.getIdManager().getId(o[r]))},t.prototype.release=function(){this._model.release(),this._model=null},t}();t.CubismModel=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var n=r(44),o=r(45),a=r(9),s=r(0),u=r(10),l=r(6),c=r(2),f=l.Live2DCubismFramework.csmString,h=o.Live2DCubismFramework.CubismMotionData,p=o.Live2DCubismFramework.CubismMotionSegment,g=o.Live2DCubismFramework.CubismMotionPoint,d=o.Live2DCubismFramework.CubismMotionEvent,m=o.Live2DCubismFramework.CubismMotionSegmentType,_=o.Live2DCubismFramework.CubismMotionCurve,y=o.Live2DCubismFramework.CubismMotionCurveTarget,b=u.Live2DCubismFramework.CubismMath,v=s.Live2DCubismFramework.CubismFramework,A=a.Live2DCubismFramework.ACubismMotion,w=n.Live2DCubismFramework.CubismMotionJson;!function(t){function e(t,e,r){var i=new g;return i.time=t.time+(e.time-t.time)*r,i.value=t.value+(e.value-t.value)*r,i}function r(t,e){var r=(e-t[0].time)/(t[1].time-t[0].time);return r<0&&(r=0),t[0].value+(t[1].value-t[0].value)*r}function n(t,r){var i=(r-t[0].time)/(t[3].time-t[0].time);i<0&&(i=0);var n=e(t[0],t[1],i),o=e(t[1],t[2],i),a=e(t[2],t[3],i);return e(e(n,o,i),e(o,a,i),i).value}function o(t,e){return t[0].value}function a(t,e){return t[1].value}function s(t,e,r){for(var i=t.curves.at(e),n=-1,o=i.baseSegmentIndex+i.segmentCount,a=0,s=i.baseSegmentIndex;s<o;++s)if(a=t.segments.at(s).basePointIndex+(t.segments.at(s).segmentType==m.CubismMotionSegmentType_Bezier?3:1),t.points.at(a).time>r){n=s;break}if(-1==n)return t.points.at(a).value;var u=t.segments.at(n);return u.evaluate(t.points.get(u.basePointIndex),r)}var u=function(t){function e(){var e=t.call(this)||this;return e._sourceFrameRate=30,e._loopDurationSeconds=-1,e._isLoop=!1,e._isLoopFadeIn=!0,e._lastWeight=0,e._motionData=null,e._modelCurveIdEyeBlink=null,e._modelCurveIdLipSync=null,e._eyeBlinkParameterIds=null,e._lipSyncParameterIds=null,e}return i(e,t),e.create=function(t,r,i){var n=new e;return n.parse(t,r),n._sourceFrameRate=n._motionData.fps,n._loopDurationSeconds=n._motionData.duration,n._onFinishedMotion=i,n},e.prototype.doUpdateParameters=function(t,e,r,i){null==this._modelCurveIdEyeBlink&&(this._modelCurveIdEyeBlink=v.getIdManager().getId("EyeBlink")),null==this._modelCurveIdLipSync&&(this._modelCurveIdLipSync=v.getIdManager().getId("LipSync"));var n=e-i.getStartTime();n<0&&(n=0);var o=Number.MAX_VALUE,a=Number.MAX_VALUE,u=0,l=0;this._eyeBlinkParameterIds.getSize()>64&&c.CubismLogDebug("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>64&&c.CubismLogDebug("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());var f,h,p,g=this._fadeInSeconds<=0?1:b.getEasingSine((e-i.getFadeInStartTime())/this._fadeInSeconds),d=this._fadeOutSeconds<=0||i.getEndTime()<0?1:b.getEasingSine((i.getEndTime()-e)/this._fadeOutSeconds),m=n;if(this._isLoop)for(;m>this._motionData.duration;)m-=this._motionData.duration;var _=this._motionData.curves;for(h=0;h<this._motionData.curveCount&&_.at(h).type==y.CubismMotionCurveTarget_Model;++h)f=s(this._motionData,h,m),_.at(h).id==this._modelCurveIdEyeBlink?a=f:_.at(h).id==this._modelCurveIdLipSync&&(o=f);for(;h<this._motionData.curveCount&&_.at(h).type==y.CubismMotionCurveTarget_Parameter;++h)if(-1!=(p=t.getParameterIndex(_.at(h).id))){var A=t.getParameterValueByIndex(p);if(f=s(this._motionData,h,m),a!=Number.MAX_VALUE)for(var w=0;w<this._eyeBlinkParameterIds.getSize()&&w<64;++w)if(this._eyeBlinkParameterIds.at(w)==_.at(h).id){f*=a,l|=1<<w;break}if(o!=Number.MAX_VALUE)for(w=0;w<this._lipSyncParameterIds.getSize()&&w<64;++w)if(this._lipSyncParameterIds.at(w)==_.at(h).id){f+=o,u|=1<<w;break}var C=void 0;if(_.at(h).fadeInTime<0&&_.at(h).fadeOutTime<0)C=A+(f-A)*r;else{var S,x;S=_.at(h).fadeInTime<0?g:0==_.at(h).fadeInTime?1:b.getEasingSine((e-i.getFadeInStartTime())/_.at(h).fadeInTime),x=_.at(h).fadeOutTime<0?d:0==_.at(h).fadeOutTime||i.getEndTime()<0?1:b.getEasingSine((i.getEndTime()-e)/_.at(h).fadeOutTime),C=A+(f-A)*(this._weight*S*x)}t.setParameterValueByIndex(p,C,1)}if(a!=Number.MAX_VALUE)for(w=0;w<this._eyeBlinkParameterIds.getSize()&&w<64;++w)A=t.getParameterValueById(this._eyeBlinkParameterIds.at(w)),l>>w&1||(C=A+(a-A)*r,t.setParameterValueById(this._eyeBlinkParameterIds.at(w),C));if(o!=Number.MAX_VALUE)for(w=0;w<this._lipSyncParameterIds.getSize()&&w<64;++w)A=t.getParameterValueById(this._lipSyncParameterIds.at(w)),u>>w&1||(C=A+(o-A)*r,t.setParameterValueById(this._lipSyncParameterIds.at(w),C));for(;h<this._motionData.curveCount&&_.at(h).type==y.CubismMotionCurveTarget_PartOpacity;++h)-1!=(p=t.getParameterIndex(_.at(h).id))&&(f=s(this._motionData,h,m),t.setParameterValueByIndex(p,f));n>=this._motionData.duration&&(this._isLoop?(i.setStartTime(e),this._isLoopFadeIn&&i.setFadeInStartTime(e)):(this._onFinishedMotion&&this._onFinishedMotion(this),i.setIsFinished(!0))),this._lastWeight=r},e.prototype.setIsLoop=function(t){this._isLoop=t},e.prototype.isLoop=function(){return this._isLoop},e.prototype.setIsLoopFadeIn=function(t){this._isLoopFadeIn=t},e.prototype.isLoopFadeIn=function(){return this._isLoopFadeIn},e.prototype.getDuration=function(){return this._isLoop?-1:this._loopDurationSeconds},e.prototype.getLoopDuration=function(){return this._loopDurationSeconds},e.prototype.setParameterFadeInTime=function(t,e){for(var r=this._motionData.curves,i=0;i<this._motionData.curveCount;++i)if(t==r.at(i).id)return void(r.at(i).fadeInTime=e)},e.prototype.setParameterFadeOutTime=function(t,e){for(var r=this._motionData.curves,i=0;i<this._motionData.curveCount;++i)if(t==r.at(i).id)return void(r.at(i).fadeOutTime=e)},e.prototype.getParameterFadeInTime=function(t){for(var e=this._motionData.curves,r=0;r<this._motionData.curveCount;++r)if(t==e.at(r).id)return e.at(r).fadeInTime;return-1},e.prototype.getParameterFadeOutTime=function(t){for(var e=this._motionData.curves,r=0;r<this._motionData.curveCount;++r)if(t==e.at(r).id)return e.at(r).fadeOutTime;return-1},e.prototype.setEffectIds=function(t,e){this._eyeBlinkParameterIds=t,this._lipSyncParameterIds=e},e.prototype.release=function(){this._motionData=void 0,this._motionData=null},e.prototype.parse=function(t,e){this._motionData=new h;var i=new w(t,e);this._motionData.duration=i.getMotionDuration(),this._motionData.loop=i.isMotionLoop(),this._motionData.curveCount=i.getMotionCurveCount(),this._motionData.fps=i.getMotionFps(),this._motionData.eventCount=i.getEventCount(),i.isExistMotionFadeInTime()?this._fadeInSeconds=i.getMotionFadeInTime()<0?1:i.getMotionFadeInTime():this._fadeInSeconds=1,i.isExistMotionFadeOutTime()?this._fadeOutSeconds=i.getMotionFadeOutTime()<0?1:i.getMotionFadeOutTime():this._fadeOutSeconds=1,this._motionData.curves.updateSize(this._motionData.curveCount,_,!0),this._motionData.segments.updateSize(i.getMotionTotalSegmentCount(),p,!0),this._motionData.points.updateSize(i.getMotionTotalPointCount(),g,!0),this._motionData.events.updateSize(this._motionData.eventCount,d,!0);for(var s=0,u=0,l=0;l<this._motionData.curveCount;++l){"Model"==i.getMotionCurveTarget(l)?this._motionData.curves.at(l).type=y.CubismMotionCurveTarget_Model:"Parameter"==i.getMotionCurveTarget(l)?this._motionData.curves.at(l).type=y.CubismMotionCurveTarget_Parameter:"PartOpacity"==i.getMotionCurveTarget(l)&&(this._motionData.curves.at(l).type=y.CubismMotionCurveTarget_PartOpacity),this._motionData.curves.at(l).id=i.getMotionCurveId(l),this._motionData.curves.at(l).baseSegmentIndex=u,this._motionData.curves.at(l).fadeInTime=i.isExistMotionCurveFadeInTime(l)?i.getMotionCurveFadeInTime(l):-1,this._motionData.curves.at(l).fadeOutTime=i.isExistMotionCurveFadeOutTime(l)?i.getMotionCurveFadeOutTime(l):-1;for(var f=0;f<i.getMotionCurveSegmentCount(l);){0==f?(this._motionData.segments.at(u).basePointIndex=s,this._motionData.points.at(s).time=i.getMotionCurveSegment(l,f),this._motionData.points.at(s).value=i.getMotionCurveSegment(l,f+1),s+=1,f+=2):this._motionData.segments.at(u).basePointIndex=s-1;var b=i.getMotionCurveSegment(l,f);switch(console.log(s),b){case m.CubismMotionSegmentType_Linear:this._motionData.segments.at(u).segmentType=m.CubismMotionSegmentType_Linear,this._motionData.segments.at(u).evaluate=r,this._motionData.points.at(s).time=i.getMotionCurveSegment(l,f+1),this._motionData.points.at(s).value=i.getMotionCurveSegment(l,f+2),s+=1,f+=3;break;case m.CubismMotionSegmentType_Bezier:this._motionData.segments.at(u).segmentType=m.CubismMotionSegmentType_Bezier,this._motionData.segments.at(u).evaluate=n,this._motionData.points.at(s).time=i.getMotionCurveSegment(l,f+1),this._motionData.points.at(s).value=i.getMotionCurveSegment(l,f+2),this._motionData.points.at(s+1).time=i.getMotionCurveSegment(l,f+3),this._motionData.points.at(s+1).value=i.getMotionCurveSegment(l,f+4),this._motionData.points.at(s+2).time=i.getMotionCurveSegment(l,f+5),this._motionData.points.at(s+2).value=i.getMotionCurveSegment(l,f+6),s+=3,f+=7;break;case m.CubismMotionSegmentType_Stepped:this._motionData.segments.at(u).segmentType=m.CubismMotionSegmentType_Stepped,this._motionData.segments.at(u).evaluate=o,this._motionData.points.at(s).time=i.getMotionCurveSegment(l,f+1),this._motionData.points.at(s).value=i.getMotionCurveSegment(l,f+2),s+=1,f+=3;break;case m.CubismMotionSegmentType_InverseStepped:this._motionData.segments.at(u).segmentType=m.CubismMotionSegmentType_InverseStepped,this._motionData.segments.at(u).evaluate=a,this._motionData.points.at(s).time=i.getMotionCurveSegment(l,f+1),this._motionData.points.at(s).value=i.getMotionCurveSegment(l,f+2),s+=1,f+=3;break;default:c.CSM_ASSERT(0)}++this._motionData.curves.at(l).segmentCount,++u}}for(var v=0;v<i.getEventCount();++v)this._motionData.events.at(v).fireTime=i.getEventTime(v),this._motionData.events.at(v).value=i.getEventValue(v);i.release(),i=void 0,i=null},e.prototype.getFiredEvent=function(t,e){this._firedEventValues.updateSize(0);for(var r=0;r<this._motionData.eventCount;++r)this._motionData.events.at(r).fireTime>t&&this._motionData.events.at(r).fireTime<=e&&this._firedEventValues.pushBack(new f(this._motionData.events.at(r).value.s));return this._firedEventValues},e}(A);t.CubismMotion=u}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(3),n=r(0),o=r(6).Live2DCubismFramework.csmString,a=n.Live2DCubismFramework.CubismFramework,s=i.Live2DCubismFramework.CubismJson;!function(t){var e="Curves",r="FadeInTime",i="FadeOutTime",n=function(){function t(t,e){this._json=s.create(t,e)}return t.prototype.release=function(){s.delete(this._json)},t.prototype.getMotionDuration=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("Duration").toFloat()},t.prototype.isMotionLoop=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("Loop").toBoolean()},t.prototype.getMotionCurveCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("CurveCount").toInt()},t.prototype.getMotionFps=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("Fps").toFloat()},t.prototype.getMotionTotalSegmentCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("TotalSegmentCount").toInt()},t.prototype.getMotionTotalPointCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("TotalPointCount").toInt()},t.prototype.isExistMotionFadeInTime=function(){return!this._json.getRoot().getValueByString("Meta").getValueByString(r).isNull()},t.prototype.isExistMotionFadeOutTime=function(){return!this._json.getRoot().getValueByString("Meta").getValueByString(i).isNull()},t.prototype.getMotionFadeInTime=function(){return this._json.getRoot().getValueByString("Meta").getValueByString(r).toFloat()},t.prototype.getMotionFadeOutTime=function(){return this._json.getRoot().getValueByString("Meta").getValueByString(i).toFloat()},t.prototype.getMotionCurveTarget=function(t){return this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString("Target").getRawString()},t.prototype.getMotionCurveId=function(t){return a.getIdManager().getId(this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString("Id").getRawString())},t.prototype.isExistMotionCurveFadeInTime=function(t){return!this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString(r).isNull()},t.prototype.isExistMotionCurveFadeOutTime=function(t){return!this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString(i).isNull()},t.prototype.getMotionCurveFadeInTime=function(t){return this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString(r).toFloat()},t.prototype.getMotionCurveFadeOutTime=function(t){return this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString(i).toFloat()},t.prototype.getMotionCurveSegmentCount=function(t){return this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString("Segments").getVector().getSize()},t.prototype.getMotionCurveSegment=function(t,r){return this._json.getRoot().getValueByString(e).getValueByIndex(t).getValueByString("Segments").getValueByIndex(r).toFloat()},t.prototype.getEventCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("UserDataCount").toInt()},t.prototype.getTotalEventValueSize=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("TotalUserDataSize").toInt()},t.prototype.getEventTime=function(t){return this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Time").toInt()},t.prototype.getEventValue=function(t){return new o(this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Value").getRawString())},t}();t.CubismMotionJson=n}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(1).Live2DCubismFramework.csmVector;!function(t){var e,r;(r=e=t.CubismMotionCurveTarget||(t.CubismMotionCurveTarget={}))[r.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",r[r.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",r[r.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",(n=t.CubismMotionSegmentType||(t.CubismMotionSegmentType={}))[n.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",n[n.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",n[n.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",n[n.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped";var n,o=function(){this.time=0,this.value=0};t.CubismMotionPoint=o;var a=function(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0};t.CubismMotionSegment=a;var s=function(){this.type=e.CubismMotionCurveTarget_Model,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0};t.CubismMotionCurve=s;var u=function(){this.fireTime=0};t.CubismMotionEvent=u;var l=function(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new i,this.segments=new i,this.points=new i,this.events=new i};t.CubismMotionData=l}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var n=r(9),o=r(3),a=r(0),s=r(1).Live2DCubismFramework.csmVector,u=a.Live2DCubismFramework.CubismFramework,l=o.Live2DCubismFramework.CubismJson,c=n.Live2DCubismFramework.ACubismMotion;!function(t){var e,r=function(t){function r(){var e=t.call(this)||this;return e._parameters=new s,e}return i(r,t),r.create=function(t,i){var n=new r,a=l.create(t,i),s=a.getRoot();n.setFadeInTime(s.getValueByString("FadeInTime").toFloat(1)),n.setFadeOutTime(s.getValueByString("FadeOutTime").toFloat(1));var c=s.getValueByString("Parameters").getSize();n._parameters.prepareCapacity(c);for(var f=0;f<c;++f){var h,p=s.getValueByString("Parameters").getValueByIndex(f),g=u.getIdManager().getId(p.getValueByString("Id").getRawString()),d=p.getValueByString("Value").toFloat();h=p.getValueByString("Blend").isNull()||"Add"==p.getValueByString("Blend").getString()?e.ExpressionBlendType_Add:"Multiply"==p.getValueByString("Blend").getString()?e.ExpressionBlendType_Multiply:"Overwrite"==p.getValueByString("Blend").getString()?e.ExpressionBlendType_Overwrite:e.ExpressionBlendType_Add;var m=new o;m.parameterId=g,m.blendType=h,m.value=d,n._parameters.pushBack(m)}return l.delete(a),n},r.prototype.doUpdateParameters=function(t,r,i,n){for(var o=0;o<this._parameters.getSize();++o){var a=this._parameters.at(o);switch(a.blendType){case e.ExpressionBlendType_Add:t.addParameterValueById(a.parameterId,a.value,i);break;case e.ExpressionBlendType_Multiply:t.multiplyParameterValueById(a.parameterId,a.value,i);break;case e.ExpressionBlendType_Overwrite:t.setParameterValueById(a.parameterId,a.value,i)}}},r}(c);t.CubismExpressionMotion=r,(n=e=t.ExpressionBlendType||(t.ExpressionBlendType={}))[n.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",n[n.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",n[n.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite";var n,o=function(){};t.ExpressionParameter=o}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(1),n=r(0),o=r(3),a=i.Live2DCubismFramework.csmVector,s=n.Live2DCubismFramework.CubismFramework,u=o.Live2DCubismFramework.CubismJson;!function(t){var e=function(){function t(){this._fadeTimeSeconds=.5,this._lastModel=null,this._partGroups=new a,this._partGroupCounts=new a}return t.create=function(e,i){var n=new t,o=u.create(e,i),a=o.getRoot();a.getValueByString("FadeInTime").isNull()||(n._fadeTimeSeconds=a.getValueByString("FadeInTime").toFloat(.5),n._fadeTimeSeconds<=0&&(n._fadeTimeSeconds=.5));for(var l=a.getValueByString("Groups"),c=l.getSize(),f=0;f<c;++f){for(var h=l.getValueByIndex(f),p=h.getSize(),g=0,d=0;d<p;++d){var m=h.getValueByIndex(d),_=new r,y=s.getIdManager().getId(m.getValueByString("Id").getRawString());if(_.partId=y,!m.getValueByString("Link").isNull())for(var b=m.getValueByString("Link"),v=b.getSize(),A=0;A<v;++A){var w=new r,C=s.getIdManager().getId(b.getValueByIndex(A).getString());w.partId=C,_.link.pushBack(w)}n._partGroups.pushBack(_.clone()),++g}n._partGroupCounts.pushBack(g)}return u.delete(o),n},t.delete=function(t){null!=t&&(t=null)},t.prototype.updateParameters=function(t,e){t!=this._lastModel&&this.reset(t),this._lastModel=t,e<0&&(e=0);for(var r=0,i=0;i<this._partGroupCounts.getSize();i++){var n=this._partGroupCounts.at(i);this.doFade(t,e,r,n),r+=n}this.copyPartOpacities(t)},t.prototype.reset=function(t){for(var e=0,r=0;r<this._partGroupCounts.getSize();++r){for(var i=this._partGroupCounts.at(r),n=e;n<e+i;++n){this._partGroups.at(n).initialize(t);var o=this._partGroups.at(n).partIndex,a=this._partGroups.at(n).parameterIndex;if(!(o<0)){t.setPartOpacityByIndex(o,n==e?1:0),t.setParameterValueByIndex(a,n==e?1:0);for(var s=0;s<this._partGroups.at(n).link.getSize();++s)this._partGroups.at(n).link.at(s).initialize(t)}}e+=i}},t.prototype.copyPartOpacities=function(t){for(var e=0;e<this._partGroups.getSize();++e){var r=this._partGroups.at(e);if(0!=r.link.getSize())for(var i=this._partGroups.at(e).partIndex,n=t.getPartOpacityByIndex(i),o=0;o<r.link.getSize();++o){var a=r.link.at(o).partIndex;a<0||t.setPartOpacityByIndex(a,n)}}},t.prototype.doFade=function(t,e,r,i){for(var n=-1,o=1,a=r;a<r+i;++a){var s=this._partGroups.at(a).partIndex,u=this._partGroups.at(a).parameterIndex;if(t.getParameterValueByIndex(u)>.001){if(n>=0)break;n=a,o=t.getPartOpacityByIndex(s),(o+=e/this._fadeTimeSeconds)>1&&(o=1)}}for(n<0&&(n=0,o=1),a=r;a<r+i;++a){var l=this._partGroups.at(a).partIndex;if(n==a)t.setPartOpacityByIndex(l,o);else{var c=t.getPartOpacityByIndex(l),f=void 0;(1-(f=o<.5?-.5*o/.5+1:.5*(1-o)/.5))*(1-o)>.15&&(f=1-.15/(1-o)),c>f&&(c=f),t.setPartOpacityByIndex(l,c)}}},t}();t.CubismPose=e;var r=function(){function t(t){if(this.parameterIndex=0,this.partIndex=0,this.link=new a,null!=t){this.partId=t.partId;for(var e=t.link.begin();e.notEqual(t.link.end());e.preIncrement())this.link.pushBack(e.ptr().clone())}}return t.prototype.assignment=function(t){this.partId=t.partId;for(var e=t.link.begin();e.notEqual(t.link.end());e.preIncrement())this.link.pushBack(e.ptr().clone());return this},t.prototype.initialize=function(t){this.parameterIndex=t.getParameterIndex(this.partId),this.partIndex=t.getPartIndex(this.partId),t.setParameterValueByIndex(this.parameterIndex,1)},t.prototype.clone=function(){var e=new t;e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=new a;for(var r=this.link.begin();r.notEqual(this.link.end());r.increment())e.link.pushBack(r.ptr().clone());return e},t}();t.PartData=r}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(49),n=r(6),o=r(1),a=r(0).Live2DCubismFramework.CubismFramework,s=o.Live2DCubismFramework.csmVector,u=n.Live2DCubismFramework.csmString,l=i.Live2DCubismFramework.CubismModelUserDataJson;!function(t){var e=function(){};t.CubismModelUserDataNode=e;var r=function(){function t(){this._userDataNodes=new s,this._artMeshUserDataNode=new s}return t.create=function(e,r){var i=new t;return i.parseUserData(e,r),i},t.delete=function(t){null!=t&&(t.release(),t=null)},t.prototype.getArtMeshUserDatas=function(){return this._artMeshUserDataNode},t.prototype.parseUserData=function(t,r){for(var i=new l(t,r),n=a.getIdManager().getId("ArtMesh"),o=i.getUserDataCount(),s=0;s<o;s++){var c=new e;c.targetId=i.getUserDataId(s),c.targetType=a.getIdManager().getId(i.getUserDataTargetType(s)),c.value=new u(i.getUserDataValue(s)),this._userDataNodes.pushBack(c),c.targetType==n&&this._artMeshUserDataNode.pushBack(c)}i.release(),i=void 0},t.prototype.release=function(){for(var t=0;t<this._userDataNodes.getSize();++t)this._userDataNodes.set(t,null);this._userDataNodes=null},t}();t.CubismModelUserData=r}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(3),n=r(0).Live2DCubismFramework.CubismFramework,o=i.Live2DCubismFramework.CubismJson;!function(t){var e=function(){function t(t,e){this._json=o.create(t,e)}return t.prototype.release=function(){o.delete(this._json)},t.prototype.getUserDataCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("UserDataCount").toInt()},t.prototype.getTotalUserDataSize=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("TotalUserDataSize").toInt()},t.prototype.getUserDataTargetType=function(t){return this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Target").getRawString()},t.prototype.getUserDataId=function(t){return n.getIdManager().getId(this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Id").getRawString())},t.prototype.getUserDataValue=function(t){return this._json.getRoot().getValueByString("UserData").getValueByIndex(t).getValueByString("Value").getRawString()},t}();t.CubismModelUserDataJson=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(51),n=r(11),o=r(10),a=r(52).Live2DCubismFramework.CubismPhysicsJson,s=o.Live2DCubismFramework.CubismMath,u=i.Live2DCubismFramework.CubismPhysicsRig,l=i.Live2DCubismFramework.CubismPhysicsSubRig,c=i.Live2DCubismFramework.CubismPhysicsInput,f=i.Live2DCubismFramework.CubismPhysicsOutput,h=i.Live2DCubismFramework.CubismPhysicsParticle,p=i.Live2DCubismFramework.CubismPhysicsSource,g=i.Live2DCubismFramework.CubismPhysicsTargetType,d=n.Live2DCubismFramework.CubismVector2;!function(t){var e=function(){function t(){this._physicsRig=null,this._options=new r,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}return t.create=function(e,r){var i=new t;return i.parse(e,r),i._physicsRig.gravity.y=0,i},t.delete=function(t){null!=t&&(t.release(),t=null)},t.prototype.evaluate=function(t,e){var r,i,n,o,a,u,l,c,f,h,p,g,m=new d;f=t.getModel().parameters.values,h=t.getModel().parameters.maximumValues,p=t.getModel().parameters.minimumValues,g=t.getModel().parameters.defaultValues;for(var _=0;_<this._physicsRig.subRigCount;++_){r={angle:0},m.x=0,m.y=0,a=this._physicsRig.settings.at(_),u=this._physicsRig.inputs.get(a.baseInputIndex),l=this._physicsRig.outputs.get(a.baseOutputIndex),c=this._physicsRig.particles.get(a.baseParticleIndex);for(var y=0;y<a.inputCount;++y)i=u[y].weight/100,-1==u[y].sourceParameterIndex&&(u[y].sourceParameterIndex=t.getParameterIndex(u[y].source.id)),u[y].getNormalizedParameterValue(m,r,f[u[y].sourceParameterIndex],p[u[y].sourceParameterIndex],h[u[y].sourceParameterIndex],g[u[y].sourceParameterIndex],a.normalizationPosition,a.normalizationAngle,u[0].reflect,i);for(n=s.degreesToRadian(-r.angle),m.x=m.x*s.cos(n)-m.y*s.sin(n),m.y=m.x*s.sin(n)+m.y*s.cos(n),w(c,a.particleCount,m,r.angle,this._options.wind,.001*a.normalizationPosition.maximum,e,5),y=0;y<a.outputCount;++y){var b=l[y].vertexIndex;if(b<1||b>=a.particleCount)break;-1==l[y].destinationParameterIndex&&(l[y].destinationParameterIndex=t.getParameterIndex(l[y].destination.id));var v=new d;v.x=c[b].position.x-c[b-1].position.x,v.y=c[b].position.y-c[b-1].position.y,o=l[y].getValue(v,c,b,l[y].reflect,this._options.gravity);var A=l[y].destinationParameterIndex,S=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(f.subarray(A))):f.slice(A);C(S,p[A],h[A],o,l[y]);for(var x=A,M=0;x<f.length;x++,M++)f[x]=S[M]}}},t.prototype.setOptions=function(t){this._options=t},t.prototype.getOption=function(){return this._options},t.prototype.release=function(){this._physicsRig=void 0,this._physicsRig=null},t.prototype.parse=function(t,e){this._physicsRig=new u;var r=new a(t,e);this._physicsRig.gravity=r.getGravity(),this._physicsRig.wind=r.getWind(),this._physicsRig.subRigCount=r.getSubRigCount(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,l,!0),this._physicsRig.inputs.updateSize(r.getTotalInputCount(),c,!0),this._physicsRig.outputs.updateSize(r.getTotalOutputCount(),f,!0),this._physicsRig.particles.updateSize(r.getVertexCount(),h,!0);for(var s=0,d=0,w=0,C=0;C<this._physicsRig.settings.getSize();++C){this._physicsRig.settings.at(C).normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(C),this._physicsRig.settings.at(C).normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(C),this._physicsRig.settings.at(C).normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(C),this._physicsRig.settings.at(C).normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(C),this._physicsRig.settings.at(C).normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(C),this._physicsRig.settings.at(C).normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(C),this._physicsRig.settings.at(C).inputCount=r.getInputCount(C),this._physicsRig.settings.at(C).baseInputIndex=s;for(var S=0;S<this._physicsRig.settings.at(C).inputCount;++S)this._physicsRig.inputs.at(s+S).sourceParameterIndex=-1,this._physicsRig.inputs.at(s+S).weight=r.getInputWeight(C,S),this._physicsRig.inputs.at(s+S).reflect=r.getInputReflect(C,S),"X"==r.getInputType(C,S)?(this._physicsRig.inputs.at(s+S).type=p.CubismPhysicsSource_X,this._physicsRig.inputs.at(s+S).getNormalizedParameterValue=i):"Y"==r.getInputType(C,S)?(this._physicsRig.inputs.at(s+S).type=p.CubismPhysicsSource_Y,this._physicsRig.inputs.at(s+S).getNormalizedParameterValue=n):"Angle"==r.getInputType(C,S)&&(this._physicsRig.inputs.at(s+S).type=p.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(s+S).getNormalizedParameterValue=o),this._physicsRig.inputs.at(s+S).source.targetType=g.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(s+S).source.id=r.getInputSourceId(C,S);for(s+=this._physicsRig.settings.at(C).inputCount,this._physicsRig.settings.at(C).outputCount=r.getOutputCount(C),this._physicsRig.settings.at(C).baseOutputIndex=d,S=0;S<this._physicsRig.settings.at(C).outputCount;++S)this._physicsRig.outputs.at(d+S).destinationParameterIndex=-1,this._physicsRig.outputs.at(d+S).vertexIndex=r.getOutputVertexIndex(C,S),this._physicsRig.outputs.at(d+S).angleScale=r.getOutputAngleScale(C,S),this._physicsRig.outputs.at(d+S).weight=r.getOutputWeight(C,S),this._physicsRig.outputs.at(d+S).destination.targetType=g.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(d+S).destination.id=r.getOutputDestinationId(C,S),"X"==r.getOutputType(C,S)?(this._physicsRig.outputs.at(d+S).type=p.CubismPhysicsSource_X,this._physicsRig.outputs.at(d+S).getValue=m,this._physicsRig.outputs.at(d+S).getScale=b):"Y"==r.getOutputType(C,S)?(this._physicsRig.outputs.at(d+S).type=p.CubismPhysicsSource_Y,this._physicsRig.outputs.at(d+S).getValue=_,this._physicsRig.outputs.at(d+S).getScale=v):"Angle"==r.getOutputType(C,S)&&(this._physicsRig.outputs.at(d+S).type=p.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(d+S).getValue=y,this._physicsRig.outputs.at(d+S).getScale=A),this._physicsRig.outputs.at(d+S).reflect=r.getOutputReflect(C,S);for(d+=this._physicsRig.settings.at(C).outputCount,this._physicsRig.settings.at(C).particleCount=r.getParticleCount(C),this._physicsRig.settings.at(C).baseParticleIndex=w,S=0;S<this._physicsRig.settings.at(C).particleCount;++S)this._physicsRig.particles.at(w+S).mobility=r.getParticleMobility(C,S),this._physicsRig.particles.at(w+S).delay=r.getParticleDelay(C,S),this._physicsRig.particles.at(w+S).acceleration=r.getParticleAcceleration(C,S),this._physicsRig.particles.at(w+S).radius=r.getParticleRadius(C,S),this._physicsRig.particles.at(w+S).position=r.getParticlePosition(C,S);w+=this._physicsRig.settings.at(C).particleCount}this.initialize(),r.release(),r=void 0,r=null},t.prototype.initialize=function(){for(var t,e,r,i=0;i<this._physicsRig.subRigCount;++i){e=this._physicsRig.settings.at(i),(t=this._physicsRig.particles.get(e.baseParticleIndex))[0].initialPosition=new d(0,0),t[0].lastPosition=new d(t[0].initialPosition.x,t[0].initialPosition.y),t[0].lastGravity=new d(0,-1),t[0].lastGravity.y*=-1,t[0].velocity=new d(0,0),t[0].force=new d(0,0);for(var n=1;n<e.particleCount;++n)(r=new d(0,0)).y=t[n].radius,t[n].initialPosition=new d(t[n-1].initialPosition.x+r.x,t[n-1].initialPosition.y+r.y),t[n].position=new d(t[n].initialPosition.x,t[n].initialPosition.y),t[n].lastPosition=new d(t[n].initialPosition.x,t[n].initialPosition.y),t[n].lastGravity=new d(0,-1),t[n].lastGravity.y*=-1,t[n].velocity=new d(0,0),t[n].force=new d(0,0)}},t}();t.CubismPhysics=e;var r=function(){this.gravity=new d(0,0),this.wind=new d(0,0)};function i(t,e,r,i,n,o,a,s,u,l){t.x+=S(r,i,n,o,a.minimum,a.maximum,a.defalut,u)*l}function n(t,e,r,i,n,o,a,s,u,l){t.y+=S(r,i,n,o,a.minimum,a.maximum,a.defalut,u)*l}function o(t,e,r,i,n,o,a,s,u,l){e.angle+=S(r,i,n,o,s.minimum,s.maximum,s.defalut,u)*l}function m(t,e,r,i,n){var o=t.x;return i&&(o*=-1),o}function _(t,e,r,i,n){var o=t.y;return i&&(o*=-1),o}function y(t,e,r,i,n){var o;return n=r>=2?e[r-1].position.substract(e[r-2].position):n.multiplyByScaler(-1),o=s.directionToRadian(n,t),i&&(o*=-1),o}function b(t,e){return JSON.parse(JSON.stringify(t.x))}function v(t,e){return JSON.parse(JSON.stringify(t.y))}function A(t,e){return JSON.parse(JSON.stringify(e))}function w(t,e,r,i,n,o,a,u){var l,c,f,h,p=new d(0,0),g=new d(0,0),m=new d(0,0),_=new d(0,0);t[0].position=new d(r.x,r.y),l=s.degreesToRadian(i),(h=s.radianToDirection(l)).normalize();for(var y=1;y<e;++y)t[y].force=h.multiplyByScaler(t[y].acceleration).add(n),t[y].lastPosition=new d(t[y].position.x,t[y].position.y),c=t[y].delay*a*30,p=t[y].position.substract(t[y-1].position),f=s.directionToRadian(t[y].lastGravity,h)/u,p.x=s.cos(f)*p.x-p.y*s.sin(f),p.y=s.sin(f)*p.x+p.y*s.cos(f),t[y].position=t[y-1].position.add(p),g=t[y].velocity.multiplyByScaler(c),m=t[y].force.multiplyByScaler(c).multiplyByScaler(c),t[y].position=t[y].position.add(g).add(m),(_=t[y].position.substract(t[y-1].position)).normalize(),t[y].position=t[y-1].position.add(_.multiplyByScaler(t[y].radius)),s.abs(t[y].position.x)<o&&(t[y].position.x=0),0!=c&&(t[y].velocity=t[y].position.substract(t[y].lastPosition),t[y].velocity=t[y].velocity.divisionByScalar(c),t[y].velocity=t[y].velocity.multiplyByScaler(t[y].mobility)),t[y].force=new d(0,0),t[y].lastGravity=new d(h.x,h.y)}function C(t,e,r,i,n){var o,a;(o=i*n.getScale(n.translationScale,n.angleScale))<e?(o<n.valueBelowMinimum&&(n.valueBelowMinimum=o),o=e):o>r&&(o>n.valueExceededMaximum&&(n.valueExceededMaximum=o),o=r),(a=n.weight/100)>=1||(o=t[0]*(1-a)+o*a),t[0]=o}function S(t,e,r,i,n,o,a,u){var l=0,c=s.max(r,e);c<t&&(t=c);var f=s.min(r,e);f>t&&(t=f);var h=s.min(n,o),p=s.max(n,o),g=a,d=function(t,e){return s.min(t,e)+function(t,e){var r=s.max(t,e),i=s.min(t,e);return s.abs(r-i)}(t,e)/2}(f,c),m=t-d;switch(function(t){var e=0;return t>0?e=1:t<0&&(e=-1),e}(m)){case 1:var _=p-g;0!=(y=c-d)&&(l=m*(_/y),l+=g);break;case-1:var y;_=h-g,0!=(y=f-d)&&(l=m*(_/y),l+=g);break;case 0:l=g}return u?l:-1*l}t.Options=r}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(11),n=r(1).Live2DCubismFramework.csmVector,o=i.Live2DCubismFramework.CubismVector2;!function(t){var e;(e=t.CubismPhysicsTargetType||(t.CubismPhysicsTargetType={}))[e.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",(r=t.CubismPhysicsSource||(t.CubismPhysicsSource={}))[r.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",r[r.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",r[r.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle";var r,i=function(){this.gravity=new o(0,0),this.wind=new o(0,0)};t.PhysicsJsonEffectiveForces=i;var a=function(){};t.CubismPhysicsParameter=a;var s=function(){};t.CubismPhysicsNormalization=s;var u=function(){this.initialPosition=new o(0,0),this.position=new o(0,0),this.lastPosition=new o(0,0),this.lastGravity=new o(0,0),this.force=new o(0,0),this.velocity=new o(0,0)};t.CubismPhysicsParticle=u;var l=function(){this.normalizationPosition=new s,this.normalizationAngle=new s};t.CubismPhysicsSubRig=l;var c=function(){this.source=new a};t.CubismPhysicsInput=c;var f=function(){this.destination=new a,this.translationScale=new o(0,0)};t.CubismPhysicsOutput=f;var h=function(){this.settings=new n,this.inputs=new n,this.outputs=new n,this.particles=new n,this.gravity=new o(0,0),this.wind=new o(0,0)};t.CubismPhysicsRig=h}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var i=r(3),n=r(11),o=r(0).Live2DCubismFramework.CubismFramework,a=n.Live2DCubismFramework.CubismVector2,s=i.Live2DCubismFramework.CubismJson;!function(t){var e="Position",r="EffectiveForces",i="PhysicsSettings",n="Normalization",u="Output",l="Vertices",c=function(){function t(t,e){this._json=s.create(t,e)}return t.prototype.release=function(){s.delete(this._json)},t.prototype.getGravity=function(){var t=new a(0,0);return t.x=this._json.getRoot().getValueByString("Meta").getValueByString(r).getValueByString("Gravity").getValueByString("X").toFloat(),t.y=this._json.getRoot().getValueByString("Meta").getValueByString(r).getValueByString("Gravity").getValueByString("Y").toFloat(),t},t.prototype.getWind=function(){var t=new a(0,0);return t.x=this._json.getRoot().getValueByString("Meta").getValueByString(r).getValueByString("Wind").getValueByString("X").toFloat(),t.y=this._json.getRoot().getValueByString("Meta").getValueByString(r).getValueByString("Wind").getValueByString("Y").toFloat(),t},t.prototype.getSubRigCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("PhysicsSettingCount").toInt()},t.prototype.getTotalInputCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("TotalInputCount").toInt()},t.prototype.getTotalOutputCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("TotalOutputCount").toInt()},t.prototype.getVertexCount=function(){return this._json.getRoot().getValueByString("Meta").getValueByString("VertexCount").toInt()},t.prototype.getNormalizationPositionMinimumValue=function(t){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(n).getValueByString(e).getValueByString("Minimum").toFloat()},t.prototype.getNormalizationPositionMaximumValue=function(t){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(n).getValueByString(e).getValueByString("Maximum").toFloat()},t.prototype.getNormalizationPositionDefaultValue=function(t){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(n).getValueByString(e).getValueByString("Default").toFloat()},t.prototype.getNormalizationAngleMinimumValue=function(t){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(n).getValueByString("Angle").getValueByString("Minimum").toFloat()},t.prototype.getNormalizationAngleMaximumValue=function(t){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(n).getValueByString("Angle").getValueByString("Maximum").toFloat()},t.prototype.getNormalizationAngleDefaultValue=function(t){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(n).getValueByString("Angle").getValueByString("Default").toFloat()},t.prototype.getInputCount=function(t){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString("Input").getVector().getSize()},t.prototype.getInputWeight=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Weight").toFloat()},t.prototype.getInputReflect=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Reflect").toBoolean()},t.prototype.getInputType=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Type").getRawString()},t.prototype.getInputSourceId=function(t,e){return o.getIdManager().getId(this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString("Input").getValueByIndex(e).getValueByString("Source").getValueByString("Id").getRawString())},t.prototype.getOutputCount=function(t){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(u).getVector().getSize()},t.prototype.getOutputVertexIndex=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(u).getValueByIndex(e).getValueByString("VertexIndex").toInt()},t.prototype.getOutputAngleScale=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(u).getValueByIndex(e).getValueByString("Scale").toFloat()},t.prototype.getOutputWeight=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(u).getValueByIndex(e).getValueByString("Weight").toFloat()},t.prototype.getOutputDestinationId=function(t,e){return o.getIdManager().getId(this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(u).getValueByIndex(e).getValueByString("Destination").getValueByString("Id").getRawString())},t.prototype.getOutputType=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(u).getValueByIndex(e).getValueByString("Type").getRawString()},t.prototype.getOutputReflect=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(u).getValueByIndex(e).getValueByString("Reflect").toBoolean()},t.prototype.getParticleCount=function(t){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(l).getVector().getSize()},t.prototype.getParticleMobility=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(l).getValueByIndex(e).getValueByString("Mobility").toFloat()},t.prototype.getParticleDelay=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(l).getValueByIndex(e).getValueByString("Delay").toFloat()},t.prototype.getParticleAcceleration=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(l).getValueByIndex(e).getValueByString("Acceleration").toFloat()},t.prototype.getParticleRadius=function(t,e){return this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(l).getValueByIndex(e).getValueByString("Radius").toInt()},t.prototype.getParticlePosition=function(t,r){var n=new a(0,0);return n.x=this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(l).getValueByIndex(r).getValueByString(e).getValueByString("X").toFloat(),n.y=this._json.getRoot().getValueByString(i).getValueByIndex(t).getValueByString(l).getValueByIndex(r).getValueByString(e).getValueByString("Y").toFloat(),n},t}();t.CubismPhysicsJson=c}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var n=r(0),o=r(54),a=r(15),s=r(4),u=r(8),l=r(1),c=r(2),f=n.Live2DCubismFramework.Constant,h=s.Live2DCubismFramework.CubismMatrix44,p=o.Live2DCubismFramework.csmRect,g=u.Live2DCubismFramework.csmMap,d=l.Live2DCubismFramework.csmVector,m=a.Live2DCubismFramework.CubismRenderer,_=a.Live2DCubismFramework.CubismBlendMode,y=a.Live2DCubismFramework.CubismTextureColor;!function(t){var e,r,n,o=function(){function t(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new d,this._clippingContextListForDraw=new d,this._channelColors=new d,this._tmpBoundsOnModel=new p,this._tmpMatrix=new h,this._tmpMatrixForMask=new h,this._tmpMatrixForDraw=new h,this._maskTexture=null;var t=new y;t.R=1,t.G=0,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new y).R=0,t.G=1,t.B=0,t.A=0,this._channelColors.pushBack(t),(t=new y).R=0,t.G=0,t.B=1,t.A=0,this._channelColors.pushBack(t),(t=new y).R=0,t.G=0,t.B=0,t.A=1,this._channelColors.pushBack(t)}return t.prototype.getChannelFlagAsColor=function(t){return this._channelColors.at(t)},t.prototype.getMaskRenderTexture=function(){var t=0;if(this._maskTexture&&0!=this._maskTexture.texture&&(this._maskTexture.frameNo=this._currentFrameNo,t=this._maskTexture.texture),0==t){var e=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),t=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n),this._maskTexture=new a(this._currentFrameNo,t)}return t},t.prototype.setGL=function(t){this.gl=t},t.prototype.calcClippedDrawTotalBounds=function(t,e){for(var r=Number.MAX_VALUE,i=Number.MAX_VALUE,n=Number.MIN_VALUE,o=Number.MIN_VALUE,a=e._clippedDrawableIndexList.length,s=0;s<a;s++){for(var u=e._clippedDrawableIndexList[s],l=t.getDrawableVertexCount(u),c=t.getDrawableVertices(u),h=Number.MAX_VALUE,p=Number.MAX_VALUE,g=Number.MIN_VALUE,d=Number.MIN_VALUE,m=l*f.vertexStep,_=f.vertexOffset;_<m;_+=f.vertexStep){var y=c[_],b=c[_+1];y<h&&(h=y),y>g&&(g=y),b<p&&(p=b),b>d&&(d=b)}if(h!=Number.MAX_VALUE)if(h<r&&(r=h),p<i&&(i=p),g>n&&(n=g),d>o&&(o=d),r==Number.MAX_VALUE)e._allClippedDrawRect.x=0,e._allClippedDrawRect.y=0,e._allClippedDrawRect.width=0,e._allClippedDrawRect.height=0,e._isUsing=!1;else{e._isUsing=!0;var v=n-r,A=o-i;e._allClippedDrawRect.x=r,e._allClippedDrawRect.y=i,e._allClippedDrawRect.width=v,e._allClippedDrawRect.height=A}}},t.prototype.release=function(){for(var t=0;t<this._clippingContextListForMask.getSize();t++)this._clippingContextListForMask.at(t)&&(this._clippingContextListForMask.at(t).release(),this._clippingContextListForMask.set(t,void 0)),this._clippingContextListForMask.set(t,null);for(this._clippingContextListForMask=null,t=0;t<this._clippingContextListForDraw.getSize();t++)this._clippingContextListForDraw.set(t,null);for(this._clippingContextListForDraw=null,this._maskTexture&&(this.gl.deleteFramebuffer(this._maskTexture.texture),this._maskTexture=null),t=0;t<this._channelColors.getSize();t++)this._channelColors.set(t,null);this._channelColors=null,this.gl.deleteTexture(this._colorBuffer),this._colorBuffer=null},t.prototype.initialize=function(t,e,r,i){for(var n=0;n<e;n++)if(i[n]<=0)this._clippingContextListForDraw.pushBack(null);else{var o=this.findSameClip(r[n],i[n]);null==o&&(o=new s(this,r[n],i[n]),this._clippingContextListForMask.pushBack(o)),o.addClippedDrawable(n),this._clippingContextListForDraw.pushBack(o)}},t.prototype.setupClippingContext=function(t,e){this._currentFrameNo++;for(var i=0,o=0;o<this._clippingContextListForMask.getSize();o++){var a=this._clippingContextListForMask.at(o);this.calcClippedDrawTotalBounds(t,a),a._isUsing&&i++}if(i>0){for(this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),e.getMvpMatrix(),e.preDraw(),this.setupLayoutBounds(i),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),o=0;o<this._clippingContextListForMask.getSize();o++){var s=this._clippingContextListForMask.at(o),u=s._allClippedDrawRect,l=s._layoutBounds;this._tmpBoundsOnModel.setRect(u),this._tmpBoundsOnModel.expand(.05*u.width,.05*u.height);var c=l.width/this._tmpBoundsOnModel.width,f=l.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(c,f),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(c,f),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),s._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),s._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());for(var h=s._clippingIdCount,p=0;p<h;p++){var g=s._clippingIdList[p];t.getDrawableDynamicFlagVertexPositionsDidChange(g)&&(e.setIsCulling(0!=t.getDrawableCulling(g)),e.setClippingContextBufferForMask(s),e.drawMesh(t.getDrawableTextureIndices(g),t.getDrawableVertexIndexCount(g),t.getDrawableVertexCount(g),t.getDrawableVertexIndices(g),t.getDrawableVertices(g),t.getDrawableVertexUvs(g),t.getDrawableOpacity(g),_.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n),e.setClippingContextBufferForMask(null),this.gl.viewport(r[0],r[1],r[2],r[3])}},t.prototype.findSameClip=function(t,e){for(var r=0;r<this._clippingContextListForMask.getSize();r++){var i=this._clippingContextListForMask.at(r),n=i._clippingIdCount;if(n==e){for(var o=0,a=0;a<n;a++)for(var s=i._clippingIdList[a],u=0;u<n;u++)if(t[u]==s){o++;break}if(o==n)return i}}return null},t.prototype.setupLayoutBounds=function(t){var e=t/4,r=t%4;e=~~e,r=~~r;for(var i=0,n=0;n<4;n++){var o=e+(n<r?1:0);if(0==o);else if(1==o){var a=this._clippingContextListForMask.at(i++);a._layoutChannelNo=n,a._layoutBounds.x=0,a._layoutBounds.y=0,a._layoutBounds.width=1,a._layoutBounds.height=1}else if(2==o)for(var s=0;s<o;s++)u=~~(u=s%2),(f=this._clippingContextListForMask.at(i++))._layoutChannelNo=n,f._layoutBounds.x=.5*u,f._layoutBounds.y=0,f._layoutBounds.width=.5,f._layoutBounds.height=1;else if(o<=4)for(s=0;s<o;s++)u=~~(u=s%2),l=~~(l=s/2),(f=this._clippingContextListForMask.at(i++))._layoutChannelNo=n,f._layoutBounds.x=.5*u,f._layoutBounds.y=.5*l,f._layoutBounds.width=.5,f._layoutBounds.height=.5;else if(o<=9)for(s=0;s<o;s++){var u,l,f;u=~~(u=s%3),l=~~(l=s/3),(f=this._clippingContextListForMask.at(i++))._layoutChannelNo=n,f._layoutBounds.x=u/3,f._layoutBounds.y=l/3,f._layoutBounds.width=1/3,f._layoutBounds.height=1/3}else c.CubismLogError("not supported mask count : {0}",o)}},t.prototype.getColorBuffer=function(){return this._colorBuffer},t.prototype.getClippingContextListForDraw=function(){return this._clippingContextListForDraw},t.prototype.setClippingMaskBufferSize=function(t){this._clippingMaskBufferSize=t},t.prototype.getClippingMaskBufferSize=function(){return this._clippingMaskBufferSize},t}();t.CubismClippingManager_WebGL=o;var a=function(t,e){this.frameNo=t,this.texture=e};t.CubismRenderTextureResource=a;var s=function(){function t(t,e,r){this._owner=t,this._clippingIdList=e,this._clippingIdCount=r,this._allClippedDrawRect=new p,this._layoutBounds=new p,this._clippedDrawableIndexList=[],this._matrixForMask=new h,this._matrixForDraw=new h}return t.prototype.release=function(){null!=this._layoutBounds&&(this._layoutBounds=null),null!=this._allClippedDrawRect&&(this._allClippedDrawRect=null),null!=this._clippedDrawableIndexList&&(this._clippedDrawableIndexList=null)},t.prototype.addClippedDrawable=function(t){this._clippedDrawableIndexList.push(t)},t.prototype.getClippingManager=function(){return this._owner},t.prototype.setGl=function(t){this._owner.setGL(t)},t}();t.CubismClippingContext=s;var u=function(){function r(){this._shaderSets=new d}return r.getInstance=function(){return null==e?e=new r:e},r.deleteInstance=function(){e&&(e.release(),e=null)},r.prototype.release=function(){this.releaseShaderProgram()},r.prototype.setupShaderProgram=function(t,e,r,i,n,o,a,s,u,f,h,p,g){var d,m,y,b;if(h||c.CubismLogError("NoPremultipliedAlpha is not allowed"),0==this._shaderSets.getSize()&&this.generateShaders(),null!=t.getClippingContextBufferForMask()){var A=this._shaderSets.at(l.ShaderNames_SetupMask);this.gl.useProgram(A.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(A.samplerTexture0Location,0),null==a.vertex&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(A.attributePositionLocation),this.gl.vertexAttribPointer(A.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==a.uv&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(A.attributeTexCoordLocation),this.gl.vertexAttribPointer(A.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);var w=t.getClippingContextBufferForMask()._layoutChannelNo,C=t.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(w);this.gl.uniform4f(A.uniformChannelFlagLocation,C.R,C.G,C.B,C.A),this.gl.uniformMatrix4fv(A.uniformClipMatrixLocation,!1,t.getClippingContextBufferForMask()._matrixForMask.getArray());var S=t.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(A.uniformBaseColorLocation,2*S.x-1,2*S.y-1,2*S.getRight()-1,2*S.getBottom()-1),d=this.gl.ZERO,m=this.gl.ONE_MINUS_SRC_COLOR,y=this.gl.ZERO,b=this.gl.ONE_MINUS_SRC_ALPHA}else{var x=null!=t.getClippingContextBufferForDraw(),M=x?g?2:1:0;switch(A=new v,u){case _.CubismBlendMode_Normal:default:A=this._shaderSets.at(l.ShaderNames_NormalPremultipliedAlpha+M),d=this.gl.ONE,m=this.gl.ONE_MINUS_SRC_ALPHA,y=this.gl.ONE,b=this.gl.ONE_MINUS_SRC_ALPHA;break;case _.CubismBlendMode_Additive:A=this._shaderSets.at(l.ShaderNames_AddPremultipliedAlpha+M),d=this.gl.ONE,m=this.gl.ONE,y=this.gl.ZERO,b=this.gl.ONE;break;case _.CubismBlendMode_Multiplicative:A=this._shaderSets.at(l.ShaderNames_MultPremultipliedAlpha+M),d=this.gl.DST_COLOR,m=this.gl.ONE_MINUS_SRC_ALPHA,y=this.gl.ZERO,b=this.gl.ONE}if(this.gl.useProgram(A.shaderProgram),null==a.vertex&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(A.attributePositionLocation),this.gl.vertexAttribPointer(A.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==a.uv&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(A.attributeTexCoordLocation),this.gl.vertexAttribPointer(A.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),x){this.gl.activeTexture(this.gl.TEXTURE1);var P=t.getClippingContextBufferForDraw().getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,P),this.gl.uniform1i(A.samplerTexture1Location,1),this.gl.uniformMatrix4fv(A.uniformClipMatrixLocation,!1,t.getClippingContextBufferForDraw()._matrixForDraw.getArray()),w=t.getClippingContextBufferForDraw()._layoutChannelNo,C=t.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(w),this.gl.uniform4f(A.uniformChannelFlagLocation,C.R,C.G,C.B,C.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(A.samplerTexture0Location,0),this.gl.uniformMatrix4fv(A.uniformMatrixLocation,!1,p.getArray()),this.gl.uniform4f(A.uniformBaseColorLocation,f.R,f.G,f.B,f.A)}null==a.index&&(a.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(d,m,y,b)},r.prototype.releaseShaderProgram=function(){for(var t=0;t<this._shaderSets.getSize();t++)this.gl.deleteProgram(this._shaderSets.at(t).shaderProgram),this._shaderSets.at(t).shaderProgram=0,this._shaderSets.set(t,void 0),this._shaderSets.set(t,null)},r.prototype.generateShaders=function(){for(var e=0;e<10;e++)this._shaderSets.pushBack(new v);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcSetupMask,t.fragmentShaderSrcsetupMask),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(t.vertexShaderSrc,t.fragmentShaderSrcPremultipliedAlpha),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcMasked,t.fragmentShaderSrcMaskPremultipliedAlpha),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(t.vertexShaderSrcMasked,t.fragmentShaderSrcMaskInvertedPremultipliedAlpha),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor")},r.prototype.loadShaderProgram=function(t,e){var r=this.gl.createProgram(),i=this.compileShaderSource(this.gl.VERTEX_SHADER,t);if(!i)return c.CubismLogError("Vertex shader compile error!"),0;var n=this.compileShaderSource(this.gl.FRAGMENT_SHADER,e);return n?(this.gl.attachShader(r,i),this.gl.attachShader(r,n),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)?(this.gl.deleteShader(i),this.gl.deleteShader(n),r):(c.CubismLogError("Failed to link program: {0}",r),this.gl.deleteShader(i),i=0,this.gl.deleteShader(n),n=0,r&&(this.gl.deleteProgram(r),r=0),0)):(c.CubismLogError("Vertex shader compile error!"),0)},r.prototype.compileShaderSource=function(t,e){var r=e,i=this.gl.createShader(t);if(this.gl.shaderSource(i,r),this.gl.compileShader(i),!i){var n=this.gl.getShaderInfoLog(i);c.CubismLogError("Shader compile log: {0} ",n)}return this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(this.gl.deleteShader(i),null)},r.prototype.setGl=function(t){this.gl=t},r}();t.CubismShader_WebGL=u;var l,b,v=function(){};t.CubismShaderSet=v,(b=l=t.ShaderNames||(t.ShaderNames={}))[b.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",b[b.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",b[b.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",b[b.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",b[b.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",b[b.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",b[b.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",b[b.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",b[b.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",b[b.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",t.vertexShaderSrcSetupMask="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.fragmentShaderSrcsetupMask="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",t.vertexShaderSrc="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.vertexShaderSrcMasked="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",t.fragmentShaderSrcPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",t.fragmentShaderSrcMaskPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",t.fragmentShaderSrcMaskInvertedPremultipliedAlpha="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";var A=function(t){function e(){var e=t.call(this)||this;return e._clippingContextBufferForMask=null,e._clippingContextBufferForDraw=null,e._clippingManager=new o,e.firstDraw=!0,e._textures=new g,e._sortedDrawableIndexList=new d,e._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},e._textures.prepareCapacity(32,!0),e}return i(e,t),e.prototype.initialize=function(e){e.isUsingMasking()&&(this._clippingManager=new o,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts())),this._sortedDrawableIndexList.resize(e.getDrawableCount(),0),t.prototype.initialize.call(this,e)},e.prototype.bindTexture=function(t,e){this._textures.setValue(t,e)},e.prototype.getBindedTextures=function(){return this._textures},e.prototype.setClippingMaskBufferSize=function(t){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new o,this._clippingManager.setClippingMaskBufferSize(t),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())},e.prototype.getClippingMaskBufferSize=function(){return this._clippingManager.getClippingMaskBufferSize()},e.prototype.release=function(){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null},e.prototype.doDrawModel=function(){null!=this._clippingManager&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();for(var t=this.getModel().getDrawableCount(),e=this.getModel().getDrawableRenderOrders(),r=0;r<t;++r){var i=e[r];this._sortedDrawableIndexList.set(i,r)}for(r=0;r<t;++r){var n=this._sortedDrawableIndexList.at(r);this.getModel().getDrawableDynamicFlagIsVisible(n)&&(this.setClippingContextBufferForDraw(null!=this._clippingManager?this._clippingManager.getClippingContextListForDraw().at(n):null),this.setIsCulling(this.getModel().getDrawableCulling(n)),this.drawMesh(this.getModel().getDrawableTextureIndices(n),this.getModel().getDrawableVertexIndexCount(n),this.getModel().getDrawableVertexCount(n),this.getModel().getDrawableVertexIndices(n),this.getModel().getDrawableVertices(n),this.getModel().getDrawableVertexUvs(n),this.getModel().getDrawableOpacity(n),this.getModel().getDrawableBlendMode(n),this.getModel().getDrawableInvertedMaskBit(n)))}},e.prototype.drawMesh=function(t,e,r,i,n,o,a,s,l){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);var c,f=this.getModelColor();null==this.getClippingContextBufferForMask()&&(f.A*=a,this.isPremultipliedAlpha()&&(f.R*=f.A,f.G*=f.A,f.B*=f.A)),c=null!=this._textures.getValue(t)?this._textures.getValue(t):null,u.getInstance().setupShaderProgram(this,c,r,n,i,o,this._bufferData,a,s,f,this.isPremultipliedAlpha(),this.getMvpMatrix(),l),this.gl.drawElements(this.gl.TRIANGLES,e,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)},e.doStaticRelease=function(){u.deleteInstance()},e.prototype.setRenderState=function(t,e){n=t,r=e},e.prototype.preDraw=function(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)},e.prototype.setClippingContextBufferForMask=function(t){this._clippingContextBufferForMask=t},e.prototype.getClippingContextBufferForMask=function(){return this._clippingContextBufferForMask},e.prototype.setClippingContextBufferForDraw=function(t){this._clippingContextBufferForDraw=t},e.prototype.getClippingContextBufferForDraw=function(){return this._clippingContextBufferForDraw},e.prototype.startUp=function(t){this.gl=t,this._clippingManager.setGL(t),u.getInstance().setGl(t)},e}(m);t.CubismRenderer_WebGL=A,m.staticRelease=function(){A.doStaticRelease()}}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0,function(t){var e=function(){function t(t,e,r,i){this.x=t,this.y=e,this.width=r,this.height=i}return t.prototype.getCenterX=function(){return this.x+.5*this.width},t.prototype.getCenterY=function(){return this.y+.5*this.height},t.prototype.getRight=function(){return this.x+this.width},t.prototype.getBottom=function(){return this.y+this.height},t.prototype.setRect=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},t.prototype.expand=function(t,e){this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t}();t.csmRect=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0;var n=r(0),o=r(56),a=r(3),s=r(1).Live2DCubismFramework.csmVector,u=n.Live2DCubismFramework.CubismFramework,l=a.Live2DCubismFramework.CubismJson,c=o.Live2DCubismFramework.ICubismModelSetting;!function(t){var e,r="FileReferences";(n=e||(e={}))[n.FrequestNode_Groups=0]="FrequestNode_Groups",n[n.FrequestNode_Moc=1]="FrequestNode_Moc",n[n.FrequestNode_Motions=2]="FrequestNode_Motions",n[n.FrequestNode_Expressions=3]="FrequestNode_Expressions",n[n.FrequestNode_Textures=4]="FrequestNode_Textures",n[n.FrequestNode_Physics=5]="FrequestNode_Physics",n[n.FrequestNode_Pose=6]="FrequestNode_Pose",n[n.FrequestNode_HitAreas=7]="FrequestNode_HitAreas";var n,o=function(t){function n(e,i){var n=t.call(this)||this;return n._json=l.create(e,i),n._json&&(n._jsonValue=new s,n._jsonValue.pushBack(n._json.getRoot().getValueByString("Groups")),n._jsonValue.pushBack(n._json.getRoot().getValueByString(r).getValueByString("Moc")),n._jsonValue.pushBack(n._json.getRoot().getValueByString(r).getValueByString("Motions")),n._jsonValue.pushBack(n._json.getRoot().getValueByString(r).getValueByString("Expressions")),n._jsonValue.pushBack(n._json.getRoot().getValueByString(r).getValueByString("Textures")),n._jsonValue.pushBack(n._json.getRoot().getValueByString(r).getValueByString("Physics")),n._jsonValue.pushBack(n._json.getRoot().getValueByString(r).getValueByString("Pose")),n._jsonValue.pushBack(n._json.getRoot().getValueByString("HitAreas"))),n}return i(n,t),n.prototype.release=function(){l.delete(this._json),this._jsonValue=null},n.prototype.GetJson=function(){return this._json},n.prototype.getModelFileName=function(){return this.isExistModelFile()?this._jsonValue.at(e.FrequestNode_Moc).getRawString():""},n.prototype.getTextureCount=function(){return this.isExistTextureFiles()?this._jsonValue.at(e.FrequestNode_Textures).getSize():0},n.prototype.getTextureDirectory=function(){return this._jsonValue.at(e.FrequestNode_Textures).getRawString()},n.prototype.getTextureFileName=function(t){return this._jsonValue.at(e.FrequestNode_Textures).getValueByIndex(t).getRawString()},n.prototype.getHitAreasCount=function(){return this.isExistHitAreas()?this._jsonValue.at(e.FrequestNode_HitAreas).getSize():0},n.prototype.getHitAreaId=function(t){return u.getIdManager().getId(this._jsonValue.at(e.FrequestNode_HitAreas).getValueByIndex(t).getValueByString("Id").getRawString())},n.prototype.getHitAreaName=function(t){return this._jsonValue.at(e.FrequestNode_HitAreas).getValueByIndex(t).getValueByString("Name").getRawString()},n.prototype.getPhysicsFileName=function(){return this.isExistPhysicsFile()?this._jsonValue.at(e.FrequestNode_Physics).getRawString():""},n.prototype.getPoseFileName=function(){return this.isExistPoseFile()?this._jsonValue.at(e.FrequestNode_Pose).getRawString():""},n.prototype.getExpressionCount=function(){return this.isExistExpressionFile()?this._jsonValue.at(e.FrequestNode_Expressions).getSize():0},n.prototype.getExpressionName=function(t){return this._jsonValue.at(e.FrequestNode_Expressions).getValueByIndex(t).getValueByString("Name").getRawString()},n.prototype.getExpressionFileName=function(t){return this._jsonValue.at(e.FrequestNode_Expressions).getValueByIndex(t).getValueByString("File").getRawString()},n.prototype.getMotionGroupCount=function(){return this.isExistMotionGroups()?this._jsonValue.at(e.FrequestNode_Motions).getKeys().getSize():0},n.prototype.getMotionGroupName=function(t){return this.isExistMotionGroups()?this._jsonValue.at(e.FrequestNode_Motions).getKeys().at(t):null},n.prototype.getMotionCount=function(t){return this.isExistMotionGroupName(t)?this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getSize():0},n.prototype.getMotionFileName=function(t,r){return this.isExistMotionGroupName(t)?this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("File").getRawString():""},n.prototype.getMotionSoundFileName=function(t,r){return this.isExistMotionSoundFile(t,r)?this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("Sound").getRawString():""},n.prototype.getMotionFadeInTimeValue=function(t,r){return this.isExistMotionFadeIn(t,r)?this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("FadeInTime").toFloat():-1},n.prototype.getMotionFadeOutTimeValue=function(t,r){return this.isExistMotionFadeOut(t,r)?this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("FadeOutTime").toFloat():-1},n.prototype.getUserDataFile=function(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString(r).getValueByString("UserData").getRawString():""},n.prototype.getLayoutMap=function(t){var e=this._json.getRoot().getValueByString("Layout").getMap();if(null==e)return!1;for(var r=!1,i=e.begin();i.notEqual(e.end());i.preIncrement())t.setValue(i.ptr().first,i.ptr().second.toFloat()),r=!0;return r},n.prototype.getEyeBlinkParameterCount=function(){if(!this.isExistEyeBlinkParameters())return 0;for(var t=0,r=0;r<this._jsonValue.at(e.FrequestNode_Groups).getSize();r++){var i=this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(r);if(!i.isNull()&&!i.isError()&&"EyeBlink"==i.getValueByString("Name").getRawString()){t=i.getValueByString("Ids").getVector().getSize();break}}return t},n.prototype.getEyeBlinkParameterId=function(t){if(!this.isExistEyeBlinkParameters())return null;for(var r=0;r<this._jsonValue.at(e.FrequestNode_Groups).getSize();r++){var i=this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(r);if(!i.isNull()&&!i.isError()&&"EyeBlink"==i.getValueByString("Name").getRawString())return u.getIdManager().getId(i.getValueByString("Ids").getValueByIndex(t).getRawString())}return null},n.prototype.getLipSyncParameterCount=function(){if(!this.isExistLipSyncParameters())return 0;for(var t=0,r=0;r<this._jsonValue.at(e.FrequestNode_Groups).getSize();r++){var i=this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(r);if(!i.isNull()&&!i.isError()&&"LipSync"==i.getValueByString("Name").getRawString()){t=i.getValueByString("Ids").getVector().getSize();break}}return t},n.prototype.getLipSyncParameterId=function(t){if(!this.isExistLipSyncParameters())return null;for(var r=0;r<this._jsonValue.at(e.FrequestNode_Groups).getSize();r++){var i=this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(r);if(!i.isNull()&&!i.isError()&&"LipSync"==i.getValueByString("Name").getRawString())return u.getIdManager().getId(i.getValueByString("Ids").getValueByIndex(t).getRawString())}return null},n.prototype.isExistModelFile=function(){var t=this._jsonValue.at(e.FrequestNode_Moc);return!t.isNull()&&!t.isError()},n.prototype.isExistTextureFiles=function(){var t=this._jsonValue.at(e.FrequestNode_Textures);return!t.isNull()&&!t.isError()},n.prototype.isExistHitAreas=function(){var t=this._jsonValue.at(e.FrequestNode_HitAreas);return!t.isNull()&&!t.isError()},n.prototype.isExistPhysicsFile=function(){var t=this._jsonValue.at(e.FrequestNode_Physics);return!t.isNull()&&!t.isError()},n.prototype.isExistPoseFile=function(){var t=this._jsonValue.at(e.FrequestNode_Pose);return!t.isNull()&&!t.isError()},n.prototype.isExistExpressionFile=function(){var t=this._jsonValue.at(e.FrequestNode_Expressions);return!t.isNull()&&!t.isError()},n.prototype.isExistMotionGroups=function(){var t=this._jsonValue.at(e.FrequestNode_Motions);return!t.isNull()&&!t.isError()},n.prototype.isExistMotionGroupName=function(t){var r=this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t);return!r.isNull()&&!r.isError()},n.prototype.isExistMotionSoundFile=function(t,r){var i=this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("Sound");return!i.isNull()&&!i.isError()},n.prototype.isExistMotionFadeIn=function(t,r){var i=this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("FadeInTime");return!i.isNull()&&!i.isError()},n.prototype.isExistMotionFadeOut=function(t,r){var i=this._jsonValue.at(e.FrequestNode_Motions).getValueByString(t).getValueByIndex(r).getValueByString("FadeOutTime");return!i.isNull()&&!i.isError()},n.prototype.isExistUserDataFile=function(){var t=this._json.getRoot().getValueByString(r).getValueByString("UserData");return!t.isNull()&&!t.isError()},n.prototype.isExistEyeBlinkParameters=function(){if(this._jsonValue.at(e.FrequestNode_Groups).isNull()||this._jsonValue.at(e.FrequestNode_Groups).isError())return!1;for(var t=0;t<this._jsonValue.at(e.FrequestNode_Groups).getSize();++t)if("EyeBlink"==this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(t).getValueByString("Name").getRawString())return!0;return!1},n.prototype.isExistLipSyncParameters=function(){if(this._jsonValue.at(e.FrequestNode_Groups).isNull()||this._jsonValue.at(e.FrequestNode_Groups).isError())return!1;for(var t=0;t<this._jsonValue.at(e.FrequestNode_Groups).getSize();++t)if("LipSync"==this._jsonValue.at(e.FrequestNode_Groups).getValueByIndex(t).getValueByString("Name").getRawString())return!0;return!1},n}(c);t.CubismModelSettingJson=o}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0,function(t){var e=function(){};t.ICubismModelSetting=e}(e.Live2DCubismFramework||(e.Live2DCubismFramework={}))},function(t,e,r){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.Live2DCubismFramework=void 0,(i=e.Live2DCubismFramework||(e.Live2DCubismFramework={})).HitAreaPrefix="HitArea",i.HitAreaHead="Head",i.HitAreaBody="Body",i.PartsIdCore="Parts01Core",i.PartsArmPrefix="Parts01Arm_",i.PartsArmLPrefix="Parts01ArmL_",i.PartsArmRPrefix="Parts01ArmR_",i.ParamAngleX="ParamAngleX",i.ParamAngleY="ParamAngleY",i.ParamAngleZ="ParamAngleZ",i.ParamEyeLOpen="ParamEyeLOpen",i.ParamEyeLSmile="ParamEyeLSmile",i.ParamEyeROpen="ParamEyeROpen",i.ParamEyeRSmile="ParamEyeRSmile",i.ParamEyeBallX="ParamEyeBallX",i.ParamEyeBallY="ParamEyeBallY",i.ParamEyeBallForm="ParamEyeBallForm",i.ParamBrowLY="ParamBrowLY",i.ParamBrowRY="ParamBrowRY",i.ParamBrowLX="ParamBrowLX",i.ParamBrowRX="ParamBrowRX",i.ParamBrowLAngle="ParamBrowLAngle",i.ParamBrowRAngle="ParamBrowRAngle",i.ParamBrowLForm="ParamBrowLForm",i.ParamBrowRForm="ParamBrowRForm",i.ParamMouthForm="ParamMouthForm",i.ParamMouthOpenY="ParamMouthOpenY",i.ParamCheek="ParamCheek",i.ParamBodyAngleX="ParamBodyAngleX",i.ParamBodyAngleY="ParamBodyAngleY",i.ParamBodyAngleZ="ParamBodyAngleZ",i.ParamBreath="ParamBreath",i.ParamArmLA="ParamArmLA",i.ParamArmRA="ParamArmRA",i.ParamArmLB="ParamArmLB",i.ParamArmRB="ParamArmRB",i.ParamHandL="ParamHandL",i.ParamHandR="ParamHandR",i.ParamHairFront="ParamHairFront",i.ParamHairSide="ParamHairSide",i.ParamHairBack="ParamHairBack",i.ParamHairFluffy="ParamHairFluffy",i.ParamShoulderY="ParamShoulderY",i.ParamBustX="ParamBustX",i.ParamBustY="ParamBustY",i.ParamBaseX="ParamBaseX",i.ParamBaseY="ParamBaseY",i.ParamNONE="NONE:"},function(t,e){!function(){"use strict";if(!self.fetch){n.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(e)},n.prototype.delete=function(t){delete this.map[r(t)]},n.prototype.get=function(t){var e=this.map[r(t)];return e?e[0]:null},n.prototype.getAll=function(t){return this.map[r(t)]||[]},n.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},n.prototype.set=function(t,e){this.map[r(t)]=[i(e)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach((function(r){this.map[r].forEach((function(i){t.call(e,i,r,this)}),this)}),this)};var t={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self},e=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];u.call(l.prototype),u.call(f.prototype),self.Headers=n,self.Request=l,self.Response=f,self.fetch=function(e,r){var i;return i=l.prototype.isPrototypeOf(e)&&!r?e:new l(e,r),new Promise((function(e,r){var o=new XMLHttpRequest;o.onload=function(){var t=1223===o.status?204:o.status;if(t<100||t>599)r(new TypeError("Network request failed"));else{var i={status:t,statusText:o.statusText,headers:function(t){var e=new n;return t.getAllResponseHeaders().trim().split("\n").forEach((function(t){var r=t.trim().split(":"),i=r.shift().trim(),n=r.join(":").trim();e.append(i,n)})),e}(o),url:"responseURL"in o?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):void 0},a="response"in o?o.response:o.responseText;e(new f(a,i))}},o.onerror=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&t.blob&&(o.responseType="blob"),i.headers.forEach((function(t,e){o.setRequestHeader(e,t)})),o.send(void 0===i._bodyInit?null:i._bodyInit)}))},self.fetch.polyfill=!0}function r(t){if("string"!=typeof t&&(t=t.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=t.toString()),t}function n(t){this.map={},t instanceof n?t.forEach((function(t,e){this.append(e,t)}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function s(t){var e=new FileReader;return e.readAsArrayBuffer(t),a(e)}function u(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else{if(e)throw new Error("unsupported BodyInit type");this._bodyText=""}},t.blob?(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader;return e.readAsText(t),a(e)}(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){return o(this)||Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(c)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(t,r){if(r=r||{},this.url=t,this.credentials=r.credentials||"omit",this.headers=new n(r.headers),this.method=function(t){var r=t.toUpperCase();return e.indexOf(r)>-1?r:t}(r.method||"GET"),this.mode=r.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r.body)}function c(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(n))}})),e}function f(t,e){e||(e={}),this._initBody(t),this.type="default",this.url=null,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||""}}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextureInfo=e.LAppTextureManager=void 0;var i=r(1).Live2DCubismFramework.csmVector,n=r(5),o=function(){function t(){this._textures=new i}return t.prototype.release=function(){for(var t=this._textures.begin();t.notEqual(this._textures.end());t.preIncrement())n.gl.deleteTexture(t.ptr().id);this._textures=null},t.prototype.createTextureFromPngFile=function(t,e,r){for(var i=this,o=function(i){if(i.ptr().fileName==t&&i.ptr().usePremultply==e)return i.ptr().img=new Image,i.ptr().img.onload=function(){return r(i.ptr())},i.ptr().img.src=t,{value:void 0}},s=this._textures.begin();s.notEqual(this._textures.end());s.preIncrement()){var u=o(s);if("object"==typeof u)return u.value}var l=new Image;l.onload=function(){var o=n.gl.createTexture();n.gl.bindTexture(n.gl.TEXTURE_2D,o),n.gl.texParameteri(n.gl.TEXTURE_2D,n.gl.TEXTURE_MIN_FILTER,n.gl.LINEAR_MIPMAP_LINEAR),n.gl.texParameteri(n.gl.TEXTURE_2D,n.gl.TEXTURE_MAG_FILTER,n.gl.LINEAR),e&&n.gl.pixelStorei(n.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),n.gl.texImage2D(n.gl.TEXTURE_2D,0,n.gl.RGBA,n.gl.RGBA,n.gl.UNSIGNED_BYTE,l),n.gl.generateMipmap(n.gl.TEXTURE_2D),n.gl.bindTexture(n.gl.TEXTURE_2D,null);var s=new a;null!=s&&(s.fileName=t,s.width=l.width,s.height=l.height,s.id=o,s.img=l,s.usePremultply=e,i._textures.pushBack(s)),r(s)},l.src=t},t.prototype.releaseTextures=function(){for(var t=0;t<this._textures.getSize();t++)this._textures.set(t,null);this._textures.clear()},t.prototype.releaseTextureByTexture=function(t){for(var e=0;e<this._textures.getSize();e++)if(this._textures.at(e).id==t){this._textures.set(e,null),this._textures.remove(e);break}},t.prototype.releaseTextureByFilePath=function(t){for(var e=0;e<this._textures.getSize();e++)if(this._textures.at(e).fileName==t){this._textures.set(e,null),this._textures.remove(e);break}},t}();e.LAppTextureManager=o;var a=function(){this.id=null,this.width=0,this.height=0};e.TextureInfo=a},function(t,e,r){"use strict";var i=r(7),n=r(61),o=r(14),a=r(62),s=r(63),u=r(64),l=r(65),c=r(66),f=document.createElement("style");f.innerHTML="\n  .live2d-widget-dialog-container {\n    width: 300px;\n    height: 120px;\n    position: absolute;\n    bottom: 65%;\n    right: 0px;\n    transform-origin: right;\n    padding: 12px;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n  }\n  .live2d-widget-dialog {\n    width: 100%;\n    height: 100%;\n    color: #917159;\n    font-size: 16px;\n    padding: 12px;\n    border: 2px solid rgb(236, 203, 180);\n    background: rgb(252, 248, 244);\n    box-sizing: border-box;\n    border-radius: 10px;\n    transform: rotate(-2deg);\n    opacity: 0;\n    transition: 200ms opacity;\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 6px, rgba(0, 0, 0, 0.12) 0px 1px 4px;\n    animation: live2d-widget-dialog-tingle 4s ease-in-out 0s infinite alternate;\n  }\n  @keyframes live2d-widget-dialog-tingle {\n    0% { transform: translate(-1px, 1.5px) rotate(-2deg); }\n    100% { transform: translate(1px, -1.5px) rotate(2deg); }\n  }",document.head.appendChild(f);var h=void 0,p=void 0,g=void 0;function d(){p.style.opacity=1}function m(){p.style.opacity=0}function _(t){d(),p.innerText=t,clearTimeout(g),g=setTimeout((function(){m()}),5e3)}t.exports={createDialogElement:function(t){if((h=document.createElement("div")).className="live2d-widget-dialog-container",h.style.transform="scale("+i.config.display.width/250+")",(p=document.createElement("div")).className="live2d-widget-dialog",h.appendChild(p),t.appendChild(h),o.L2Dwidget.emit("create-dialog",h),i.config.dialog.script){var e=new n.ScriptEngine(_);e.registerEmitter("every",(0,a.everyEmitter)(e)),e.registerEmitter("hover",(0,s.hoverEmitter)()),e.registerEmitter("tap body",(0,u.tapbodyEmitter)(o.L2Dwidget)),e.registerEmitter("tap face",(0,l.tapfaceEmitter)(o.L2Dwidget)),e.registerVariable("hitokoto",c.hitokotoVariable),Object.keys(i.config.dialog.script).forEach((function(t){e.run(t,i.config.dialog.script[t])}))}},displayDialog:d,hiddenDialog:m,alertText:_}},function(t,e,r){"use strict";var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),n=r(16),o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.output=t,r.emitters=[],r.variables=[],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n.EventEmitter),i(e,[{key:"registerEmitter",value:function(t,e){this.emitters.push({name:t.toLowerCase(),func:e})}},{key:"registerVariable",value:function(t,e){this.variables.push({name:t.toLowerCase(),func:e})}},{key:"matchEmitter",value:function(t){return this.emitters.find((function(e){return t.toLowerCase().startsWith(e.name)}))}},{key:"matchVariable",value:function(t){return this.variables.find((function(e){return t.toLowerCase()===e.name}))}},{key:"injectVariable",value:function(t){var e=this;Array.isArray(t)&&(t=t[Math.floor(Math.random()*t.length)]);for(var r=/\$(\w+)\$/g,i=t,n=null,o=[];null!==(n=r.exec(t));)o.push(n);var a=o.map((function(t){var r=e.matchVariable(t[1]);if(!r)throw new Error("Unknown variable: "+t[1]);var n=r.func();return Promise.resolve(n).then((function(e){return i=i.replace(t[0],e),e}))}));return Promise.all(a).then((function(){return i}))}},{key:"run",value:function(t,e){var r=this,i=t.trim().toLowerCase(),n=this.matchEmitter(i);if(!n)throw new Error("Unknown emitter: "+i);var o=i.slice(n.name.length).trim().split(/\s+/g);n.func(o,(function(){r.emit("emit"),r.injectVariable(e).then((function(t){return r.output(t)}))}))}}]),e}();t.exports={ScriptEngine:o}},function(t,e,r){"use strict";t.exports={everyEmitter:function(t){return function(e,r){var i=void 0,n=void 0;if(1===e.length)i=e[0],n=!1;else{if(2!==e.length)return;i=e[1],n="idle"===e[0]}var o=function(t){var e=/^(\d+)(s|seconds?)$/g,r=/^(\d+)(ms|milliseconds?)$/g,i=/^(\d+)(m|minutes?)$/g,n=t.toLowerCase(),o=0;return e.test(n)?(e.lastIndex=0,o=1e3*parseInt(e.exec(n)[1])):r.test(n)?(r.lastIndex=0,o=parseInt(r.exec(n)[1])):i.test(n)&&(i.lastIndex=0,o=60*parseInt(i.exec(n)[1])*1e3),o}(i);if(o){var a=null,s=function t(){a=null,r(),n||(a&&clearTimeout(a),a=setTimeout(t,o))};t.on("emit",(function(){n&&(a&&clearTimeout(a),a=setTimeout(s,o))})),s()}}}}},function(t,e,r){"use strict";t.exports={hoverEmitter:function(){return function(t,e){document.querySelectorAll(t[0]).forEach((function(t){t.addEventListener("mouseenter",(function(){e()}))}))}}}},function(t,e,r){"use strict";t.exports={tapbodyEmitter:function(t){return function(e,r){t.on("tapbody",r)}}}},function(t,e,r){"use strict";t.exports={tapfaceEmitter:function(t){return function(e,r){t.on("tapface",r)}}}},function(t,e,r){"use strict";t.exports={hitokotoVariable:function(){return new Promise((function(t){var e=new XMLHttpRequest;e.open("get","https://v1.hitokoto.cn"),e.setRequestHeader("Cache-Control","no-cache"),e.onreadystatechange=function(){if(4===e.readyState){var r=JSON.parse(e.responseText);t(r.hitokoto)}},e.send()}))}}}]));
//# sourceMappingURL=L2Dwidget.common.js.map